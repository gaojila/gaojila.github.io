[{"categories":["linux(ğŸ§)"],"content":"è§£å†³ArchLinuxç”¨NetworkManagerå’Œwpa_suppicantè¿æ¥wifiåå¤é‡è¿ ","date":"2021-02-08","objectID":"/archlinux%E5%8F%8D%E5%A4%8D%E9%87%8D%E8%BF%9Ewifi%E8%A7%A3%E5%86%B3/:1:0","tags":["archlinux"],"title":"ArchLinuxåå¤é‡è¿wifiè§£å†³","uri":"/archlinux%E5%8F%8D%E5%A4%8D%E9%87%8D%E8%BF%9Ewifi%E8%A7%A3%E5%86%B3/"},{"categories":["linux(ğŸ§)"],"content":"èƒŒæ™¯ å®¶ç”¨è·¯ç”±å™¨æ”¹ä¸ºapæ¨¡å¼åï¼Œwifiåå¤é‡è¿ï¼Œæ­£å¸¸è·¯ç”±æ¨¡å¼æœªå‡ºç°è¿™ç§ç°è±¡ã€‚ ","date":"2021-02-08","objectID":"/archlinux%E5%8F%8D%E5%A4%8D%E9%87%8D%E8%BF%9Ewifi%E8%A7%A3%E5%86%B3/:1:1","tags":["archlinux"],"title":"ArchLinuxåå¤é‡è¿wifiè§£å†³","uri":"/archlinux%E5%8F%8D%E5%A4%8D%E9%87%8D%E8%BF%9Ewifi%E8%A7%A3%E5%86%B3/"},{"categories":["linux(ğŸ§)"],"content":"åŸå›  ArchLinuxå°½ç„¶é»˜è®¤ä½¿ç”¨NetworkManageråˆ°å†…ç½®åˆ°dhcpï¼Œå†…ç½®dhcpæœåŠ¡å’ŒArchLinuxæœ¬åœ°çš„dhcpæœåŠ¡å†²çªã€‚ ","date":"2021-02-08","objectID":"/archlinux%E5%8F%8D%E5%A4%8D%E9%87%8D%E8%BF%9Ewifi%E8%A7%A3%E5%86%B3/:1:2","tags":["archlinux"],"title":"ArchLinuxåå¤é‡è¿wifiè§£å†³","uri":"/archlinux%E5%8F%8D%E5%A4%8D%E9%87%8D%E8%BF%9Ewifi%E8%A7%A3%E5%86%B3/"},{"categories":["linux(ğŸ§)"],"content":"è§£å†³æ–¹æ³• æ›´æ”¹dhcpcdçš„é…ç½®æ–‡ä»¶/etc/dhcpcd.confï¼Œå°†duidæ”¹ä¸ºclientidï¼Œç„¶åé‡å¯æœåŠ¡ã€‚ systemctl restart dhcpcd@[interface].service å®‰è£…ä¸Šdhclientã€‚ sudo pacman -S dhclient /etc/NetworkManager/NetworkManager.conf è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¢åŠ ã€‚ [main] dhcp = dhclient é‡å¯æœåŠ¡ã€‚ sudo systemctl restart NetworkManager ","date":"2021-02-08","objectID":"/archlinux%E5%8F%8D%E5%A4%8D%E9%87%8D%E8%BF%9Ewifi%E8%A7%A3%E5%86%B3/:1:3","tags":["archlinux"],"title":"ArchLinuxåå¤é‡è¿wifiè§£å†³","uri":"/archlinux%E5%8F%8D%E5%A4%8D%E9%87%8D%E8%BF%9Ewifi%E8%A7%A3%E5%86%B3/"},{"categories":["blog"],"content":"èƒŒæ™¯ 12æœˆTravis Ci ä¸å†ä¸ºå¼€æºé¡¹ç›®æä¾›æ”¯æŒï¼Œæ•…è½¬æˆ˜Github Action ","date":"2021-01-29","objectID":"/travis-ci%E8%BD%AC%E5%88%B0github-action/:1:0","tags":["hugo","hexo"],"title":"Travis Ciè½¬åˆ°Github Action","uri":"/travis-ci%E8%BD%AC%E5%88%B0github-action/"},{"categories":["blog"],"content":"å‡†å¤‡å·¥ä½œ ç”Ÿæˆå¯¹ç§°å¯†é’¥ é…ç½®æºç ä»“åº“å’Œå‘å¸ƒä»“åº“å¯†é’¥ é…ç½®Github Action ","date":"2021-01-29","objectID":"/travis-ci%E8%BD%AC%E5%88%B0github-action/:2:0","tags":["hugo","hexo"],"title":"Travis Ciè½¬åˆ°Github Action","uri":"/travis-ci%E8%BD%AC%E5%88%B0github-action/"},{"categories":["blog"],"content":"å¼€å§‹ ","date":"2021-01-29","objectID":"/travis-ci%E8%BD%AC%E5%88%B0github-action/:3:0","tags":["hugo","hexo"],"title":"Travis Ciè½¬åˆ°Github Action","uri":"/travis-ci%E8%BD%AC%E5%88%B0github-action/"},{"categories":["blog"],"content":"ç”Ÿæˆå¯¹ç§°å¯†é’¥ â¯ ssh-keygen -t rsa -b 4096 -C \"$(git config user.email)\" -f gh-pages -N \"\" Generating public/private rsa key pair. Your identification has been saved in gh-pages. Your public key has been saved in gh-pages.pub. The key fingerprint is: SHA256:qm3ZlWXDEwfSwxmqMIQAzcDyasdfasdfuqioweqnslfansd0 redgaojila@gmail.com The key's randomart image is: +---[RSA 4096]----+ |+=.. .. .oo+ | |..+ .. o* . | |.= o .. + | |.o+ o . * | |*=.. S + o | |==o . o | |*o ..o . | |B.o .oE . | | = ..o. | +----[SHA256]-----+ â¯ ll gh-pages* Permissions Size User Date Modified Name .rw------- 3.4k redgaojila 29 1 14:00 gh-pages .rw-r--r-- 746 redgaojila 29 1 14:00 gh-pages.pub ","date":"2021-01-29","objectID":"/travis-ci%E8%BD%AC%E5%88%B0github-action/:3:1","tags":["hugo","hexo"],"title":"Travis Ciè½¬åˆ°Github Action","uri":"/travis-ci%E8%BD%AC%E5%88%B0github-action/"},{"categories":["blog"],"content":"é…ç½®æºç ä»“åº“å’Œå‘å¸ƒä»“åº“å¯†é’¥ æ­¤å¤„å¡«å…¥ç§é’¥è®¾ç½®ç§é’¥åç§°(ACTIONS_DEPLOY_KEY) æ­¤å¤„å¡«å…¥å…¬é’¥ ","date":"2021-01-29","objectID":"/travis-ci%E8%BD%AC%E5%88%B0github-action/:3:2","tags":["hugo","hexo"],"title":"Travis Ciè½¬åˆ°Github Action","uri":"/travis-ci%E8%BD%AC%E5%88%B0github-action/"},{"categories":["blog"],"content":"é…ç½®Github Action é€‰æ‹©workflow é…ç½®workflow name:Hugoon:push:branches:- masterjobs:build:runs-on:ubuntu-lateststeps:- name:checkoutuses:actions/checkout@masterwith:submodules:true- name:Setup Hugouses:peaceiris/actions-hugo@v2.4.13with:hugo-version:'0.80.0'extended:true- name:Hugo Buildrun:hugo --gc --minify --buildFuture --cleanDestinationDir- name:Install algolia modulerun:npm install atomic-algolia --save-dev- name:Init algoliarun:npm run algolia- name:Deployuses:peaceiris/actions-gh-pages@v3.7.3with:DEPLOY_KEY:${{ secrets.ACTIONS_DEPLOY_KEY }}## æ­¤å¤„ä¸ºä¹‹å‰é…ç½®åˆ°ç§é’¥åç§°EXTERNAL_REPOSITORY:gaojila/gaojila.github.ioPUBLISH_BRANCH:masterPUBLISH_DIR:./public ","date":"2021-01-29","objectID":"/travis-ci%E8%BD%AC%E5%88%B0github-action/:3:3","tags":["hugo","hexo"],"title":"Travis Ciè½¬åˆ°Github Action","uri":"/travis-ci%E8%BD%AC%E5%88%B0github-action/"},{"categories":["Prometheus"],"content":"PromQL å¸¸ç”¨å‡½æ•° ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:0:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"abs() abs(v instant-vector)è¿”å›è¾“å…¥å‘é‡ï¼Œæ‰€æœ‰æ ·æœ¬å€¼éƒ½è½¬æ¢ä¸ºå…¶ç»å¯¹å€¼ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:1:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"absent() absent(v instant-vector)å¦‚æœä¼ é€’ç»™å®ƒçš„å‘é‡å…·æœ‰ä»»ä½•å…ƒç´ ï¼Œåˆ™è¿”å›ç©ºå‘é‡;å¦‚æœä¼ é€’ç»™å®ƒçš„å‘é‡æ²¡æœ‰å…ƒç´ ï¼Œåˆ™è¿”å›å€¼ä¸º 1 çš„ 1 å…ƒç´ å‘é‡ã€‚ è¿™å¯¹äºåœ¨ç»™å®šåº¦é‡æ ‡å‡†åç§°å’Œæ ‡ç­¾ç»„åˆä¸å­˜åœ¨æ—¶é—´åºåˆ—æ—¶å‘å‡ºè­¦æŠ¥éå¸¸æœ‰ç”¨ã€‚ absent(nonexistent{job=\"myjob\"}) # =\u003e {job=\"myjob\"} absent(nonexistent{job=\"myjob\", instance=~\".*\"}) # =\u003e {job=\"myjob\"} absent(sum(nonexistent{job=\"myjob\"})) # =\u003e {} ç¬¬åœ¨äºŒä¸ªä¾‹å­ä¸­ï¼Œabsent()è¯•å›¾ä»è¾“å…¥å‘é‡ä¸­å¯¼å‡º 1 å…ƒç´ è¾“å‡ºå‘é‡çš„æ ‡ç­¾ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:2:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"ceil() ceil(v instant-vector) å°† v ä¸­æ‰€æœ‰å…ƒç´ çš„æ ·æœ¬å€¼èˆå…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:3:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"changes() å¯¹äºæ¯ä¸ªè¾“å…¥æ—¶é—´ç³»åˆ—ï¼Œchanges(v range-vector) å°†è¿”å›å…¶å€¼åœ¨æ‰€æä¾›çš„æ—¶é—´èŒƒå›´å†…æ›´æ”¹çš„æ¬¡æ•°ä½œä¸ºå³æ—¶å‘é‡ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:4:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"clamp_max() clamp_max(v instant-vector, max scalar)é’³åˆ¶ v ä¸­æ‰€æœ‰å…ƒç´ çš„æ ·æœ¬å€¼ï¼Œä½¿å…¶ä¸Šé™ä¸º maxã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:5:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"clamp_min() clamp_min(v instant-vector, min scalar)é’³åˆ¶ v ä¸­æ‰€æœ‰å…ƒç´ çš„æ ·æœ¬å€¼ï¼Œä½¿å…¶ä¸‹é™ä¸º minã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:6:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"day_of_month() day_of_month(v=vector(time()) instant-vector)è¿”å› UTC ä¸­æ¯ä¸ªç»™å®šæ—¶é—´çš„æœˆä¸­çš„æŸå¤©ã€‚ è¿”å›å€¼ä¸º 1 åˆ° 31ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:7:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"day_of_week() day_of_week(v=vector(time()) instant-vector)è¿”å› UTC ä¸­æ¯ä¸ªç»™å®šæ—¶é—´çš„æ˜ŸæœŸå‡ ã€‚ è¿”å›å€¼ä¸º 0 åˆ° 6ï¼Œå…¶ä¸­ 0 è¡¨ç¤ºæ˜ŸæœŸæ—¥ç­‰ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:8:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"days_in_month() days_in_month(v=vector(time()) instant-vector)è¿”å› UTC ä¸­æ¯ä¸ªç»™å®šæ—¶é—´çš„æœˆä¸­å¤©æ•°ã€‚ è¿”å›å€¼ä¸º 28 åˆ° 31ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:9:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"hour() hour(v=vector(time()) instant-vector)è¿”å› UTC ä¸­æ¯ä¸ªç»™å®šæ—¶é—´çš„ä¸€å¤©ä¸­çš„å°æ—¶ã€‚ è¿”å›å€¼ä¸º 0 åˆ° 23ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:10:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"minute() minute(v=vector(time()) instant-vector)ä»¥ UTC ä¸ºå•ä½è¿”å›æ¯ä¸ªç»™å®šæ—¶é—´çš„åˆ†é’Ÿã€‚ è¿”å›å€¼ä¸º 0 åˆ° 59ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:11:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"month() month(v=vector(time()) instant-vector)è¿”å› UTC ä¸­æ¯ä¸ªç»™å®šæ—¶é—´çš„ä¸€å¹´ä¸­çš„æœˆä»½ã€‚ è¿”å›å€¼ä¸º 2 åˆ° 12ï¼Œå…¶ä¸­ 1 è¡¨ç¤º 1 æœˆç­‰ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:12:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"year() year(v=vector(time()) instant-vector)ä»¥ UTC æ ¼å¼è¿”å›æ¯ä¸ªç»™å®šæ—¶é—´çš„å¹´ä»½ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:13:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"time() time()è¿”å›è‡ª 1970 å¹´ 1 æœˆ 1 æ—¥ UTC ä»¥æ¥çš„ç§’æ•°ã€‚ è¯·æ³¨æ„ï¼Œè¿™å®é™…ä¸Šå¹¶ä¸è¿”å›å½“å‰æ—¶é—´ï¼Œè€Œæ˜¯è¿”å›è®¡ç®—è¡¨è¾¾å¼çš„æ—¶é—´ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:14:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"timestamp() timestamp(v instant-vector)è¿”å›ç»™å®šå‘é‡çš„æ¯ä¸ªæ ·æœ¬çš„æ—¶é—´æˆ³ï¼Œä½œä¸ºè‡ª 1970 å¹´ 1 æœˆ 1 æ—¥ UTC ä»¥æ¥çš„ç§’æ•°ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:15:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"delta() delta(v range-vector)è®¡ç®—èŒƒå›´å‘é‡ v ä¸­æ¯ä¸ªæ—¶é—´ç³»åˆ—å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå€¼ä¹‹é—´çš„å·®å€¼ï¼Œè¿”å›å…·æœ‰ç»™å®šå¢é‡å’Œç­‰æ•ˆæ ‡ç­¾çš„å³æ—¶å‘é‡ã€‚ delta è¢«å¤–æ¨ä»¥è¦†ç›–èŒƒå›´å‘é‡é€‰æ‹©å™¨ä¸­æŒ‡å®šçš„å…¨æ—¶é—´èŒƒå›´ï¼Œå› æ­¤å³ä½¿æ ·æœ¬å€¼éƒ½æ˜¯æ•´æ•°ï¼Œä¹Ÿå¯ä»¥è·å¾—éæ•´æ•°ç»“æœã€‚delta åº”ä»…ç”¨äºä»ªè¡¨ã€‚ ä»¥ä¸‹ç¤ºä¾‹è¡¨è¾¾å¼è¿”å›ç°åœ¨å’Œ2å°æ—¶ä¹‹å‰CPUæ¸©åº¦çš„å·®å¼‚ï¼š delta(cpu_temp_celsius{host=\"zeus\"}[2h]) ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:16:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"idelta() idelta(v range-vector)è®¡ç®—èŒƒå›´å‘é‡ v ä¸­æœ€åä¸¤ä¸ªæ ·æœ¬ä¹‹é—´çš„å·®å¼‚ï¼Œè¿”å›å…·æœ‰ç»™å®šå¢é‡å’Œç­‰æ•ˆæ ‡ç­¾çš„å³æ—¶å‘é‡ã€‚ideltaåªèƒ½ç”¨äºä»ªè¡¨ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:17:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"deriv() deriv(v range-vector)å‡½æ•°ï¼Œè®¡ç®—ä¸€ä¸ªèŒƒå›´å‘é‡ v ä¸­å„ä¸ªæ—¶é—´åºåˆ—äºŒé˜¶å¯¼æ•°ï¼Œä½¿ç”¨ç®€å•çº¿æ€§å›å½’,derivåº”ä»…ç”¨äºä»ªè¡¨ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:18:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"floor() floor(v instant-vector)å°† v ä¸­æ‰€æœ‰å…ƒç´ çš„æ ·æœ¬å€¼èˆå…¥ä¸ºæœ€æ¥è¿‘çš„æ•´æ•°ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:19:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"histogram_quantile() histogram_quatile(Ï† float, b instant-vector) è®¡ç®— b å‘é‡çš„ Ï†-ç›´æ–¹å›¾ (0 â‰¤ Ï† â‰¤ 1) ã€‚ï¼ˆæœ‰å…³ Ï†-åˆ†ä½æ•°çš„è¯¦ç»†è§£é‡Šå’Œç›´æ–¹å›¾åº¦é‡ç±»å‹çš„ä½¿ç”¨ï¼Œè¯·å‚è§ç›´æ–¹å›¾å’Œæ‘˜è¦ã€‚ï¼‰b ä¸­çš„æ ·æœ¬æ˜¯æ¯ä¸ªæ¡¶ä¸­çš„è§‚å¯Ÿè®¡æ•°ã€‚ æ¯ä¸ªæ ·æœ¬å¿…é¡»å…·æœ‰æ ‡ç­¾ leï¼Œå…¶ä¸­æ ‡ç­¾å€¼è¡¨ç¤ºæ¡¶çš„åŒ…å«ä¸Šé™ã€‚ ï¼ˆæ²¡æœ‰è¿™ç§æ ‡ç­¾çš„æ ·æœ¬ä¼šè¢«å¿½ç•¥ã€‚ï¼‰ç›´æ–¹å›¾åº¦é‡æ ‡å‡†ç±»å‹è‡ªåŠ¨æä¾›å¸¦æœ‰_bucket åç¼€å’Œç›¸åº”æ ‡ç­¾çš„æ—¶é—´åºåˆ—ã€‚ ä½¿ç”¨ rate()å‡½æ•°æŒ‡å®šåˆ†ä½æ•°è®¡ç®—çš„æ—¶é—´çª—å£ã€‚ ç¤ºä¾‹ï¼šç›´æ–¹å›¾åº¦é‡æ ‡å‡†ç§°ä¸º http_request_duration_secondsã€‚ è¦è®¡ç®—è¿‡å» 10m å†…è¯·æ±‚æŒç»­æ—¶é—´çš„ç¬¬ 90 ä¸ªç™¾åˆ†ä½æ•°ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹è¡¨è¾¾å¼ï¼š histogram_quantile(0.9, rate(http_request_duration_seconds_bucket[10m])) åœ¨ http_request_duration_seconds ä¸­ä¸ºæ¯ä¸ªæ ‡ç­¾ç»„åˆè®¡ç®—åˆ†ä½æ•°ã€‚ è¦èšåˆï¼Œè¯·åœ¨ rate()å‡½æ•°å‘¨å›´ä½¿ç”¨ sum()èšåˆå™¨ã€‚ ç”±äº histogram_quantile()éœ€è¦ le æ ‡ç­¾ï¼Œå› æ­¤å¿…é¡»å°†å…¶åŒ…å«åœ¨ by å­å¥ä¸­ã€‚ ä»¥ä¸‹è¡¨è¾¾å¼æŒ‰ä½œä¸šèšåˆç¬¬ 90 ä¸ªç™¾åˆ†ç‚¹ï¼š histogram_quantile(0.9, sum(rate(http_request_duration_seconds_bucket[10m])) by (job, le)) è¦èšåˆæ‰€æœ‰å†…å®¹ï¼Œè¯·ä»…æŒ‡å®š le æ ‡ç­¾ï¼š histogram_quantile(0.9, sum(rate(http_request_duration_seconds_bucket[10m])) by (le)) histogram_quantile()å‡½æ•°é€šè¿‡å‡è®¾æ¡¶å†…çš„çº¿æ€§åˆ†å¸ƒæ¥æ’å€¼åˆ†ä½æ•°å€¼ã€‚ æœ€é«˜æ¡¶å¿…é¡»å…·æœ‰+Inf çš„ä¸Šé™ã€‚ ï¼ˆå¦åˆ™ï¼Œè¿”å› NaNã€‚ï¼‰å¦‚æœåˆ†ä½æ•°ä½äºæœ€é«˜æ¡¶ä¸­ï¼Œåˆ™è¿”å›ç¬¬äºŒä¸ªæœ€é«˜æ¡¶çš„ä¸Šé™ã€‚ å¦‚æœè¯¥æ¡¶çš„ä¸Šé™å¤§äº 0ï¼Œåˆ™å‡è®¾æœ€ä½æ¡¶çš„ä¸‹é™ä¸º 0.åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨è¯¥æ¡¶å†…åº”ç”¨é€šå¸¸çš„çº¿æ€§æ’å€¼ã€‚ å¦åˆ™ï¼Œå¯¹äºä½äºæœ€ä½æ¡¶ä¸­çš„åˆ†ä½æ•°ï¼Œè¿”å›æœ€ä½æ¡¶çš„ä¸Šé™ã€‚ å¦‚æœ b åŒ…å«å°‘äºä¸¤ä¸ªæ¡¶ï¼Œåˆ™è¿”å› NaNã€‚ å¯¹äº Ï†\u003c0ï¼Œè¿”å›-Infã€‚ å¯¹äº Ï†\u003e 1ï¼Œè¿”å›+Infã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:20:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"holt_winters() holt_winters(v range-vector, sf scalar, tf scalar)æ ¹æ® v ä¸­çš„èŒƒå›´äº§ç”Ÿæ—¶é—´åºåˆ—çš„å¹³æ»‘å€¼ã€‚å¹³æ»‘å› å­ sf è¶Šä½ï¼Œå¯¹æ—§æ•°æ®çš„é‡è¦æ€§è¶Šé«˜ã€‚ è¶‹åŠ¿å› å­ tf è¶Šé«˜ï¼Œåˆ™è€ƒè™‘çš„æ•°æ®è¶‹åŠ¿è¶Šå¤šã€‚ sf å’Œ tf éƒ½å¿…é¡»ä»‹äº 0 å’Œ 1 ä¹‹é—´ã€‚holt_wintersåªèƒ½ç”¨äºä»ªè¡¨ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:21:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"increase() increase(v range-vector)è®¡ç®—èŒƒå›´å‘é‡ä¸­æ—¶é—´åºåˆ—çš„å¢åŠ ã€‚ å•è°ƒæ€§ä¸­æ–­ï¼ˆä¾‹å¦‚ç”±äºç›®æ ‡é‡å¯è€Œå¯¼è‡´çš„è®¡æ•°å™¨é‡ç½®ï¼‰ä¼šè‡ªåŠ¨è°ƒæ•´ã€‚ å¢åŠ å¤–æ¨ä»¥è¦†ç›–èŒƒå›´å‘é‡é€‰æ‹©å™¨ä¸­æŒ‡å®šçš„å…¨æ—¶é—´èŒƒå›´ï¼Œå› æ­¤å³ä½¿è®¡æ•°å™¨ä»…ä»¥æ•´æ•°å¢é‡å¢åŠ ï¼Œä¹Ÿå¯ä»¥è·å¾—éæ•´æ•°ç»“æœã€‚ ä»¥ä¸‹ç¤ºä¾‹è¡¨è¾¾å¼è¿”å›èŒƒå›´å‘é‡ä¸­æ¯ä¸ªæ—¶é—´ç³»åˆ—åœ¨è¿‡å»5åˆ†é’Ÿå†…æµ‹é‡çš„HTTPè¯·æ±‚æ•°ï¼š increase(http_requests_total{job=\"api-server\"}[5m]) increaseåªåº”ä¸countersä¸€èµ·ä½¿ç”¨ã€‚ å®ƒæ˜¯rate(v)çš„è¯­æ³•ç³–ä¹˜ä»¥æŒ‡å®šæ—¶é—´èŒƒå›´çª—å£ä¸‹çš„ç§’æ•°ï¼Œåº”è¯¥ä¸»è¦ç”¨äºäººç±»å¯è¯»æ€§ã€‚ åœ¨è®°å½•è§„åˆ™ä¸­ä½¿ç”¨rateï¼Œä»¥ä¾¿æ¯ç§’ä¸€è‡´åœ°è·Ÿè¸ªå¢é‡ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:22:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"exp() exp(v instant-vector)è®¡ç®— v ä¸­æ‰€æœ‰å…ƒç´ çš„æŒ‡æ•°å‡½æ•°ã€‚ç‰¹æ®Šæƒ…å†µæ˜¯ï¼š xp(+inf) = +Inf Exp(NaN) = NaN ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:23:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"ln() ln(v instance-vector)è®¡ç®— v ä¸­æ‰€æœ‰å…ƒç´ çš„è‡ªç„¶å¯¹æ•°ã€‚ç‰¹æ®Šæƒ…å†µæ˜¯ï¼š ln(+Inf) = +Inf ln(0) = -Inf ln(x\u003c0) = NaN ln(NaN) = NaN ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:24:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"log2() log2(v instant-vector)è®¡ç®— v ä¸­æ‰€æœ‰å…ƒç´ çš„äºŒè¿›åˆ¶å¯¹æ•°ã€‚ç‰¹æ®Šæƒ…å†µç­‰åŒäº ln ä¸­çš„ç‰¹æ®Šæƒ…å†µã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:25:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"log10() log10(v instant-vector)è®¡ç®— v ä¸­æ‰€æœ‰å…ƒç´ çš„ 10 è¿›åˆ¶å¯¹æ•°ã€‚ç‰¹æ®Šæƒ…å†µç­‰åŒäº ln ä¸­çš„ç‰¹æ®Šæƒ…å†µã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:26:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"sqrt() sqrt(v instant-vector)è®¡ç®— v ä¸­æ‰€æœ‰å…ƒç´ çš„å¹³æ–¹æ ¹ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:27:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"predict_linear() predict_linear(v range-vector, t scalar)æ ¹æ®èŒƒå›´å‘é‡ v ä½¿ç”¨çº¿æ€§å›å½’é¢„æµ‹ä»ç°åœ¨èµ· t ç§’çš„æ—¶é—´åºåˆ—å€¼ã€‚predict_linearåªåº”ä¸ä»ªè¡¨ä¸€èµ·ä½¿ç”¨ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:28:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"rate() rate(v range-vector)è®¡ç®—èŒƒå›´å‘é‡ä¸­æ—¶é—´åºåˆ—çš„æ¯ç§’å¹³å‡å¢é•¿ç‡ã€‚ å•è°ƒæ€§ä¸­æ–­ï¼ˆä¾‹å¦‚ç”±äºç›®æ ‡é‡å¯è€Œå¯¼è‡´çš„è®¡æ•°å™¨é‡ç½®ï¼‰ä¼šè‡ªåŠ¨è°ƒæ•´ã€‚ æ­¤å¤–ï¼Œè®¡ç®—æ¨æ–­åˆ°æ—¶é—´èŒƒå›´çš„æœ«ç«¯ï¼Œå…è®¸é”™è¿‡åˆ®æ“¦æˆ–åˆ®æ“¦å¾ªç¯ä¸èŒƒå›´çš„æ—¶é—´æ®µçš„ä¸å®Œç¾å¯¹é½ã€‚ ä»¥ä¸‹ç¤ºä¾‹è¡¨è¾¾å¼è¿”å›èŒƒå›´å‘é‡ä¸­æ¯ä¸ªæ—¶é—´ç³»åˆ—åœ¨è¿‡å»5åˆ†é’Ÿå†…æµ‹é‡çš„æ¯ç§’HTTPè¯·æ±‚ç‡ï¼š rate(http_requests_total{job=\"api-server\"}[5m]) rateåº”ä»…ç”¨äºè®¡æ•°å™¨ã€‚ å®ƒæœ€é€‚ç”¨äºè­¦æŠ¥å’Œç¼“æ…¢ç§»åŠ¨è®¡æ•°å™¨çš„å›¾å½¢ã€‚ æ³¨æ„ï¼Œå½“å°†rate()ä¸èšåˆè¿ç®—ç¬¦ï¼ˆä¾‹å¦‚sum()ï¼‰æˆ–éšæ—¶é—´èšåˆçš„å‡½æ•°ï¼ˆä»»ä½•ä»¥_over_timeç»“å°¾çš„å‡½æ•°ï¼‰ç»„åˆæ—¶ï¼Œå§‹ç»ˆé¦–å…ˆé‡‡ç”¨rate()ï¼Œç„¶åèšåˆã€‚ å¦åˆ™ï¼Œå½“ç›®æ ‡é‡æ–°å¯åŠ¨æ—¶ï¼Œrate()æ— æ³•æ£€æµ‹è®¡æ•°å™¨é‡ç½®ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:29:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"irate() irate(v range-vector)è®¡ç®—èŒƒå›´å‘é‡ä¸­æ—¶é—´åºåˆ—çš„æ¯ç§’å³æ—¶å¢é•¿ç‡ã€‚ è¿™åŸºäºæœ€åä¸¤ä¸ªæ•°æ®ç‚¹ã€‚ å•è°ƒæ€§ä¸­æ–­ï¼ˆä¾‹å¦‚ç”±äºç›®æ ‡é‡å¯è€Œå¯¼è‡´çš„è®¡æ•°å™¨é‡ç½®ï¼‰ä¼šè‡ªåŠ¨è°ƒæ•´ã€‚ ä»¥ä¸‹ç¤ºä¾‹è¡¨è¾¾å¼è¿”å›èŒƒå›´å‘é‡ä¸­æ¯ä¸ªæ—¶é—´åºåˆ—çš„ä¸¤ä¸ªæœ€æ–°æ•°æ®ç‚¹çš„æœ€å¤š5åˆ†é’Ÿçš„HTTPè¯·æ±‚çš„æ¯ç§’é€Ÿç‡ï¼š irate(http_requests_total{job=\"api-server\"}[5m]) åªåº”åœ¨ç»˜åˆ¶æ˜“å¤±æ€§å¿«é€Ÿç§»åŠ¨è®¡æ•°å™¨æ—¶ä½¿ç”¨irateã€‚ è­¦æŠ¥å’Œç¼“æ…¢ç§»åŠ¨è®¡æ•°å™¨çš„ä½¿ç”¨ç‡ï¼Œå› ä¸ºé€Ÿç‡çš„ç®€çŸ­æ›´æ”¹å¯ä»¥é‡ç½®FORå­å¥ï¼Œå¹¶ä¸”éš¾ä»¥é˜…è¯»å®Œå…¨ç”±ç¨€æœ‰å³°å€¼ç»„æˆçš„å›¾å½¢ã€‚ æ³¨æ„ï¼Œå½“å°†irate()ä¸èšåˆè¿ç®—ç¬¦ï¼ˆä¾‹å¦‚sum()ï¼‰æˆ–éšæ—¶é—´èšåˆçš„å‡½æ•°ï¼ˆä»»ä½•ä»¥_over_timeç»“å°¾çš„å‡½æ•°ï¼‰ç»„åˆæ—¶ï¼Œè¯·å§‹ç»ˆé¦–å…ˆé‡‡ç”¨irate()ï¼Œç„¶åè¿›è¡Œèšåˆã€‚ å¦åˆ™ï¼Œå½“ç›®æ ‡é‡æ–°å¯åŠ¨æ—¶ï¼Œirate()æ— æ³•æ£€æµ‹è®¡æ•°å™¨é‡ç½®ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:30:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"resets() å¯¹äºæ¯ä¸ªæ—¶åºæ•°æ®ï¼Œresets()åœ¨æ‰€æä¾›çš„æ—¶é—´èŒƒå›´å†…è¿”å›è®¡æ•°å™¨é‡ç½®æ¬¡æ•°ä½œä¸ºå³æ—¶å‘é‡ã€‚ ä¸¤ä¸ªè¿ç»­æ ·æœ¬ä¹‹é—´çš„å€¼çš„ä»»ä½•å‡å°‘éƒ½è¢«è§£é‡Šä¸ºè®¡æ•°å™¨é‡ç½®ã€‚ resets()åªåº”ä¸è®¡æ•°å™¨ä¸€èµ·ä½¿ç”¨ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:31:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"round() round(v instant-vector, to_nearest 1= scalar)å°† v ä¸­æ‰€æœ‰å…ƒç´ çš„æ ·æœ¬å€¼èˆå…¥ä¸ºæœ€æ¥è¿‘çš„æ•´æ•°ã€‚ é€šè¿‡å››èˆäº”å…¥è§£å†³å…³ç³»ã€‚ å¯é€‰çš„ to_nearest å‚æ•°å…è®¸æŒ‡å®šæ ·æœ¬å€¼åº”èˆå…¥çš„æœ€è¿‘å€æ•°ã€‚ è¿™ä¸ªå€æ•°ä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªåˆ†æ•°ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:32:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"scalar() ç»™å®šå•å…ƒç´ è¾“å…¥å‘é‡ï¼Œscalar(v instant-vector)å°†è¯¥å•ä¸ªå…ƒç´ çš„æ ·æœ¬å€¼ä½œä¸ºæ ‡é‡è¿”å›ã€‚ å¦‚æœè¾“å…¥å‘é‡ä¸å…·æœ‰æ°å¥½ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ scalar å°†è¿”å› NaN ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:33:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"sort() sort(v instant-vector)è¿”å›æŒ‰å…¶æ ·æœ¬å€¼æ’åºçš„å‘é‡å…ƒç´ ï¼ŒæŒ‰å‡åºæ’åˆ—ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:34:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"sort_desc() sort(v instant-vector)å’Œsort()ç›¸åŒï¼Œä½†æŒ‰é™åºæ’åºã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:35:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"vector() vector(s scalar)å°†æ ‡é‡ s ä½œä¸ºæ²¡æœ‰æ ‡ç­¾çš„å‘é‡è¿”å›ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:36:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["Prometheus"],"content":"_over_time() ä»¥ä¸‹å‡½æ•°å…è®¸èšåˆç»™å®šèŒƒå›´å‘é‡çš„æ¯ä¸ªç³»åˆ—éšæ—¶é—´çš„å˜åŒ–å¹¶è¿”å›å…·æœ‰æ¯ç³»åˆ—èšåˆç»“æœçš„å³æ—¶å‘é‡ï¼š avg_over_time(range-vector): èŒƒå›´å‘é‡å†…æ¯ä¸ªåº¦é‡æŒ‡æ ‡çš„å¹³å‡å€¼ã€‚ min_over_time(range-vector): èŒƒå›´å‘é‡å†…æ¯ä¸ªåº¦é‡æŒ‡æ ‡çš„æœ€å°å€¼ã€‚ max_over_time(range-vector): èŒƒå›´å‘é‡å†…æ¯ä¸ªåº¦é‡æŒ‡æ ‡çš„æœ€å¤§å€¼ã€‚ sum_over_time(range-vector): èŒƒå›´å‘é‡å†…æ¯ä¸ªåº¦é‡æŒ‡æ ‡çš„æ±‚å’Œå€¼ã€‚ count_over_time(range-vector): èŒƒå›´å‘é‡å†…æ¯ä¸ªåº¦é‡æŒ‡æ ‡çš„æ ·æœ¬æ•°æ®ä¸ªæ•°ã€‚ quantile_over_time(scalar, range-vector): èŒƒå›´å‘é‡å†…æ¯ä¸ªåº¦é‡æŒ‡æ ‡çš„æ ·æœ¬æ•°æ®å€¼åˆ†ä½æ•°ï¼ŒÏ†-quantile (0 â‰¤ Ï† â‰¤ 1) stddev_over_time(range-vector): èŒƒå›´å‘é‡å†…æ¯ä¸ªåº¦é‡æŒ‡æ ‡çš„æ€»ä½“æ ‡å‡†åå·®ã€‚ stdvar_over_time(range-vector): èŒƒå›´å‘é‡å†…æ¯ä¸ªåº¦é‡æŒ‡æ ‡çš„æ€»ä½“æ ‡å‡†æ–¹å·®ã€‚ è¯·æ³¨æ„ï¼Œå³ä½¿å€¼åœ¨æ•´ä¸ªæ—¶é—´é—´éš”å†…çš„é—´éš”ä¸å‡åŒ€ï¼ŒæŒ‡å®šæ—¶é—´é—´éš”å†…çš„æ‰€æœ‰å€¼åœ¨èšåˆä¸­éƒ½å…·æœ‰ç›¸åŒçš„æƒé‡ã€‚ ","date":"2020-08-31","objectID":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/:37:0","tags":["PromQL"],"title":"PromQLå¸¸ç”¨å‡½æ•°","uri":"/promql%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"},{"categories":["CKA"],"content":"é¢˜ç›® ç›‘æ§ foobar Pod çš„æ—¥å¿—ï¼Œæå– pod ç›¸åº”çš„è¡Œ'error'å†™å…¥åˆ°/logs æ–‡ä»¶ä¸­ ","date":"2020-07-10","objectID":"/cka2.kubectl-logs/:1:0","tags":["å®¹å™¨(ğŸš¢)"],"title":"CKA(2.kubectl logs)","uri":"/cka2.kubectl-logs/"},{"categories":["CKA"],"content":"è§£é¢˜ æŸ¥çœ‹ pod çš„æ—¥å¿—ï¼Œæ˜¯ä½¿ç”¨ kubelet logs å‘½ä»¤,é€‰é¡¹å¦‚ä¸‹: Options: --all-containers=false: Get all containers' logs in the pod(s). -c, --container='': Print the logs of this container -f, --follow=false: Specify if the logs should be streamed. --ignore-errors=false: If watching / following pod logs, allow for any errors that occur to be non-fatal --insecure-skip-tls-verify-backend=false: Skip verifying the identity of the kubelet that logs are requested from. In theory, an attacker could provide invalid log content back. You might want to use this if your kubelet serving certificates have expired. --limit-bytes=0: Maximum bytes of logs to return. Defaults to no limit. --max-log-requests=5: Specify maximum number of concurrent logs to follow when using by a selector. Defaults to 5. --pod-running-timeout=20s: The length of time (like 5s, 2m, or 3h, higher than zero) to wait until at least one pod is running --prefix=false: Prefix each log line with the log source (pod name and container name) -p, --previous=false: If true, print the logs for the previous instance of the container in a pod if it exists. -l, --selector='': Selector (label query) to filter on. --since=0s: Only return logs newer than a relative duration like 5s, 2m, or 3h. Defaults to all logs. Only one of since-time / since may be used. --since-time='': Only return logs after a specific date (RFC3339). Defaults to all logs. Only one of since-time / since may be used. --tail=-1: Lines of recent log file to display. Defaults to -1 with no selector, showing all log lines otherwise 10, if a selector is provided. --timestamps=false: Include timestamps on each line in the log output Usage: kubectl logs [-f] [-p] (POD | TYPE/NAME) [-c CONTAINER] [options] Use \"kubectl options\" for a list of global command-line options (applies to all commands). å¯¹äºä¸€èˆ¬çš„æŸ¥çœ‹ï¼Œåªéœ€è¦ä½¿ç”¨ kubectlÂ logs podname å°±å¯ä»¥äº† root@shein-mointor-lab-01:~# kubectl logs node-exporter-pfw4v -n kube-monitorc -c, --container='': Print the logs of this container åœ¨æŸ¥çœ‹ pod çš„æ—¥å¿—æ—¶ï¼Œå¦‚æœ pod ä¸­åªæœ‰ä¸€ä¸ªå®¹å™¨ï¼Œé‚£ä¹ˆä¸ç”¨è¿™ä¸ªé€‰é¡¹ï¼Œå¦‚æœ pod ä¸­æœ‰å¤šä¸ªå®¹å™¨ï¼Œæˆ‘ä»¬å°±éœ€è¦æŒ‡å®šå…¶ä¸­ä¸€ä¸ªã€‚ æ¯”å¦‚æˆ‘ä»¬çš„ pod kucc ä¸­æœ‰ 4 ä¸ªå®¹å™¨ï¼Œredisï¼Œnginxï¼Œmemcached å’Œ consulï¼Œæˆ‘ä»¬è¦çœ‹ redis çš„æ—¥å¿—ï¼Œç›´æ¥è®¿é—® pod çš„æ—¥å¿—æ˜¯ä¸å¯ä»¥çš„ï¼Œå¿…é¡»åŠ ä¸Š -c æŒ‡å®š redis å®¹å™¨ kubectl logs kucc -c redis -f, --follow=false: Specify if the logs should be streamed. ç±»ä¼¼ tail -f kubectl logs -f kucc -c redis -l, --selector='': Selector (label query) to filter on. è¿™ä¸ªå’Œ kubectl get çš„-l æ˜¯ä¸€æ ·çš„ï¼Œæ˜¯é€‰æ‹©ä¸€ç±» pod çš„è¾“å‡ºï¼Œä¸€èˆ¬éƒ½æ˜¯åŒç±»çš„ pod æ•°é‡éå¸¸å¤šï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨è¿™ä¸ªé€‰é¡¹æ¥è¿½è¸ªé”™è¯¯æ—¥å¿—ã€‚ kubectl logs -f -l name=node-exporter -n kube-monitor --since=0s: Only return logs newer than a relative duration like 5s, 2m, or 3h. Defaults to all logs. Only one of since-time / since may be used. è¿™ä¸ªå¯ä»¥çœ‹ä¸€ä¸‹æœ€è¿‘æ—¶é—´çš„æ—¥å¿—ï¼Œæ¯”å¦‚æˆ‘ä»¬çœ‹ 10 ç§’ä¹‹å†…çš„æ—¥å¿—ã€‚ kubectl logs -f -l name=node-exporter -n kube-monitor --since=10s --since-time='': Only return logs after a specific date (RFC3339). Defaults to all logs. Only one of since-time since may be used. æŒ‡å®šæ—¶é—´ï¼Œä½†æ˜¯æ ¼å¼æ˜¯ â€˜2020-02-25T14:33:33Zâ€™ï¼Œæ¯”å¦‚ kubectl logs -f -l name=node-exporter -n kube-monitor --since-time='2020-02-25T14:33:33Z' ","date":"2020-07-10","objectID":"/cka2.kubectl-logs/:2:0","tags":["å®¹å™¨(ğŸš¢)"],"title":"CKA(2.kubectl logs)","uri":"/cka2.kubectl-logs/"},{"categories":["CKA"],"content":"ç­”æ¡ˆ kubectl logs foobar | grep error \u003e /logs ","date":"2020-07-10","objectID":"/cka2.kubectl-logs/:3:0","tags":["å®¹å™¨(ğŸš¢)"],"title":"CKA(2.kubectl logs)","uri":"/cka2.kubectl-logs/"},{"categories":["CKA"],"content":"é¢˜ç›® ä½¿ç”¨ name æ’åºåˆ—å‡ºæ‰€æœ‰çš„ PVï¼ŒæŠŠè¾“å‡ºå†…å®¹å­˜å‚¨åˆ°/opt/æ–‡ä»¶ä¸­ ä½¿ç”¨ kubectl own å¯¹è¾“å‡ºè¿›è¡Œæ’åºï¼Œå¹¶ä¸”ä¸å†è¿›ä¸€æ­¥æ“ä½œå®ƒ ","date":"2020-07-09","objectID":"/cka1.kubectl-get/:1:0","tags":["å®¹å™¨(ğŸš¢)"],"title":"CKA(1.kubectl get)","uri":"/cka1.kubectl-get/"},{"categories":["CKA"],"content":"è§£é¢˜ kubectl æ˜¯ç”¨æ¥ç®¡ç† k8s çš„å‘½ä»¤è¡Œå·¥å…·ä¹‹ä¸€ï¼Œä»–ä¸»è¦æ˜¯è°ƒç”¨ KUBECONFIG æ–‡ä»¶ï¼Œå¹¶ä¸”åŠ è½½å…¶ä¸­çš„ä¿¡æ¯ï¼Œå‘ kube-apiserver å‘èµ·è¯·æ±‚ã€‚ ä¸€èˆ¬æ ¼å¼ kubectl [command] [type] [name] [tags] kubectl controls the Kubernetes cluster manager. Find more information at: https://kubernetes.io/docs/reference/kubectl/overview/ Basic Commands (Beginner): create Create a resource from a file or from stdin. expose Take a replication controller, service, deployment or pod and expose it as a new Kubernetes Service run Run a particular image on the cluster set Set specific features on objects Basic Commands (Intermediate): explain Documentation of resources get Display one or many resources edit Edit a resource on the server delete Delete resources by filenames, stdin, resources and names, or by resources and label selector Deploy Commands: rollout Manage the rollout of a resource scale Set a new size for a Deployment, ReplicaSet or Replication Controller autoscale Auto-scale a Deployment, ReplicaSet, or ReplicationController Cluster Management Commands: certificate Modify certificate resources. cluster-info Display cluster info top Display Resource (CPU/Memory/Storage) usage. cordon Mark node as unschedulable uncordon Mark node as schedulable drain Drain node in preparation for maintenance taint Update the taints on one or more nodes Troubleshooting and Debugging Commands: describe Show details of a specific resource or group of resources logs Print the logs for a container in a pod attach Attach to a running container exec Execute a command in a container port-forward Forward one or more local ports to a pod proxy Run a proxy to the Kubernetes API server cp Copy files and directories to and from containers. auth Inspect authorization Advanced Commands: diff Diff live version against would-be applied version apply Apply a configuration to a resource by filename or stdin patch Update field(s) of a resource using strategic merge patch [type]æ˜¯æŒ‡èµ„æºçš„ç±»å‹ï¼Œæ¯”å¦‚ podï¼Œserviceï¼Œdeployment kubectl get pods kubectl get deploy éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸åŠ [name]é€‰é¡¹ï¼Œå°±æ˜¯ get æ‰€æœ‰çš„ï¼Œè€Œ pods å’Œ pod ç›®å‰çš„æ„æ€æ˜¯ä¸€æ ·çš„ã€‚ ä¸€ä¸ªä½¿ç”¨ kubeamd æ–°åˆ›å»ºçš„é›†ç¾¤ï¼Œåˆšåˆšåˆ›å»ºå®Œæˆçš„æ—¶å€™ï¼Œä¼šæœ‰ä¸¤ä¸ª namespacesï¼Œä¸€ä¸ªæ˜¯ kube-systemï¼Œç”¨æ¥å­˜æ”¾ kube-apiserver ç­‰ç³»ç»Ÿç”¨åˆ°çš„ podï¼Œä¸€ä¸ªæ˜¯ defaultï¼Œä½œä¸ºé»˜è®¤åç§°ç©ºé—´ï¼Œå¦‚æœåˆ›å»ºèµ„æºçš„æ—¶å€™ä¸æŒ‡å®šåç§°ç©ºé—´ï¼Œéƒ½ä¼šåœ¨è¿™ä¸ªç©ºé—´é‡Œé¢å­˜æ”¾ã€‚ root@shein-mointor-lab-01:~# kubectl get pod NAME READY STATUS RESTARTS AGE nginx 1/1 Running 0 2d1h root@shein-mointor-lab-01:~# kubectl get pod -n kube-system NAME READY STATUS RESTARTS AGE calico-kube-controllers-76d4774d89-6tg9v 1/1 Running 2 38d calico-node-65tsz 1/1 Running 1 38d calico-node-gzh5l 1/1 Running 2 38d coredns-7ff77c879f-ql8dh 1/1 Running 2 38d coredns-7ff77c879f-zp8ms 1/1 Running 2 38d eip-nfs-kube-monitor-5f98475889-5tv7v 1/1 Running 2 3d12h eip-nfs-kube-ops-554dbf6855-wwll7 1/1 Running 0 2d11h etcd-shein-mointor-lab-01 1/1 Running 3 38d kube-apiserver-shein-mointor-lab-01 1/1 Running 2 38d kube-controller-manager-shein-mointor-lab-01 1/1 Running 2 38d kube-proxy-mpbdh 1/1 Running 2 38d kube-proxy-swj5c 1/1 Running 1 38d kube-scheduler-shein-mointor-lab-01 1/1 Running 3 38d kuboard-5454b89cb9-bz4s7 1/1 Running 0 25d metrics-server-7f96bbcc66-zr276 1/1 Running 2 3d12h root@shein-mointor-lab-01:~# [flags]é€‰é¡¹ä¹Ÿæ˜¯ç³ç…æ»¡ç›®ï¼Œå¯ä»¥ä½¿ç”¨ kubectl get -h æ¥åˆ—å‡ºæ‰€æœ‰çš„é€‰é¡¹ï¼Œæˆ‘ä»¬æ¥å¯¹å¸¸ç”¨çš„è¿›è¡Œè¯´æ˜ã€‚ root@shein-mointor-lab-01:~# kubectl get -h Display one or many resources Prints a table of the most important information about the specified resources. You can filter the list using a label selector and the --selector flag. If the desired resource type is namespaced you will only see results in your current namespace unless you pass --all-namespaces. Uninitialized objects are not shown unless --include-uninitialized is passed. By specifying the output as 'template' and providing a Go template as the value of the --template flag, you can filter the attributes of the fetched resources. Use \"kubectl api-resources\" for a complete list of supported resources. Examples: # List all pods in ps output format. kubectl get pods # List all pods in ps output format with more information (such as node name). kubectl get pods -o wide # List a sing","date":"2020-07-09","objectID":"/cka1.kubectl-get/:2:0","tags":["å®¹å™¨(ğŸš¢)"],"title":"CKA(1.kubectl get)","uri":"/cka1.kubectl-get/"},{"categories":["CKA"],"content":"ç­”æ¡ˆ root@shein-mointor-lab-01:~# kubectl get pv --sort-by=.metadata.name NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE nfs-pv-kube-monitor 100Gi RWX Retain Bound kube-system/nfs-pvc-kube-monitor nfs-storageclass-provisioner 6d10h nfs-pv-kube-ops 100Gi RWX Retain Bound kube-system/nfs-pvc-kube-ops nfs-storageclass-provisioner 2d12h pvc-40cb9bc4-c533-4851-885e-7bc501474254 20Gi RWX Retain Bound kube-ops/opspvc kube-ops 2d12h pvc-d77b1164-2edd-4025-b691-8907db70cdaf 20Gi RWX Delete Bound kube-monitor/monitor kube-monitor 6d10h ","date":"2020-07-09","objectID":"/cka1.kubectl-get/:3:0","tags":["å®¹å™¨(ğŸš¢)"],"title":"CKA(1.kubectl get)","uri":"/cka1.kubectl-get/"},{"categories":["blog"],"content":"èƒŒæ™¯ åœ¨å°†hexoè¿ç§»åˆ°hugoåæˆ‘å°±å¼€å§‹æŠ˜è…¾åšå®¢æœç´¢äº†ï¼Œä¸‹é¢çš„é…ç½®æ­£å¯¹loveitä¸»é¢˜é…ç½® ","date":"2020-06-06","objectID":"/hugo%E4%BD%BF%E7%94%A8algolia%E6%90%9C%E7%B4%A2/:1:0","tags":["hugo","hexo"],"title":"Hugoä½¿ç”¨algoliaæœç´¢","uri":"/hugo%E4%BD%BF%E7%94%A8algolia%E6%90%9C%E7%B4%A2/"},{"categories":["blog"],"content":"å¼€å¯algoliaæœç´¢ åœ¨config.tomlä¸­æ·»åŠ ä¸‹é¢å­—æ®µï¼Œxxxxxæ˜¯å¿…å¡«ï¼Œä½ å¯ä»¥å‚è€ƒloveitä¸»é¢˜ä¸­çš„config.toml # æœç´¢é…ç½® [languages.zh-cn.params.search] enable = true # æœç´¢å¼•æ“çš„ç±»å‹ (\"lunr\", \"algolia\") type = \"algolia\" # æ–‡ç« å†…å®¹æœ€é•¿ç´¢å¼•é•¿åº¦ contentLength = 4000 # æœç´¢æ¡†çš„å ä½æç¤ºè¯­ placeholder = \"\" # æœ€å¤§ç»“æœæ•°ç›® maxResultLength = 10 # ç»“æœå†…å®¹ç‰‡æ®µé•¿åº¦ snippetLength = 50 # æœç´¢ç»“æœä¸­é«˜äº®éƒ¨åˆ†çš„ HTML æ ‡ç­¾ highlightTag = \"em\" # æ˜¯å¦åœ¨æœç´¢ç´¢å¼•ä¸­ä½¿ç”¨åŸºäº baseURL çš„ç»å¯¹è·¯å¾„ absoluteURL = false [languages.zh-cn.params.search.algolia] # algoliaæ³¨å†Œçš„ç´¢å¼•åç§° index = \"xxxxx\" # åœ¨ä½ æ³¨å†Œå®Œæˆåï¼Œç‚¹å‡»API Keyså°±èƒ½çœ‹è§ä¸‹é¢çš„å‚æ•° appID = \"xxxxx\" searchKey = \"xxxxx\" ","date":"2020-06-06","objectID":"/hugo%E4%BD%BF%E7%94%A8algolia%E6%90%9C%E7%B4%A2/:2:0","tags":["hugo","hexo"],"title":"Hugoä½¿ç”¨algoliaæœç´¢","uri":"/hugo%E4%BD%BF%E7%94%A8algolia%E6%90%9C%E7%B4%A2/"},{"categories":["blog"],"content":"è‡ªåŠ¨æäº¤ç´¢å¼•åˆ°algolia åˆåˆç”¨åˆ°äº†npm,å¥½åœ¨é›†æˆåˆ°travisä¸­çœ¼ä¸è§ä¸ºå‡€ã€‚ åœ¨config.tomlåŒçº§ç›®å½•ä¸‹è¿è¡Œnpm initï¼Œä¸€è·¯å›è½¦å³å¯ã€‚ ä¿®æ”¹npm intç”Ÿæˆçš„package.jsonæ·»åŠ ä¸‹é¢å­—æ®µ \"scripts\": { \"test\": \"echo \\\"Error: no test specified\\\" \u0026\u0026 exit 1\", \"algolia\": \"atomic-algolia\" }, åœ¨config.tomlåŒçº§ç›®å½•æ·»åŠ .envæ–‡ä»¶å¹¶æ·»åŠ ä¸‹é¢å­—æ®µ â¯ cat .env ALGOLIA_APP_ID=U9QMQ70DKL ALGOLIA_INDEX_NAME=gaojila.github.io ALGOLIA_INDEX_FILE=public/index.json ä¿®æ”¹.travis.ymlæ–‡ä»¶å¦‚ä¸‹ language:gogo:- \"1.8\"# æŒ‡å®šGolang 1.8install:# å®‰è£…æœ€æ–°çš„hugo- wget https://github.com/gohugoio/hugo/releases/download/v0.71.1/hugo_0.71.1_Linux-64bit.deb- sudo dpkg -i hugo*.deb# å®‰è£…æœç´¢æ’ä»¶- npm install atomic-algolia --save-devscript:# è¿è¡Œhugoå‘½ä»¤- hugo# ç”Ÿæˆç´¢å¼•å‘½ä»¤- echo \"ALGOLIA_ADMIN_KEY=$ALGOLIA_ADMIN_KEY\" \u003e\u003e .env- npm run algoliaafter_script:# éƒ¨ç½²- cd ./public- git init- git config user.name \"[gaojila]\"- git config user.email \"[redgaojila@gmail.com]\"- git add .- git commit -m \"Update Blog By TravisCI With Build $TRAVIS_BUILD_NUMBER\"# Github Pages- git push --force --quiet \"https://$GITHUB_TOKEN@${GH_REF}\" master:master# Github Pages- git push --quiet \"https://$GITHUB_TOKEN@${GH_REF}\" master:master --tagsenv:global:# Github Pages- GH_REF:\"github.com/gaojila/gaojila.github.io\"deploy:provider:pages# é‡è¦ï¼ŒæŒ‡å®šè¿™æ˜¯ä¸€ä»½github pagesçš„éƒ¨ç½²é…ç½®skip-cleanup:true# é‡è¦ï¼Œä¸èƒ½çœç•¥local-dir:public# é™æ€ç«™ç‚¹æ–‡ä»¶æ‰€åœ¨ç›®å½•# target-branch: master # è¦å°†é™æ€ç«™ç‚¹æ–‡ä»¶å‘å¸ƒåˆ°å“ªä¸ªåˆ†æ”¯github-token:$GITHUB_TOKEN# é‡è¦ï¼Œ$GITHUB_TOKENæ˜¯å˜é‡ï¼Œéœ€è¦åœ¨GitHubä¸Šç”³è¯·ã€å†åˆ°é…ç½®åˆ°Travis# fqdn: # å¦‚æœæ˜¯è‡ªå®šä¹‰åŸŸåï¼Œæ­¤å¤„è¦å¡«keep-history:true# æ˜¯å¦ä¿æŒtarget-branchåˆ†æ”¯çš„æäº¤è®°å½•on:branch:master# åšå®¢æºç çš„åˆ†æ”¯ åœ¨travisä¸­æ·»åŠ å˜é‡$ALGOLIA_ADMIN_KEY ","date":"2020-06-06","objectID":"/hugo%E4%BD%BF%E7%94%A8algolia%E6%90%9C%E7%B4%A2/:3:0","tags":["hugo","hexo"],"title":"Hugoä½¿ç”¨algoliaæœç´¢","uri":"/hugo%E4%BD%BF%E7%94%A8algolia%E6%90%9C%E7%B4%A2/"},{"categories":["blog"],"content":"å‚è€ƒé“¾æ¥ aligoliaçš„å…¶ä»–é…ç½®å¯ä»¥çœ‹ä¸‹é¢çš„é“¾æ¥ dreamsafari.info nashome.cn ","date":"2020-06-06","objectID":"/hugo%E4%BD%BF%E7%94%A8algolia%E6%90%9C%E7%B4%A2/:4:0","tags":["hugo","hexo"],"title":"Hugoä½¿ç”¨algoliaæœç´¢","uri":"/hugo%E4%BD%BF%E7%94%A8algolia%E6%90%9C%E7%B4%A2/"},{"categories":["blog"],"content":"èƒŒæ™¯ ä»hexoè¿ç§»åˆ°hugoåï¼Œå‘å¸ƒåšå®¢å¼€å§‹å˜çš„ç¹çï¼Œæ²¡æœ‰hexo -dè¿™æ ·çš„å¿«æ·éƒ¨ç½²ï¼Œä½†æ˜¯å¥½åœ¨æœ‰travisè¿™æ ·çš„å…è´¹CIå¹³å°ï¼Œåœ¨ä½¿ç”¨travisæ¥éƒ¨ç½²åšå®¢çš„ç¡®å¿«æ·äº†å¾ˆå¤šï¼Œåªéœ€è¦å‘å¸ƒæºç å³å¯ã€‚ ","date":"2020-06-05","objectID":"/hugo%E4%BD%BF%E7%94%A8travis%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/:1:0","tags":["hugo","hexo"],"title":"Hugoä½¿ç”¨travisè‡ªåŠ¨å‘å¸ƒ","uri":"/hugo%E4%BD%BF%E7%94%A8travis%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/"},{"categories":["blog"],"content":"Githubè·å–token è®°ä¸‹ Token çš„å€¼ (ä¸€å®šè¦è®°ä¸‹æ¥ï¼Œå› ä¸ºç¦»å¼€è¿™ä¸ªé¡µé¢ä¹‹åå°±æ²¡æœ‰æœºä¼šå†æ¬¡æŸ¥çœ‹äº†) ","date":"2020-06-05","objectID":"/hugo%E4%BD%BF%E7%94%A8travis%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/:2:0","tags":["hugo","hexo"],"title":"Hugoä½¿ç”¨travisè‡ªåŠ¨å‘å¸ƒ","uri":"/hugo%E4%BD%BF%E7%94%A8travis%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/"},{"categories":["blog"],"content":"è®¾ç½®Travis CI ä½¿ç”¨githubå¸å·æ³¨å†Œä¸€ä¸ªtraviså¸å·ï¼Œç™»å½•åœ¨hugoä»“åº“ä¸Šæ‰“ä¸Šï€Œï¼Œç„¶åå†ç‚¹å‡»settingç„¶åå¡«å†™ Environment Variablesã€‚ Name å¡«å†™ï¼š GITHUB_TOKEN Value å¡«å†™ï¼šåˆšåˆšåœ¨ GitHub ç”³è¯·åˆ°çš„ Token çš„å€¼ ç‚¹å‡»add ","date":"2020-06-05","objectID":"/hugo%E4%BD%BF%E7%94%A8travis%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/:3:0","tags":["hugo","hexo"],"title":"Hugoä½¿ç”¨travisè‡ªåŠ¨å‘å¸ƒ","uri":"/hugo%E4%BD%BF%E7%94%A8travis%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/"},{"categories":["blog"],"content":"ç¼–å†™.trabis.yml language:gogo:- \"1.8\"# æŒ‡å®šGolang 1.8install:# å®‰è£…æœ€æ–°çš„hugo- wget https://github.com/gohugoio/hugo/releases/download/v0.71.1/hugo_0.71.1_Linux-64bit.deb- sudo dpkg -i hugo*.debscript:# è¿è¡Œhugoå‘½ä»¤- hugoafter_script:# éƒ¨ç½²- cd ./public- git init- git config user.name \"[gaojila]\"- git config user.email \"[redgaojila@gmail.com]\"- git add .- git commit -m \"Update Blog By TravisCI With Build $TRAVIS_BUILD_NUMBER\"# Github Pages- git push --force --quiet \"https://$GITHUB_TOKEN@${GH_REF}\" master:master# Github Pages- git push --quiet \"https://$GITHUB_TOKEN@${GH_REF}\" master:master --tagsenv:global:# Github Pages- GH_REF:\"github.com/gaojila/gaojila.github.io\"deploy:provider:pages# é‡è¦ï¼ŒæŒ‡å®šè¿™æ˜¯ä¸€ä»½github pagesçš„éƒ¨ç½²é…ç½®skip-cleanup:true# é‡è¦ï¼Œä¸èƒ½çœç•¥local-dir:public# é™æ€ç«™ç‚¹æ–‡ä»¶æ‰€åœ¨ç›®å½•# target-branch: master # è¦å°†é™æ€ç«™ç‚¹æ–‡ä»¶å‘å¸ƒåˆ°å“ªä¸ªåˆ†æ”¯github-token:$GITHUB_TOKEN# é‡è¦ï¼Œ$GITHUB_TOKENæ˜¯å˜é‡ï¼Œéœ€è¦åœ¨GitHubä¸Šç”³è¯·ã€å†åˆ°é…ç½®åˆ°Travis# fqdn: # å¦‚æœæ˜¯è‡ªå®šä¹‰åŸŸåï¼Œæ­¤å¤„è¦å¡«keep-history:true# æ˜¯å¦ä¿æŒtarget-branchåˆ†æ”¯çš„æäº¤è®°å½•on:branch:master# åšå®¢æºç çš„åˆ†æ”¯ å°†ä¸Šé¢çš„é…ç½®æ–‡ä»¶æŒ‰ç…§ä½ çš„å®é™…æƒ…å†µæ›´æ”¹ã€‚ ç„¶åå°†ä»£ç æäº¤åˆ° hugo ä»“åº“ é‡Œã€‚ç­‰ä¸ªä¸€ä¸¤åˆ†é’Ÿï¼Œå°±å¯ä»¥åœ¨ Travis CI ä¸ŠæŸ¥çœ‹éƒ¨ç½²æƒ…å†µäº† ç»¿è‰² ä»£è¡¨éƒ¨ç½²æˆåŠŸâ€ƒé»„è‰²ä»£è¡¨æ­£åœ¨éƒ¨ç½²â€ƒçº¢è‰² ä»£è¡¨éƒ¨ç½²å¤±è´¥â€ƒç°è‰² ä»£è¡¨éƒ¨ç½²è¢«å–æ¶ˆ ","date":"2020-06-05","objectID":"/hugo%E4%BD%BF%E7%94%A8travis%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/:4:0","tags":["hugo","hexo"],"title":"Hugoä½¿ç”¨travisè‡ªåŠ¨å‘å¸ƒ","uri":"/hugo%E4%BD%BF%E7%94%A8travis%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/"},{"categories":["blog"],"content":"ç›¸å…³æ–‡ç«  ä½¿ç”¨ Travis CI è‡ªåŠ¨éƒ¨ç½² Hugo åšå®¢ ","date":"2020-06-05","objectID":"/hugo%E4%BD%BF%E7%94%A8travis%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/:5:0","tags":["hugo","hexo"],"title":"Hugoä½¿ç”¨travisè‡ªåŠ¨å‘å¸ƒ","uri":"/hugo%E4%BD%BF%E7%94%A8travis%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/"},{"categories":["blog"],"content":"è¿ç§»æ—¥å¿— ","date":"2020-06-05","objectID":"/%E5%B0%86hexo%E8%BF%81%E7%A7%BB%E5%88%B0hugo/:0:0","tags":["hugo","hexo"],"title":"Hexoè¿ç§»æ—¥å¿—","uri":"/%E5%B0%86hexo%E8%BF%81%E7%A7%BB%E5%88%B0hugo/"},{"categories":["blog"],"content":"èƒŒæ™¯ åœ¨æŸä¸ªæ¸…æ™¨ï¼Œå¿ƒè¡€æ¥æ½®æƒ³å†™ä¸ªæ–‡æ¡£ï¼Œåœ¨æˆ‘ä½¿ç”¨hexoç”Ÿæˆæ–‡æ¡£æ—¶å‘ç°æˆ‘çš„ hexo å·²ç»åäº†ï¼Œç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯ archlinuxï¼Œæˆ‘æ¯å¤©éƒ½æœ‰å‡çº§çš„ä¹ æƒ¯ï¼Œå¥¶å¥¶çš„ hexo æ¯æ¬¡éƒ½è¦ä¸ºåŒ…æ“å¿ƒã€‚ ","date":"2020-06-05","objectID":"/%E5%B0%86hexo%E8%BF%81%E7%A7%BB%E5%88%B0hugo/:1:0","tags":["hugo","hexo"],"title":"Hexoè¿ç§»æ—¥å¿—","uri":"/%E5%B0%86hexo%E8%BF%81%E7%A7%BB%E5%88%B0hugo/"},{"categories":["blog"],"content":"æ–¹æ³• æ–¹æ³•è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œåªéœ€è¦æ›´æ”¹hexoçš„æ—¥æœŸæ ¼å¼å’Œtomlæ ¼å¼çš„æ ‡ç­¾å’Œåˆ†ç±»å°±è¡Œï¼Œå…·ä½“ç½‘ä¸Šçš„æ•™ç¨‹å·²ç»å¾ˆå¤šäº†å°±ä¸èµ˜è¿°äº†ã€‚ ","date":"2020-06-05","objectID":"/%E5%B0%86hexo%E8%BF%81%E7%A7%BB%E5%88%B0hugo/:2:0","tags":["hugo","hexo"],"title":"Hexoè¿ç§»æ—¥å¿—","uri":"/%E5%B0%86hexo%E8%BF%81%E7%A7%BB%E5%88%B0hugo/"},{"categories":["blog"],"content":"å¯¹æ¯” ","date":"2020-06-05","objectID":"/%E5%B0%86hexo%E8%BF%81%E7%A7%BB%E5%88%B0hugo/:3:0","tags":["hugo","hexo"],"title":"Hexoè¿ç§»æ—¥å¿—","uri":"/%E5%B0%86hexo%E8%BF%81%E7%A7%BB%E5%88%B0hugo/"},{"categories":["blog"],"content":"ä¼˜ç‚¹ ç”±äºhugoæ˜¯goè¯­è¨€ç¼–å†™ï¼Œå¯¹æ¯”hexoæå‡äº†å‡ åå€çš„ç¼–è¯‘é€Ÿåº¦ã€‚ å†ä¹Ÿä¸éœ€è¦ç»´æŠ¤é‚£ä¹ˆçš„ npm åŒ…äº†ï¼Œè¿ç§»å˜çš„æ›´ç®€å•ã€‚ ","date":"2020-06-05","objectID":"/%E5%B0%86hexo%E8%BF%81%E7%A7%BB%E5%88%B0hugo/:3:1","tags":["hugo","hexo"],"title":"Hexoè¿ç§»æ—¥å¿—","uri":"/%E5%B0%86hexo%E8%BF%81%E7%A7%BB%E5%88%B0hugo/"},{"categories":["blog"],"content":"ç¼ºç‚¹ å¯¹æ¯”hexoä¸»é¢˜å®åœ¨æ˜¯å¤ªä¸‘äº†ï¼Œæˆ‘å†ä¹Ÿæ²¡æœ‰èŠ±é‡Œèƒ¡å“¨çš„åšå®¢äº†ã€‚ æˆ‘æš‚æ—¶ä¹Ÿæ²¡æœ‰æ‰¾åˆ° hugo åµŒå…¥çœ‹æ¿å¨˜çš„æ–¹æ³•ï¼Œæˆ‘ä¸æƒ³å»ç»´æŠ¤ npm åŒ…äº†ã€‚ ","date":"2020-06-05","objectID":"/%E5%B0%86hexo%E8%BF%81%E7%A7%BB%E5%88%B0hugo/:3:2","tags":["hugo","hexo"],"title":"Hexoè¿ç§»æ—¥å¿—","uri":"/%E5%B0%86hexo%E8%BF%81%E7%A7%BB%E5%88%B0hugo/"},{"categories":["linux(ğŸ§)"],"content":"Centos7 å‡çº§æœ€æ–°å†…æ ¸ ","date":"2020-06-02","objectID":"/centos7%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/:0:0","tags":["å†…æ ¸å‡çº§"],"title":"Centos7å‡çº§å†…æ ¸è‡³æœ€æ–°","uri":"/centos7%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/"},{"categories":["linux(ğŸ§)"],"content":"åº”ç”¨èƒŒæ™¯ æœ€è¿‘åœ¨æ¥è§¦ k8sï¼Œå…¶å¯¹å†…æ ¸ç‰ˆæœ¬è¦æ±‚è¾ƒé«˜ï¼Œcentos7.x é»˜è®¤å†…æ ¸ç‰ˆæœ¬ä¸º 3.10.0-xxxï¼Œåªèƒ½æ»¡è¶³å…¶æœ€ä½è¦æ±‚ï¼Œæ•…å€Ÿæ­¤æœºä¼šè®°å½•ä¸€ä¸‹å‡çº§å†…æ ¸çš„æ“ä½œæ­¥éª¤ã€‚ ","date":"2020-06-02","objectID":"/centos7%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/:1:0","tags":["å†…æ ¸å‡çº§"],"title":"Centos7å‡çº§å†…æ ¸è‡³æœ€æ–°","uri":"/centos7%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/"},{"categories":["linux(ğŸ§)"],"content":"æ“ä½œæ­¥éª¤ ","date":"2020-06-02","objectID":"/centos7%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/:2:0","tags":["å†…æ ¸å‡çº§"],"title":"Centos7å‡çº§å†…æ ¸è‡³æœ€æ–°","uri":"/centos7%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/"},{"categories":["linux(ğŸ§)"],"content":"å°ç‰ˆæœ¬å‡çº§ æŸ¥çœ‹å½“å‰å¯å‡çº§ç‰ˆæœ¬ [root@server-1 ~]# yum list kernel Installed Packages kernel.x86_64 3.10.0-957.el7 @anaconda Available Packages kernel.x86_64 3.10.0-957.5.1.el7 updates å‡çº§ [root@server-1 ~]# yum update kernel -y é‡å¯å¹¶æ£€æŸ¥ [root@server-1 ~]# reboot [root@server-1 ~]# uname -r ","date":"2020-06-02","objectID":"/centos7%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/:2:1","tags":["å†…æ ¸å‡çº§"],"title":"Centos7å‡çº§å†…æ ¸è‡³æœ€æ–°","uri":"/centos7%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/"},{"categories":["linux(ğŸ§)"],"content":"å¤§ç‰ˆæœ¬å‡çº§ è½½å…¥å…¬é’¥ [root@server-1 ~]# rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org å‡çº§å®‰è£… ELRepo [root@server-1 ~]# rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-3.el7.elrepo.noarch.rpm è½½å…¥ elrepo-kernel å…ƒæ•°æ® [root@server-1 ~]# yum --disablerepo=\\* --enablerepo=elrepo-kernel repolist æŸ¥çœ‹å¯ç”¨çš„ rpm åŒ… [root@server-1 ~]# yum --disablerepo=\\* --enablerepo=elrepo-kernel list kernel* Installed Packages kernel.x86_64 3.10.0-957.el7 @anaconda kernel.x86_64 3.10.0-957.5.1.el7 @updates kernel-tools.x86_64 3.10.0-957.el7 @anaconda kernel-tools-libs.x86_64 3.10.0-957.el7 @anaconda Available Packages kernel-lt.x86_64 4.4.176-1.el7.elrepo elrepo-kernel kernel-lt-devel.x86_64 4.4.176-1.el7.elrepo elrepo-kernel kernel-lt-doc.noarch 4.4.176-1.el7.elrepo elrepo-kernel kernel-lt-headers.x86_64 4.4.176-1.el7.elrepo elrepo-kernel kernel-lt-tools.x86_64 4.4.176-1.el7.elrepo elrepo-kernel kernel-lt-tools-libs.x86_64 4.4.176-1.el7.elrepo elrepo-kernel kernel-lt-tools-libs-devel.x86_64 4.4.176-1.el7.elrepo elrepo-kernel kernel-ml.x86_64 4.20.12-1.el7.elrepo elrepo-kernelã€€// å®‰è£…ç›®æ ‡ç‰ˆæœ¬ kernel-ml-devel.x86_64 4.20.12-1.el7.elrepo elrepo-kernel kernel-ml-doc.noarch 4.20.12-1.el7.elrepo elrepo-kernel kernel-ml-headers.x86_64 4.20.12-1.el7.elrepo elrepo-kernel kernel-ml-tools.x86_64 4.20.12-1.el7.elrepo elrepo-kernel kernel-ml-tools-libs.x86_64 4.20.12-1.el7.elrepo elrepo-kernel kernel-ml-tools-libs-devel.x86_64 4.20.12-1.el7.elrepo elrepo-kernel è¯´æ˜ï¼š ltÂ ï¼šlong term supportï¼Œé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼› mlï¼šmainlineï¼Œä¸»çº¿ç‰ˆæœ¬ï¼› å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ kernel [root@server-1 ~]# yum --disablerepo=\\* --enablerepo=elrepo-kernel install kernel-ml.x86_64 -y åˆ é™¤æ—§ç‰ˆæœ¬å·¥å…·åŒ… [root@server-1 ~]# yum remove kernel-tools-libs.x86_64 kernel-tools.x86_64 -y å®‰è£…æ–°ç‰ˆæœ¬å·¥å…·åŒ… [root@server-1 ~]# yum --disablerepo=\\* --enablerepo=elrepo-kernel install kernel-ml-tools.x86_64 -y æŸ¥çœ‹å†…æ ¸æ’å…¥é¡ºåº [root@server-1 ~]# awk -F \\' '$1==\"menuentry \" {print i++ \" : \" $2}' /etc/grub2.cfg 0 : CentOS Linux (4.20.12-1.el7.elrepo.x86_64) 7 (Core) 1 : CentOS Linux (3.10.0-957.5.1.el7.x86_64) 7 (Core) 2 : CentOS Linux (3.10.0-957.el7.x86_64) 7 (Core) 3 : CentOS Linux (0-rescue-ca0f6fb3c5f24478abc0a2e275281d7a) 7 (Core) è¯´æ˜ï¼šé»˜è®¤æ–°å†…æ ¸æ˜¯ä»å¤´æ’å…¥ï¼Œé»˜è®¤å¯åŠ¨é¡ºåºä¹Ÿæ˜¯ä» 0 å¼€å§‹ï¼ˆå½“å‰é¡ºåºè¿˜æœªç”Ÿæ•ˆï¼‰ï¼Œæˆ–è€…ä½¿ç”¨ï¼š [root@server-17 ~]# grep \"^menuentry\" /boot/grub2/grub.cfg | cut -d \"'\" -f2 CentOS Linux (4.20.12-1.el7.elrepo.x86_64) 7 (Core) CentOS Linux (3.10.0-957.5.1.el7.x86_64) 7 (Core) CentOS Linux (3.10.0-957.el7.x86_64) 7 (Core) CentOS Linux (0-rescue-ca0f6fb3c5f24478abc0a2e275281d7a) 7 (Core) å…¶ä¸­æ–‡ä»¶ /etc/grub2.cfgÂ å’Œ /boot/grub2/grub.cfgÂ å†…å®¹ä¸€è‡´ã€‚ æŸ¥çœ‹å½“å‰å®é™…å¯åŠ¨é¡ºåº [root@server-1 ~]# grub2-editenv list saved_entry=CentOS Linux (3.10.0-957.5.1.el7.x86_64) 7 (Core) è®¾ç½®é»˜è®¤å¯åŠ¨ [root@server-1 ~]# grub2-set-default 'CentOS Linux (4.20.12-1.el7.elrepo.x86_64) 7 (Core)' [root@server-1 ~]# grub2-editenv list saved_entry=CentOS Linux (4.20.12-1.el7.elrepo.x86_64) 7 (Core) æˆ–è€…ç›´æ¥è®¾ç½®æ•°å€¼ [root@server-1 ~]# grub2-set-default 0ã€€// 0ä»£è¡¨å½“å‰ç¬¬ä¸€è¡Œï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„4.20.12ç‰ˆæœ¬é‚£ä¸€è¡Œå†…å®¹ [root@server-1 ~]# grub2-editenv list saved_entry=0 é‡å¯å¹¶æ£€æŸ¥ [root@server-1 ~]# reboot [root@server-1 ~]# uname -r ","date":"2020-06-02","objectID":"/centos7%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/:2:2","tags":["å†…æ ¸å‡çº§"],"title":"Centos7å‡çº§å†…æ ¸è‡³æœ€æ–°","uri":"/centos7%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"Service çš„ç±»å‹ ClusterIPï¼š é»˜è®¤ç±»å‹ï¼Œè‡ªåŠ¨åˆ†é…ä¸€ä¸ªä»… Cluster å†…éƒ¨å¯ä»¥è®¿é—®çš„è™šæ‹Ÿ IPã€‚ NodePortï¼š åœ¨ ClusterIP çš„åŸºç¡€ä¸Šä¸º service åœ¨æ¯å°æœºå™¨æ’’è°é‚£ä¸ªç»‘å®šä¸€ä¸ªç«¯å£ï¼Œè¿™æ ·å°±å¯é€šè¿‡ NodePort æ¥è®¿é—®æœåŠ¡ã€‚ LoadBalancerï¼š åœ¨ NodePort çš„åŸºç¡€ä¸Šï¼Œå€ŸåŠ© cloud provider åˆ›å»ºä¸€ä¸ªå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘åˆ° NodePortã€‚ ExternalNameï¼š æŠŠé›†ç¾¤å¤–éƒ¨çš„æœåŠ¡å¼•å…¥åˆ°é›†ç¾¤å†…éƒ¨æ¥ï¼Œåœ¨é›†ç¾¤å†…éƒ¨ç›´æ¥ä½¿ç”¨ï¼Œæ²¡æœ‰ä»»ä½•ç±»å‹ä»£ç†è¢«åˆ›å»ºã€‚ ","date":"2020-04-23","objectID":"/k8s%E6%9C%8D%E5%8A%A1/:1:0","tags":["service(ClusterIP,NodePort,LoadBalancer,ExternalName)"],"title":"k8s-service","uri":"/k8s%E6%9C%8D%E5%8A%A1/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"Job Job è´Ÿè´£æ‰¹å¤„ç†ä»»åŠ¡ï¼Œå³ä»…æ‰§è¡Œä¸€æ¬¡çš„ä»»åŠ¡ï¼Œå®ƒä¿è¯æ‰¹å¤„ç†ä»»åŠ¡çš„ä¸€ä¸ªæˆ–å¤šä¸ª Pod æˆåŠŸç»“æŸ ç‰¹æ®Šè¯´æ˜ï¼š spec.template æ ¼å¼åŒ Pod RestartPolicy ä»…æ”¯æŒ Never æˆ– OnFailure å•ä¸ª Pod æ—¶ï¼Œé»˜è®¤ Pod æˆåŠŸè¿è¡Œå Job å³ç»“æŸ .spec.completionsï¼šæ ‡å¿— Job ç»“æŸéœ€è¦æˆåŠŸè¿è¡Œçš„ Pod ä¸ªæ•°ï¼Œé»˜è®¤ä¸º 1 .spec.parallelismï¼šæ ‡å¿—å¹¶è¿è¡Œçš„ Pod çš„ä¸ªæ•°ï¼Œé»˜è®¤ä¸º 1 .spec.activeDeadlineSecondï¼šæ ‡å¿—å¤±è´¥ Pod çš„é‡è¯•æœ€å¤§æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ä¸ä¼šç»§ç»­é‡è¯• For Expamle kind:Jobmetadata:name:pispec:template:metadata:name:pispec:containers:- name:piimage:perlcommand:[\"perl\",\"-Mbignum=bpi\",\"-wle\",\"print bpi(2000)\"]restartPolicy:Never ","date":"2020-04-21","objectID":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8jobcronjob/:1:0","tags":["èµ„æºæ§åˆ¶å™¨(Job,CronJob)"],"title":"k8sèµ„æºæ§åˆ¶å™¨JobCronJob","uri":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8jobcronjob/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"CronJob CronJob ç®¡ç†åŸºäºæ—¶é—´çš„ Jobï¼Œå³ï¼š åœ¨ç»™å®šæ—¶é—´ç‚¹åªè¿è¡Œä¸€æ¬¡ å‘¨æœŸæ€§åœ°åœ¨ä¸ªä½“å®šæ—¶é—´ç‚¹è¿è¡Œ å…¸å‹ç”¨æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š åœ¨ç»™å®šçš„æ—¶é—´ç‚¹è°ƒåº¦ Job è¿è¡Œ åˆ›å»ºå‘¨æœŸæ€§è¿è¡Œçš„ Jobï¼Œä¾‹å¦‚ï¼šæ•°æ®åº“çš„å¤‡ä»½ã€å‘é€é‚®ä»¶ ç‰¹æ®Šè¯´æ˜ï¼š .spec.scheduleï¼šè°ƒåº¦ï¼Œå¿…é¡»å­—æ®µï¼ŒæŒ‡å®šä»»åŠ¡è¿è¡Œå‘¨æœŸï¼Œæ ¼å¼åŒ linux Cronã€‚ .spec.jobTemplateï¼šJob æ¨¡æ¿ï¼Œå¿…é¡»å­—æ®µï¼ŒæŒ‡å®šéœ€è¦è¿è¡Œçš„ä»»åŠ¡ï¼Œæ ¼å¼åŒ Jobã€‚ .spec.startingDeadlineSecondsï¼šå¯åŠ¨ Job çš„æœŸé™ï¼ˆç§’çº§åˆ«ï¼‰ï¼Œè¯¥å­—æ®µæ˜¯å¯é€‰çš„ï¼Œå¦‚æœå› ä¸ºä»»ä½•åŸå› è€Œé”™è¿‡å¢è¢«è°ƒåº¦çš„æ—¶é—´ï¼Œé‚£ä¹ˆé”™è¿‡æ‰§è¡Œæ—¶é—´çš„ Job å°†è¢«è®¤ä¸ºæ˜¯å¤±è´¥çš„ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™æ²¡æœ‰æœŸé™ã€‚ .spec.concurrencyPolicyï¼šå¹¶å‘ç­–ç•¥ï¼Œè¯¥å­—æ®µä¹Ÿæ˜¯å¯é€‰çš„ï¼Œå®ƒæŒ‡å®šå¢å¦‚ä½•å¤„ç†è¢« CronJob åˆ›å»ºçš„ Job çš„å¹¶å‘æ‰§è¡Œï¼Œåªå…è®¸ä¸‹é¢ç­–ç•¥ä¸­çš„ä¸€ç§ã€‚ Allowï¼ˆé»˜è®¤ï¼‰ï¼šå…è®¸å¹¶å‘è¿è¡Œ Jobã€‚ Forbidï¼šç¦æ­¢å¹¶å‘è¿è¡Œï¼Œå¦‚æœå‰ä¸€ä¸ªè¿˜æ²¡æœ‰å®Œæˆï¼Œåˆ™ç›´æ¥è·³è¿‡ä¸‹ä¸€ä¸ªã€‚ Replaceï¼šå–æ¶ˆå½“å‰æ­£åœ¨è¿è¡Œçš„ Jobï¼Œç”¨ä¸€ä¸ªæ–°çš„æ¥æ›¿æ¢ã€‚ æ³¨æ„ï¼šå½“å‰ç­–ç•¥åªèƒ½åº”ç”¨äºåŒä¸€ä¸ª CronJob åˆ›å»ºçš„ Jobï¼Œå¦‚ä½•å­˜åœ¨å¤šä¸ª CronJobï¼Œä»–ä»¬åˆ›å»ºçš„ Job ä¹‹é—´æ€»æ˜¯å¹¶å‘è¿è¡Œçš„ã€‚ .spec.suspendï¼šæŒ‚èµ·ï¼Œè¯¥å­—æ®µä¹Ÿæ˜¯å¯é€‰çš„ï¼Œå¦‚æœè®¾ä¸ºtrueï¼Œåç»­æ‰€æœ‰æ‰§è¡Œéƒ½ä¼šè¢«æŒ‚èµ·ï¼Œå®ƒå¯¹å·²ç»å¼€å§‹æ‰§è¡Œçš„ Job ä¸èµ·ä½œç”¨ï¼Œé»˜è®¤å€¼ä¸ºfalseã€‚ .spec.successfulJobHistoryLimitå’Œ.spec.failedJobsHistoryLimitï¼šå†å²é™åˆ¶ï¼Œå¯é€‰å­—æ®µï¼Œå®ƒä»¬æŒ‡å®šäº†å¯ä»¥ä¿ç•™å¤šå°‘å®Œæˆå’Œå¤±è´¥çš„ Jobï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬åˆ†åˆ«è®¾ç½® 3 å’Œ 1ï¼Œè®¾ç½®é™åˆ¶çš„å€¼ä¸º 0ï¼Œç›¸å…³ç±»å‹çš„ Job å®Œæˆåå°†ä¸ä¼šè¢«ä¿ç•™ã€‚ For Expamle apiVersion:batch/v1beta1kind:CronJobmetadata:name:hellospec:schedule:\"*/1 * * * *\"jobTemplate:spec:template:spec:containers:- name:helloimage:busyboxargs:- /bin/sh- -c- date; echo Hello from the Kubernetes clusterrestartPolicy:OnFailure ","date":"2020-04-21","objectID":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8jobcronjob/:2:0","tags":["èµ„æºæ§åˆ¶å™¨(Job,CronJob)"],"title":"k8sèµ„æºæ§åˆ¶å™¨JobCronJob","uri":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8jobcronjob/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"ä»€ä¹ˆæ˜¯ DaemonSet DaemonSet ç¡®ä¿å…¨éƒ¨ï¼ˆæˆ–è€…ä¸€äº›ï¼‰Node ä¸Šè¿è¡Œä¸€ä¸ª Pod çš„å‰¯æœ¬ï¼Œå½“æœ‰ Node åŠ å…¥é›†ç¾¤æ—¶ï¼Œä¹Ÿä¼šä¸ºä»–ä»¬æ–°å¢ä¸€ä¸ª Podï¼Œå½“æœ‰ Node ä»é›†ç¾¤ç§»é™¤æ—¶ï¼Œè¿™äº› Pod ä¹Ÿä¼šè¢«å›æ”¶ï¼Œåˆ é™¤ DaemonSet å°†ä¼šåˆ é™¤å®ƒæ‰€åˆ›å»ºçš„æ‰€æœ‰ Podã€‚ ä½¿ç”¨ DaemonSet çš„ä¸€äº›å…¸å‹ç”¨æ³•ï¼š è¿è¡Œé›†ç¾¤å­˜å‚¨ daemon,ä¾‹å¦‚åœ¨æ¯ä¸ª Node ä¸Šè¿è¡Œglusterdã€cephã€‚ åœ¨æ¯ä¸ª Node ä¸Šè¿è¡Œæ—¥å¿—æ”¶é›† daemonï¼Œä¾‹å¦‚fluentdã€logstashã€‚ åœ¨æ¯ä¸ª Node ä¸Šè¿è¡Œç›‘æ§ daemonï¼Œä¾‹å¦‚Prometheus Node Exporterã€colletcdã€Datadogã€New Relicã€Gangliaã€gmondã€‚ For Expamle apiVersion:apps/v1kind:DaemonSetmetadata:name:daemonset-examplelabels:app:daemonsetspec:selector:matchLabels:name:daemonset-exampletemplate:metadata:labels:name:daemonset-examplespec:containers:- name:daemonset-exampleimage:wangyanglinux/myapp:v1 ","date":"2020-04-21","objectID":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8daemonset/:1:0","tags":["-èµ„æºæ§åˆ¶å™¨(DaemonSet)"],"title":"k8sèµ„æºæ§åˆ¶å™¨DaemonSet","uri":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8daemonset/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"é…ç½® readiness å’Œ liveness æ¢é’ˆ (å‚è€ƒ Jimmy Song å¤§ä½¬çš„æ–‡ç« å­¦ä¹ ) Kubelet ä½¿ç”¨ liveness probeï¼ˆå­˜æ´»æ¢é’ˆï¼‰æ¥ç¡®å®šä½•æ—¶é‡å¯å®¹å™¨ã€‚ä¾‹å¦‚ï¼Œå½“åº”ç”¨ç¨‹åºå¤„äºè¿è¡ŒçŠ¶æ€ä½†æ— æ³•åšè¿›ä¸€æ­¥æ“ä½œï¼Œliveness æ¢é’ˆå°†æ•è·åˆ° deadlockï¼Œé‡å¯å¤„äºè¯¥çŠ¶æ€ä¸‹çš„å®¹å™¨ï¼Œä½¿åº”ç”¨ç¨‹åºåœ¨å­˜åœ¨ bug çš„æƒ…å†µä¸‹ä¾ç„¶èƒ½å¤Ÿç»§ç»­è¿è¡Œä¸‹å»ï¼ˆè°çš„ç¨‹åºè¿˜æ²¡å‡ ä¸ª bug å‘¢ï¼‰ã€‚ Kubelet ä½¿ç”¨ readiness probeï¼ˆå°±ç»ªæ¢é’ˆï¼‰æ¥ç¡®å®šå®¹å™¨æ˜¯å¦å·²ç»å°±ç»ªå¯ä»¥æ¥å—æµé‡ã€‚åªæœ‰å½“ Pod ä¸­çš„å®¹å™¨éƒ½å¤„äºå°±ç»ªçŠ¶æ€æ—¶ kubelet æ‰ä¼šè®¤å®šè¯¥ Pod å¤„äºå°±ç»ªçŠ¶æ€ã€‚è¯¥ä¿¡å·çš„ä½œç”¨æ˜¯æ§åˆ¶å“ªäº› Pod åº”è¯¥ä½œä¸º service çš„åç«¯ã€‚å¦‚æœ Pod å¤„äºéå°±ç»ªçŠ¶æ€ï¼Œé‚£ä¹ˆå®ƒä»¬å°†ä¼šè¢«ä» service çš„ load balancer ä¸­ç§»é™¤ã€‚ ","date":"2020-04-19","objectID":"/k8s%E6%8E%A2%E9%92%88/:0:0","tags":["æ¢é’ˆ(readiness,liveness)"],"title":"k8sæ¢é’ˆ","uri":"/k8s%E6%8E%A2%E9%92%88/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"liveness æ¢é’ˆ ","date":"2020-04-19","objectID":"/k8s%E6%8E%A2%E9%92%88/:1:0","tags":["æ¢é’ˆ(readiness,liveness)"],"title":"k8sæ¢é’ˆ","uri":"/k8s%E6%8E%A2%E9%92%88/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å®šä¹‰ä¸€ä¸ª liveness exec è®¸å¤šé•¿æ—¶é—´è¿è¡Œçš„åº”ç”¨ç¨‹åºæœ€ç»ˆä¼šè½¬æ¢åˆ° broken çŠ¶æ€ï¼Œé™¤éé‡æ–°å¯åŠ¨ï¼Œå¦åˆ™æ— æ³•æ¢å¤ã€‚Kubernetes æä¾›äº† liveness probe æ¥æ£€æµ‹å’Œè¡¥æ•‘è¿™ç§æƒ…å†µã€‚ åœ¨æœ¬æ¬¡ç»ƒä¹ å°†åŸºäº busybox é•œåƒåˆ›å»ºè¿è¡Œä¸€ä¸ªå®¹å™¨çš„ Podã€‚ä»¥ä¸‹æ˜¯ Pod çš„é…ç½®æ–‡ä»¶ live-exec.yamlï¼š apiVersion:v1kind:Podmetadata:name:liveness-exec-podnamespace:defaultspec:containers:- name:liveness-exec-containerimage:busyboximagePullPolicy:IfNotPresentcommand:[\"sh\",\"-c\",\"touch /tmp/live ; sleep 60 ; rm -rf /tmp/live ; sleep 3600\",]livenessProbe:exec:command:[\"test\",\"-e\",\"/tmp/live:\"]initialDelaySeconds:1periodSeconds:3 è¯¥é…ç½®æ–‡ä»¶ç»™ Pod é…ç½®äº†ä¸€ä¸ªå®¹å™¨ã€‚periodSeconds è§„å®š kubelet è¦æ¯éš” 3 ç§’æ‰§è¡Œä¸€æ¬¡ liveness probeã€‚ initialDelaySeconds å‘Šè¯‰ kubelet åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œ probe ä¹‹å‰è¦çš„ç­‰å¾… 1 ç§’é’Ÿã€‚æ¢é’ˆæ£€æµ‹å‘½ä»¤æ˜¯åœ¨å®¹å™¨ä¸­æ‰§è¡Œ cat /tmp/live å‘½ä»¤ã€‚å¦‚æœå‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œå°†è¿”å› 0ï¼Œkubelet å°±ä¼šè®¤ä¸ºè¯¥å®¹å™¨æ˜¯æ´»ç€çš„å¹¶ä¸”å¾ˆå¥åº·ã€‚å¦‚æœè¿”å›é 0 å€¼ï¼Œkubelet å°±ä¼šæ€æ‰è¿™ä¸ªå®¹å™¨å¹¶é‡å¯å®ƒã€‚ å®¹å™¨å¯åŠ¨æ—¶ï¼Œæ‰§è¡Œè¯¥å‘½ä»¤ï¼š /bin/bash -c \"touch /tmp/live ; sleep 60 ; rm -rf /tmp/live ; sleep 3600\" åœ¨å®¹å™¨ç”Ÿå‘½çš„æœ€åˆ 60 ç§’å†…æœ‰ä¸€ä¸ª /tmp/live æ–‡ä»¶ï¼Œåœ¨è¿™ 60 ç§’å†… cat /tmp/live å‘½ä»¤ä¼šè¿”å›ä¸€ä¸ªæˆåŠŸçš„è¿”å›ç ã€‚60 ç§’åï¼Œ cat /tmp/live å°†è¿”å›å¤±è´¥çš„è¿”å›ç ã€‚ åˆ›å»º podï¼š kubectl create -f live-exec.yml 60 ç§’åï¼ŒæŸ¥çœ‹ Pod å·²ç»æœ‰é‡å¯ï¼š [root@kube-master01 liveness]# kubectl get pod liveness-exec-pod -w NAME READY STATUS RESTARTS AGE liveness-exec-pod 1/1 Running 2 91s ","date":"2020-04-19","objectID":"/k8s%E6%8E%A2%E9%92%88/:1:1","tags":["æ¢é’ˆ(readiness,liveness)"],"title":"k8sæ¢é’ˆ","uri":"/k8s%E6%8E%A2%E9%92%88/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å®šä¹‰ä¸€ä¸ª liveness httpGet æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ HTTP GET è¯·æ±‚ä½œä¸º liveness probeã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºäº gcr.io/google_containers/liveness é•œåƒè¿è¡Œäº†ä¸€ä¸ªå®¹å™¨çš„ Pod çš„ä¾‹å­ http-liveness.yamlï¼š apiVersion:v1kind:Podmetadata:name:liveness-httpget-podnamespace:defaultspec:containers:- name:liveness-httpget-containerimage:wangyanglinux/myapp:v1imagePullPolicy:IfNotPresentports:- name:httpcontainerPort:80livenessProbe:httpGet:port:80path:/index.htmlinitialDelaySeconds:1periodSeconds:3timeoutSeconds:10 ","date":"2020-04-19","objectID":"/k8s%E6%8E%A2%E9%92%88/:1:2","tags":["æ¢é’ˆ(readiness,liveness)"],"title":"k8sæ¢é’ˆ","uri":"/k8s%E6%8E%A2%E9%92%88/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å®šä¹‰ä¸€ä¸ª liveness tcpSocket ç¬¬ä¸‰ç§ liveness probe ä½¿ç”¨ TCP Socketã€‚ ä½¿ç”¨æ­¤é…ç½®ï¼Œkubelet å°†å°è¯•åœ¨æŒ‡å®šç«¯å£ä¸Šæ‰“å¼€å®¹å™¨çš„å¥—æ¥å­—ã€‚ å¦‚æœå¯ä»¥å»ºç«‹è¿æ¥ï¼Œå®¹å™¨è¢«è®¤ä¸ºæ˜¯å¥åº·çš„ï¼Œå¦‚æœä¸èƒ½å°±è®¤ä¸ºæ˜¯å¤±è´¥çš„ã€‚ apiVersion:v1kind:Podmetadata:name:liveness-tcp-podnamespace:defaultspec:containers:- name:liveness-tcp-containerimage:wangyanglinux/myapp:v1imagePullPolicy:IfNotPresentports:- name:httpcontainerPort:80livenessProbe:tcpSocket:port:80initialDelaySeconds:1periodSeconds:3timeoutSeconds:10 ","date":"2020-04-19","objectID":"/k8s%E6%8E%A2%E9%92%88/:1:3","tags":["æ¢é’ˆ(readiness,liveness)"],"title":"k8sæ¢é’ˆ","uri":"/k8s%E6%8E%A2%E9%92%88/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"ä½¿ç”¨å‘½åç«¯å£ å¯ä»¥ä½¿ç”¨å‘½åçš„ ContainerPort ä½œä¸º HTTP æˆ– TCP liveness æ£€æŸ¥ï¼š ports:- name:liveness-portcontainerPort:8080hostPort:8080livenessProbe:httpGet:path:/healthzport:liveness-port ","date":"2020-04-19","objectID":"/k8s%E6%8E%A2%E9%92%88/:1:4","tags":["æ¢é’ˆ(readiness,liveness)"],"title":"k8sæ¢é’ˆ","uri":"/k8s%E6%8E%A2%E9%92%88/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å®šä¹‰ readiness æ¢é’ˆ æœ‰æ—¶ï¼Œåº”ç”¨ç¨‹åºæš‚æ—¶æ— æ³•å¯¹å¤–éƒ¨æµé‡æä¾›æœåŠ¡ã€‚ ä¾‹å¦‚ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½éœ€è¦åœ¨å¯åŠ¨æœŸé—´åŠ è½½å¤§é‡æ•°æ®æˆ–é…ç½®æ–‡ä»¶ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¸æƒ³æ€æ­»åº”ç”¨ç¨‹åºï¼Œä½†ä½ ä¹Ÿä¸æƒ³å‘é€è¯·æ±‚ã€‚ Kubernetes æä¾›äº† readiness probe æ¥æ£€æµ‹å’Œå‡è½»è¿™äº›æƒ…å†µã€‚ Pod ä¸­çš„å®¹å™¨å¯ä»¥æŠ¥å‘Šè‡ªå·±è¿˜æ²¡æœ‰å‡†å¤‡ï¼Œä¸èƒ½å¤„ç† Kubernetes æœåŠ¡å‘é€è¿‡æ¥çš„æµé‡ã€‚ Readiness probe çš„é…ç½®è·Ÿ liveness probe å¾ˆåƒã€‚å”¯ä¸€çš„ä¸åŒæ˜¯ä½¿ç”¨ readinessProbe è€Œä¸æ˜¯ livenessProbeã€‚ apiVersion:v1kind:Podmetadata:name:readiness-httpget-podnamespace:defaultspec:containers:- name:readiness-httpget-containerimage:wangyanglinux/myapp:v1imagePullPolicy:IfNotPresentreadinessProbe:httpGet:port:80path:/index1.htmlinitialDelaySeconds:1periodSeconds:3 Readiness probe çš„ HTTP å’Œ TCP çš„æ¢æµ‹å™¨é…ç½®è·Ÿ liveness probe ä¸€æ ·ã€‚ Readiness å’Œ livenss probe å¯ä»¥å¹¶è¡Œç”¨äºåŒä¸€å®¹å™¨ã€‚ ä½¿ç”¨ä¸¤è€…å¯ä»¥ç¡®ä¿æµé‡æ— æ³•åˆ°è¾¾æœªå‡†å¤‡å¥½çš„å®¹å™¨ï¼Œå¹¶ä¸”å®¹å™¨åœ¨å¤±è´¥æ—¶é‡æ–°å¯åŠ¨ã€‚ ","date":"2020-04-19","objectID":"/k8s%E6%8E%A2%E9%92%88/:2:0","tags":["æ¢é’ˆ(readiness,liveness)"],"title":"k8sæ¢é’ˆ","uri":"/k8s%E6%8E%A2%E9%92%88/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"é…ç½® Probe Probe ä¸­æœ‰å¾ˆå¤šç²¾ç¡®å’Œè¯¦ç»†çš„é…ç½®ï¼Œé€šè¿‡å®ƒä»¬ä½ èƒ½å‡†ç¡®çš„æ§åˆ¶ liveness å’Œ readiness æ£€æŸ¥ï¼š initialDelaySecondsï¼šå®¹å™¨å¯åŠ¨åç¬¬ä¸€æ¬¡æ‰§è¡Œæ¢æµ‹æ˜¯éœ€è¦ç­‰å¾…å¤šå°‘ç§’ã€‚ periodSecondsï¼šæ‰§è¡Œæ¢æµ‹çš„é¢‘ç‡ã€‚é»˜è®¤æ˜¯ 10 ç§’ï¼Œæœ€å° 1 ç§’ã€‚ timeoutSecondsï¼šæ¢æµ‹è¶…æ—¶æ—¶é—´ã€‚é»˜è®¤ 1 ç§’ï¼Œæœ€å° 1 ç§’ã€‚ successThresholdï¼šæ¢æµ‹å¤±è´¥åï¼Œæœ€å°‘è¿ç»­æ¢æµ‹æˆåŠŸå¤šå°‘æ¬¡æ‰è¢«è®¤å®šä¸ºæˆåŠŸã€‚é»˜è®¤æ˜¯ 1ã€‚å¯¹äº liveness å¿…é¡»æ˜¯ 1ã€‚æœ€å°å€¼æ˜¯ 1ã€‚ failureThresholdï¼šæ¢æµ‹æˆåŠŸåï¼Œæœ€å°‘è¿ç»­æ¢æµ‹å¤±è´¥å¤šå°‘æ¬¡æ‰è¢«è®¤å®šä¸ºå¤±è´¥ã€‚é»˜è®¤æ˜¯ 3ã€‚æœ€å°å€¼æ˜¯ 1ã€‚ HTTP probe ä¸­å¯ä»¥ç»™ httpGet è®¾ç½®å…¶ä»–é…ç½®é¡¹ï¼š hostï¼šè¿æ¥çš„ä¸»æœºåï¼Œé»˜è®¤è¿æ¥åˆ° pod çš„ IPã€‚ä½ å¯èƒ½æƒ³åœ¨ http header ä¸­è®¾ç½®\"Host\"è€Œä¸æ˜¯ä½¿ç”¨ IPã€‚ schemeï¼šè¿æ¥ä½¿ç”¨çš„ schemaï¼Œé»˜è®¤ HTTPã€‚ path: è®¿é—®çš„ HTTP server çš„ pathã€‚ httpHeadersï¼šè‡ªå®šä¹‰è¯·æ±‚çš„ headerã€‚HTTP è¿è¡Œé‡å¤çš„ headerã€‚ portï¼šè®¿é—®çš„å®¹å™¨çš„ç«¯å£åå­—æˆ–è€…ç«¯å£å·ã€‚ç«¯å£å·å¿…é¡»ä»‹äº 1 å’Œ 65535 ä¹‹é—´ã€‚ å¯¹äº HTTP æ¢æµ‹å™¨ï¼Œkubelet å‘æŒ‡å®šçš„è·¯å¾„å’Œç«¯å£å‘é€ HTTP è¯·æ±‚ä»¥æ‰§è¡Œæ£€æŸ¥ã€‚ Kubelet å°† probe å‘é€åˆ°å®¹å™¨çš„ IP åœ°å€ï¼Œé™¤éåœ°å€è¢« httpGet ä¸­çš„å¯é€‰ host å­—æ®µè¦†ç›–ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ ä¸æƒ³è®¾ç½®ä¸»æœºå­—æ®µã€‚ æœ‰ä¸€ç§æƒ…å†µä¸‹ä½ å¯ä»¥è®¾ç½®å®ƒã€‚ å‡è®¾å®¹å™¨åœ¨ 127.0.0.1 ä¸Šä¾¦å¬ï¼Œå¹¶ä¸” Pod çš„ hostNetwork å­—æ®µä¸º trueã€‚ ç„¶åï¼Œåœ¨ httpGet ä¸‹çš„ host åº”è¯¥è®¾ç½®ä¸º 127.0.0.1ã€‚ å¦‚æœä½ çš„ pod ä¾èµ–äºè™šæ‹Ÿä¸»æœºï¼Œè¿™å¯èƒ½æ˜¯æ›´å¸¸è§çš„æƒ…å†µï¼Œä½ ä¸åº”è¯¥æ˜¯ç”¨ hostï¼Œè€Œæ˜¯åº”è¯¥åœ¨ httpHeaders ä¸­è®¾ç½® Host å¤´ã€‚ ","date":"2020-04-19","objectID":"/k8s%E6%8E%A2%E9%92%88/:3:0","tags":["æ¢é’ˆ(readiness,liveness)"],"title":"k8sæ¢é’ˆ","uri":"/k8s%E6%8E%A2%E9%92%88/"},{"categories":["linux(ğŸ§)"],"content":"ç¦ç”¨ root å¯†ç ç™»å½• ç¦ç”¨å¯†ç ç™»å½• RSAAuthentication yes PubkeyAuthentication yes AuthorizedKeysFile .ssh/authorized_keys systemctl restart sshd ","date":"2020-03-15","objectID":"/linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E8%AE%BE%E7%BD%AE/:1:0","tags":["safe"],"title":"linuxç³»ç»Ÿå®‰å…¨è®¾ç½®","uri":"/linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E8%AE%BE%E7%BD%AE/"},{"categories":["linux(ğŸ§)"],"content":"é…ç½®ä¼šè¯è‡ªåŠ¨ç™»å‡º ä¿®æ”¹.bashrc æˆ–è€….profile echo \"TMOUT=90\"\u003e\u003e.bashrc source .bashrc ä¿®æ”¹ ssh é…ç½® ClientAliveInterval 90 ClientAliveCountMax 2 systemctl restart sshd ","date":"2020-03-15","objectID":"/linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E8%AE%BE%E7%BD%AE/:2:0","tags":["safe"],"title":"linuxç³»ç»Ÿå®‰å…¨è®¾ç½®","uri":"/linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E8%AE%BE%E7%BD%AE/"},{"categories":["linux(ğŸ§)"],"content":"è®¾ç½®å¸å·é”å®šæ¬¡æ•°ï¼Œé”å®šæ—¶é—´ ","date":"2020-03-15","objectID":"/linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E8%AE%BE%E7%BD%AE/:3:0","tags":["safe"],"title":"linuxç³»ç»Ÿå®‰å…¨è®¾ç½®","uri":"/linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E8%AE%BE%E7%BD%AE/"},{"categories":["linux(ğŸ§)"],"content":"Ulimit é…ç½® linux æ“ä½œç³»ç»Ÿé»˜è®¤åªèƒ½æ‰“å¼€ 1024 ä¸ªæ–‡ä»¶ï¼Œæ‰“å¼€çš„æ–‡ä»¶è¶…è¿‡è¿™ä¸ªæ•°å‘ç°ç¨‹åºä¼šæœ‰â€œtoo many open filesâ€çš„é”™è¯¯ï¼Œ1024 å¯¹äºå¤§æ•°æ®ç³»ç»Ÿæ¥è¯´æ˜¾ç„¶æ˜¯ä¸å¤Ÿçš„ï¼Œå¦‚æœä¸è®¾ç½®ï¼ŒåŸºæœ¬ä¸Šæ•´ä¸ªå¤§æ•°æ®ç³»ç»Ÿæ˜¯â€œä¸å¯ç”¨çš„â€ï¼Œæ ¹æœ¬ä¸èƒ½ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ é…ç½®æ–¹æ³•å¦‚ä¸‹ï¼š echo \"* soft nofile 128000\" \u003e\u003e /etc/security/limits.conf echo \"* hard nofile 128000\" \u003e\u003e /etc/security/limits.conf echo \"* soft nproc 128000\" \u003e\u003e /etc/security/limits.conf echo \"* hard nproc 128000\" \u003e\u003e /etc/security/limits.conf ã€ä¿®æ”¹å»ºè®®ï¼šå¼ºçƒˆå»ºè®®ä¿®æ”¹ï¼Œæ— å½±å“ã€‘ ","date":"2020-03-15","objectID":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/:1:0","tags":["parameter"],"title":"linuxç³»ç»Ÿå¸¸ç”¨çš„å‚æ•°ä¼˜åŒ–","uri":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/"},{"categories":["linux(ğŸ§)"],"content":"swap åˆ†åŒºé…ç½® è®©ç³»ç»Ÿå°½é‡ä¸ä½¿ç”¨ swapï¼Œå¦‚æœæŒ‰ç…§é»˜è®¤é…ç½®ä¸º 60ï¼Œåˆ™å®¹æ˜“å¯¼è‡´å†…å­˜è¿˜å¤Ÿçš„æƒ…å†µä¸‹ä½¿ç”¨ swapï¼Œæœ‰å¯èƒ½å¯¼è‡´ jvm çš„ gc å›æ”¶å¤„äº swap çš„å†…å­˜ï¼Œé€ æˆä¸€ç³»åˆ—è¶…æ—¶é—®é¢˜ã€‚ ä¸æ˜¯ä¸èƒ½å†ä½¿ç”¨ swapï¼Œåªæ˜¯å°½é‡ä¸ä½¿ç”¨ swapã€‚ echo \"vm.swappiness=1\" \u003e\u003e /etc/sysctl.conf sysctl -p sysctl -a|grep swappiness ã€ä¿®æ”¹å»ºè®®ï¼šå¼ºçƒˆå»ºè®®ä¿®æ”¹ï¼Œæ— å½±å“ã€‘ ","date":"2020-03-15","objectID":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/:2:0","tags":["parameter"],"title":"linuxç³»ç»Ÿå¸¸ç”¨çš„å‚æ•°ä¼˜åŒ–","uri":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/"},{"categories":["linux(ğŸ§)"],"content":"å†…å­˜æ˜ å°„æ•°é‡é™åˆ¶é—®é¢˜ å¦‚æœ solr å†…å­˜æ˜ å°„è¿‡å¤šï¼Œä¼šè¶…å‡ºç³»ç»Ÿé™åˆ¶çš„ä¸ªæ•° 65530ï¼Œå¯¼è‡´ solr é—®é¢˜ã€‚ vi /etc/sysctl.conf vm.max_map_count=262144 sysctl -p ã€ä¿®æ”¹å»ºè®®ï¼šå¼ºçƒˆå»ºè®®ä¿®æ”¹ï¼Œæ— å½±å“ã€‘ ","date":"2020-03-15","objectID":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/:3:0","tags":["parameter"],"title":"linuxç³»ç»Ÿå¸¸ç”¨çš„å‚æ•°ä¼˜åŒ–","uri":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/"},{"categories":["linux(ğŸ§)"],"content":"ç›‘å¬é˜Ÿåˆ—å¤§å° tcp è¿æ¥çš„æ—¶å€™ listen ç›‘å¬é˜Ÿåˆ—çš„å¤§å°é»˜è®¤ä¸º 128. echo \" net.core.somaxconn = 32768 \" \u003e\u003e /etc/sysctl.conf sysctl -p sysctl -a|grep somaxconn ã€ä¿®æ”¹å»ºè®®ï¼š ä¸€èˆ¬ï¼Œæ— å½±å“ã€‘ ","date":"2020-03-15","objectID":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/:4:0","tags":["parameter"],"title":"linuxç³»ç»Ÿå¸¸ç”¨çš„å‚æ•°ä¼˜åŒ–","uri":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/"},{"categories":["linux(ğŸ§)"],"content":"é€æ˜å¤§é¡µé—®é¢˜ åœ¨ centos7 çš„ç³»ç»Ÿç‰ˆæœ¬ä¸­ï¼Œé€æ˜å¤§é¡µè¿™ç§æœ¬æ¥ä¸ºæé«˜æ€§èƒ½çš„æ‰‹æ®µï¼Œä¼šç³»ç»Ÿè´Ÿè½½é«˜çš„æ—¶å€™ï¼Œé€ æˆç³»ç»Ÿåå¤é‡å¯ï¼Œæ‰€ä»¥å»ºè®®å…³é—­ã€‚ 1ï¼‰æŸ¥çœ‹æ˜¯å¦å¯ç”¨ï¼š [root@localhost ~]# cat /sys/kernel/mm/transparent_hugepage/enabled [always] madvise never [always]ä¸ºå¯åŠ¨ã€‚ 2ï¼‰åœæ­¢æ–¹æ³•ï¼š 1ã€ç¬¬ä¸€ç§æ–¹æ³•ï¼šå¯¹äºcentos7æ¥è¯´ï¼šã€ä¸´æ—¶ä¿®æ”¹å¯ä»¥ç›´æ¥ç”¨ä¸‹é¢ä¸¤æ¡å‘½ä»¤ã€‘ æ›´æ”¹ï¼š/etc/rc.d/rc.local echo never \u003e /sys/kernel/mm/transparent_hugepage/enabled echo never \u003e /sys/kernel/mm/transparent_hugepage/defrag ä¿®æ”¹æƒé™ï¼š chmod +x /etc/rc.d/rc.local 2ã€ç¬¬äºŒç§æ–¹æ³•ï¼š ä¿®æ”¹ /etc/grub.conf é‡å¯åç”Ÿæ•ˆã€‚ æ·»åŠ ï¼štransparent_hugepage=never ä¸¾ä¸ªä¾‹å­ï¼š For example: title Oracle Linux Server (2.6.32-300.25.1.el6uek.x86_64) root (hd0,0) kernel /vmlinuz-2.6.32-300.25.1.el6uek.x86_64 ro root=LABEL=/ transparent_hugepage=never initrd /initramfs-2.6.32-300.25.1.el6uek.x86_64.img ã€ä¿®æ”¹å»ºè®®ï¼šå»ºè®®ä¿®æ”¹ï¼Œå¯¹ç³»ç»Ÿæ€§èƒ½æœ‰ç‚¹å½±å“ã€‘ ","date":"2020-03-15","objectID":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/:5:0","tags":["parameter"],"title":"linuxç³»ç»Ÿå¸¸ç”¨çš„å‚æ•°ä¼˜åŒ–","uri":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/"},{"categories":["linux(ğŸ§)"],"content":"å†…å­˜åˆ†é…ç­–ç•¥ overcommit_memory [root@localhost ~]# cat /proc/sys/vm/overcommit_memory 0 å†…æ ¸å‚æ•°overcommit_memory å®ƒæ˜¯ å†…å­˜åˆ†é…ç­–ç•¥ å¯é€‰å€¼ï¼š0ã€1ã€2ã€‚ 0ï¼Œ è¡¨ç¤ºå†…æ ¸å°†æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„å¯ç”¨å†…å­˜ä¾›åº”ç”¨è¿›ç¨‹ä½¿ç”¨ï¼›å¦‚æœæœ‰è¶³å¤Ÿçš„å¯ç”¨å†…å­˜ï¼Œå†…å­˜ç”³è¯·å…è®¸ï¼›å¦åˆ™ï¼Œå†…å­˜ç”³è¯·å¤±è´¥ï¼Œå¹¶æŠŠé”™è¯¯è¿”å›ç»™åº”ç”¨è¿›ç¨‹ã€‚ 1ï¼Œ è¡¨ç¤ºå†…æ ¸å…è®¸åˆ†é…æ‰€æœ‰çš„ç‰©ç†å†…å­˜ï¼Œè€Œä¸ç®¡å½“å‰çš„å†…å­˜çŠ¶æ€å¦‚ä½•ã€‚ 2ï¼Œ è¡¨ç¤ºå†…æ ¸å…è®¸åˆ†é…è¶…è¿‡æ‰€æœ‰ç‰©ç†å†…å­˜å’Œäº¤æ¢ç©ºé—´æ€»å’Œçš„å†…å­˜ ã€å»ºè®®è®¾ç½®ä¸º0ï¼Œç›®å‰ç¯å¢ƒä¸º0 ä¸ç”¨ä¿®æ”¹ã€‘ ","date":"2020-03-15","objectID":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/:6:0","tags":["parameter"],"title":"linuxç³»ç»Ÿå¸¸ç”¨çš„å‚æ•°ä¼˜åŒ–","uri":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/"},{"categories":["linux(ğŸ§)"],"content":"NUMA å‚æ•°é—®é¢˜ numa ä¸ºä¸€ç§æ¶æ„æ¨¡å¼ï¼Œå°±æ˜¯å†…å­˜å’Œ cpu ç»„ç»‘å®šï¼Œæå‡æ€»çº¿é€šä¿¡å¸¦å®½ã€‚é…ç½®ä¸å½“å®¹æ˜“é€ æˆæ˜æ˜å†…å­˜å¾ˆå¤šï¼Œä½†æ˜¯å´åœ¨ä½¿ç”¨ swap é—®é¢˜ã€‚ 1ã€æŸ¥çœ‹æ˜¯å¦å¼€å¯NUMA é€šè¿‡å‘½ä»¤ï¼š grep -i numa /var/log/dmesg å¦‚æœè¾“å‡º:No NUMA configuration found åˆ™æ²¡æœ‰å¼€å¯ï¼Œå¦åˆ™æ˜¯å¼€å¯äº†NUMA æˆ‘ä»¬ä¸»æœºæ˜¾ç¤ºï¼š [ 3.175740] pci_bus 0000:00: on NUMA node 0 [ 3.180438] pci_bus 0000:10: on NUMA node 1 [ 3.185192] pci_bus 0000:20: on NUMA node 2 [ 3.189191] pci_bus 0000:30: on NUMA node 3 [ 3.191694] pci_bus 0000:40: on NUMA node 4 [ 3.194062] pci_bus 0000:50: on NUMA node 5 [ 3.198240] pci_bus 0000:60: on NUMA node 6 [ 3.200434] pci_bus 0000:70: on NUMA node 7 è¡¨æ˜å¼€å¯äº†NUMAã€‚ 2ã€æŸ¥çœ‹åˆ†é…ç­–ç•¥ cat /proc/sys/vm/zone_reclaim_mode ç›®å‰ç¯å¢ƒä¸º0 ï¼Œå»ºè®®ä¸º0 ä¸ç”¨ä¿®æ”¹ã€‚ å½“æŸä¸ªèŠ‚ç‚¹å¯ç”¨å†…å­˜ä¸è¶³æ—¶ï¼š 1ã€å¦‚æœä¸º0çš„è¯ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šå€¾å‘äºä»å…¶ä»–èŠ‚ç‚¹åˆ†é…å†…å­˜ 2ã€å¦‚æœä¸º1çš„è¯ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šå€¾å‘äºä»æœ¬åœ°èŠ‚ç‚¹å›æ”¶Cacheå†…å­˜å¤šæ•°æ—¶å€™ ","date":"2020-03-15","objectID":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/:7:0","tags":["parameter"],"title":"linuxç³»ç»Ÿå¸¸ç”¨çš„å‚æ•°ä¼˜åŒ–","uri":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/"},{"categories":["linux(ğŸ§)"],"content":"æ—¶é’ŸåŒæ­¥ ä½¿ç”¨ chronyc è¿›è¡Œæ—¶é’ŸåŒæ­¥ ","date":"2020-03-15","objectID":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/:8:0","tags":["parameter"],"title":"linuxç³»ç»Ÿå¸¸ç”¨çš„å‚æ•°ä¼˜åŒ–","uri":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/"},{"categories":["linux(ğŸ§)"],"content":"å…³é—­ SELINUX 1ï¼‰æŸ¥çœ‹ï¼š /etc/selinux/config 2ï¼‰ä¿®æ”¹ setenforce 0 sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config ","date":"2020-03-15","objectID":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/:9:0","tags":["parameter"],"title":"linuxç³»ç»Ÿå¸¸ç”¨çš„å‚æ•°ä¼˜åŒ–","uri":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/"},{"categories":["linux(ğŸ§)"],"content":"ç¦ç”¨ IPV6 echo -e \"NETWORKING_IPV6=no\" \u003e\u003e /etc/sysconfig/network echo -e \"alias net-pf-10 off\\noptions ipv6 disable=1\" \u003e /etc/modprobe.d/disable_ipv6.conf systemctl restart network ","date":"2020-03-15","objectID":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/:10:0","tags":["parameter"],"title":"linuxç³»ç»Ÿå¸¸ç”¨çš„å‚æ•°ä¼˜åŒ–","uri":"/linux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96/"},{"categories":null,"content":"ğŸ“± è”ç³»æ–¹å¼ ç”µè¯ï¼š18762400277 é‚®ä»¶ï¼šredgaojila@gmail.com ","date":"2020-03-02","objectID":"/about/:1:0","tags":null,"title":"","uri":"/about/"},{"categories":null,"content":"ğŸ‘¨ ä¸ªäººä¿¡æ¯ ç”·ï¼Œ1994 å¹´å‡ºç”Ÿï¼Œå®‰å¾½å…­å®‰ æ±‚èŒæ„å‘ï¼šLinux è¿ç»´å·¥ç¨‹å¸ˆ å·¥ä½œç»éªŒï¼š4 å¹´ ä¸ªäººåšå®¢ï¼šhttps://gaojila.github.io/ ","date":"2020-03-02","objectID":"/about/:2:0","tags":null,"title":"","uri":"/about/"},{"categories":null,"content":"ğŸ« æ•™è‚²ç»å† å­¦å£«ï¼Œè‹å·å¤§å­¦æ–‡æ­£å­¦é™¢ï¼Œè®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ï¼Œ2013.9~2017.7 ","date":"2020-03-02","objectID":"/about/:3:0","tags":null,"title":"","uri":"/about/"},{"categories":null,"content":"ğŸ‘· å·¥ä½œç»å† ã€Œ2017.6~2020.4ã€å—äº¬é‡‘æ–¯ç‘ç”Ÿç‰©ç§‘æŠ€ç§‘æŠ€æœ‰é™å…¬å¸ï¼Œä¿¡æ¯éƒ¨ï¼Œç³»ç»Ÿè¿ç»´å·¥ç¨‹å¸ˆã€‚ ã€Œ2020.4~è‡³ä»Šã€å—äº¬å¸ŒéŸ³ç”µå­å•†åŠ¡æœ‰é™å…¬å¸ï¼Œäº§å“ç ”å‘éƒ¨ï¼Œç³»ç»Ÿè¿ç»´å·¥ç¨‹å¸ˆã€‚ ","date":"2020-03-02","objectID":"/about/:4:0","tags":null,"title":"","uri":"/about/"},{"categories":null,"content":"ğŸ“– é¡¹ç›®ç»å† Greenplum è¿ç§»é¡¹ç›® ç»“åˆ Backuppc å®ç°åˆ†å¸ƒå¼æ•°æ®åº“ Greenplum çš„è‡ªåŠ¨å¤‡ä»½ï¼Œå¤‡ä»½å·¥å…·é€‰æ‹©å®˜æ–¹çš„ gpbackup, åœ¨ä¸€æœˆåˆç”±äºä¸å¯æŠ—åŠ›çš„å› ç´ ï¼ˆå­˜å‚¨æ•…éšœï¼‰Greenplum å®•æœºï¼Œåä½¿ç”¨ gprestore è¿ç§»æˆåŠŸã€‚ Zabbix è‡ªåŠ¨åŒ–ç›‘æ§å¹³å° ç»“åˆ Netdataï¼ŒGrafana å®ç°ç›‘æ§å¯è§†åŒ–å±•æ¿ï¼Œæ—¥å¸¸è‡ªåŠ¨åŒ–ç›‘æ§å¼€å‘å®ç°ç‰¹æ®Šç›‘æ§éœ€æ±‚ã€‚ Nexus å¼€æº maven ç§æœ‰ä»“åº“ è€çš„ Nexus åœ¨ä¸€æ¬¡å­£åº¦ç»´æŠ¤ä¸­ï¼Œæ— æ³•å¯åŠ¨ï¼Œåä½¿ç”¨ Docker æ­å»º Nexus ç§æœ‰ä»“åº“ã€‚ Ansible ç®¡ç†å·¥å…· ä¸€äº›å¸¸ç”¨çš„å®‰è£…é…ç½®ç‰ˆæœ¬ç®¡ç†åŒ–ï¼Œå¯è¿½æº¯èµ„äº§å˜æ›´ï¼Œåœ¨åˆå§‹åŒ–æ“ä½œç³»ç»Ÿæ—¶ä½¿ç”¨ Ansible å‡å°‘è¿ç»´äººå‘˜å·¥ä½œè´Ÿæ‹…(è‡ªåŠ¨åŠ å…¥ç›‘æ§ï¼Œè‡ªåŠ¨åŠ å…¥å ¡å’æœºï¼Œè‡ªåŠ¨åŠ å…¥å¤‡ä»½)ã€‚ Jenkins Gitlab CI/CD ä»¥å¾€ä¸€äº›åˆ†æ•£çš„ä¸šåŠ¡ç³»ç»Ÿä½¿ç”¨ Pipeline script from SCM æ¨¡å— Groovy è„šæœ¬å®ç°å‘å¸ƒæµ‹è¯•é›†ä¸­ç®¡ç†ã€‚ å°é¡¹ç›®å¼€æºå·¥å…·éƒ¨ç½² Docker åŒ– ä¸€äº›å¼€æºçš„é¡¹ç›®ï¼Œæ¨è¿› Docker å¿«é€Ÿéƒ¨ç½²ï¼Œä½¿ç”¨ Dockerfile å®ç°ç‰ˆæœ¬ç®¡ç†ï¼ˆè¥é”€é‚®ä»¶ç³»ç»Ÿã€Nexusã€wordpress)ã€‚ Backuppc è‡ªåŠ¨åŒ–å¤‡ä»½ ä½¿ç”¨ shell å¼€å‘ç»“åˆ Backuppc å®ç° Mysqlï¼ˆMEBï¼‰çš„è‡ªåŠ¨åŒ–å¤‡ä»½ã€‚ ä½¿ç”¨ shell å¼€å‘ç»“åˆ Backuppc å®ç° Greenplumï¼ˆgpbackupï¼‰çš„è‡ªåŠ¨åŒ–å¤‡ä»½ã€‚ Kubernetes å®¹å™¨ç›‘æ§ åŸºäº Prometheus å®ç° Kubernetes ä¸‹çš„åº”ç”¨ç›‘æ§ï¼Œæµé‡ç›‘æ§ï¼Œç»„ä»¶ç›‘æ§ã€‚ Prometheus ç›‘æ§è®¾è®¡ å•èŠ‚ç‚¹Prometheus,å®ç°æŒ‰åº”ç”¨åˆ†ç»„åˆ†ä¸ºå¤šä¸ªPrometheusèŠ‚ç‚¹ï¼Œä½¿ç”¨Thanos side caræ¨¡å¼åšé«˜å¯ç”¨ã€‚ ","date":"2020-03-02","objectID":"/about/:5:0","tags":null,"title":"","uri":"/about/"},{"categories":null,"content":"ğŸ§ æŠ€èƒ½æ¸…å• è¿ç»´ â˜…â˜…â˜…â˜…â˜† Linux (Fedora,SuSe,Debain,Archlinux,Gentoo) â˜…â˜…â˜…â˜†â˜† NBUã€Backuppc â˜…â˜…â˜…â˜†â˜† Nginxã€Apache â˜…â˜…â˜…â˜…â˜† Zabbixã€Grafanaã€Prometheus â˜…â˜…â˜†â˜†â˜† Mysqlã€Greenplum å¼€å‘ â˜…â˜…â˜…â˜…â˜† Bashã€Pythonã€Golang â˜…â˜…â˜…â˜…â˜† Jenkinsã€Gitlabã€Ansible â˜…â˜…â˜†â˜†â˜† K8sã€Docker ","date":"2020-03-02","objectID":"/about/:6:0","tags":null,"title":"","uri":"/about/"},{"categories":null,"content":"ğŸ’“ è‡´è°¢ æˆ‘æœŸå¾…èƒ½ä¸æ‚¨ä¸€èµ·å…±äº‹ï¼ŒæœŸå¾…ä¸ºæ‚¨çš„ä¼ä¸šæ·»ç –åŠ ç“¦ï¼ŒæœŸå¾…ä¸æ‚¨ä¸€èµ·æ¢è®¨æ–°æŠ€æœ¯ï¼ŒæœŸå¾…ä¸æ‚¨ä¸€èµ·å–å’–å•¡!!! ","date":"2020-03-02","objectID":"/about/:7:0","tags":null,"title":"","uri":"/about/"},{"categories":["Git"],"content":"Git åˆ†å¸ƒå¼ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ Git å‘½ä»¤æ¸…å• workspace: å·¥ä½œåŒº Index/Stage: æš‚å­˜åŒº Repository: ä»“åº“åŒº(æˆ–æœ¬åœ°ä»“åº“) Remote: è¿œç¨‹ä»“åº“ ","date":"2020-02-17","objectID":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/:0:0","tags":["gitä½¿ç”¨æ€»ç»“"],"title":"gitä½¿ç”¨æ€»ç»“","uri":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["Git"],"content":"æ–°å»ºä»£ç åº“ # åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªGitä»£ç åº“ $ git init # æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºGitä»£ç åº“ $ git init [project-name] # ç»†å´½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å² $ git clone [url] ","date":"2020-02-17","objectID":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/:1:0","tags":["gitä½¿ç”¨æ€»ç»“"],"title":"gitä½¿ç”¨æ€»ç»“","uri":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["Git"],"content":"é…ç½® Git çš„é…ç½®æ–‡ä»¶ä¸º.gitconfigï¼Œå®ƒå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼ˆå…¨å±€é…ç½®ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆé¡¹ç›®é…ç½®ï¼‰ã€‚ # æ˜¾ç¤ºå½“å‰çš„Gité…ç½® $ git config --list # ç¼–è¾‘Gité…ç½®æ–‡ä»¶ $ git config -e [--global] # è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯ $ git config [--global] user.name \"[name]\" $ git config [--global] user.email \"[email address]\" ","date":"2020-02-17","objectID":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/:2:0","tags":["gitä½¿ç”¨æ€»ç»“"],"title":"gitä½¿ç”¨æ€»ç»“","uri":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["Git"],"content":"å¢åŠ /åˆ é™¤æ–‡ä»¶ # æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒº $ git add [file1] [file2] # æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½• $ git add [dir] # æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº $ git add . # æ·»åŠ æ¯ä¸€ä¸ªå˜åŒ–å‰ï¼Œéƒ½ä¼šè¦æ±‚ç¡®è®¤ # å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶çš„å¤šå¤„å˜åŒ–ï¼Œå¯ä»¥å®ç°åˆ†æ¬¡æäº¤ $ git add -p # åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº $ git rm [file1] [file2] # åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒº $ git rm --cached [file] # æ”¹åæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åæ”¾å…¥æš‚å­˜åŒº $ git mv [file-original] [file-renamed] ","date":"2020-02-17","objectID":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/:3:0","tags":["gitä½¿ç”¨æ€»ç»“"],"title":"gitä½¿ç”¨æ€»ç»“","uri":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["Git"],"content":"ä»£ç æäº¤ # æäº¤æš‚å­˜åŒºåˆ°ä»“åº“åŒº $ git commit -m [message] # æäº¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°ä»“åº“åŒº $ git commit [file1] [file2] ... -m [message] # æäº¤å·¥ä½œåŒºè‡ªä¸Šä¸€æ¬¡commitä¹‹åçš„å˜åŒ–ï¼Œç›´æ¥åˆ°ä»“åº“åŒº $ git commit -a # æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰çš„diffä¿¡æ¯ $ git commit -v # ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤ # å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡commitçš„æäº¤ä¿¡æ¯ $ git commit --amend -m [message] # é‡åšä¸Šä¸€æ¬¡commit,å¹¶åŒ…æ‹¬æŒ‡å®šæ–‡ä»¶çš„æ–°å˜åŒ– $ git commit --amend [file1] [file2] ","date":"2020-02-17","objectID":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/:4:0","tags":["gitä½¿ç”¨æ€»ç»“"],"title":"gitä½¿ç”¨æ€»ç»“","uri":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["Git"],"content":"åˆ†æ”¯ # åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯ $ git branch # åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯ $ git branch -r # åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯ $ git branch -a # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå•ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯ $ git branch [branch-name] # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ $ git cleckout -b [branch] # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶æŒ‡å‘æŒ‡å®šcommit $ git branch [branch] [commit] # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³» $ git branch --track [branch] [remote-branch] # åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº $ git checkout [branch-name] # åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯ $ git checkout - # å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´ $ git branch --set-upstream [branch] [remote-branch] # åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ $ git merge [branch] # é€‰æ‹©ä¸€ä¸ªcommitï¼Œåˆå¹¶è¿‘å½“å‰åˆ†æ”¯ $ git cherry-pick [commit] # åˆ é™¤åˆ†æ”¯ $ git branch -d [branch-name] # åˆ é™¤è¿œç¨‹åˆ†æ”¯ $ git push origin --delete [branch-name] $ git branch -dr [remote/branch] ","date":"2020-02-17","objectID":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/:5:0","tags":["gitä½¿ç”¨æ€»ç»“"],"title":"gitä½¿ç”¨æ€»ç»“","uri":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["Git"],"content":"æ ‡ç­¾ # åˆ—å‡ºæ‰€æœ‰tag $ git tag # æ–°å»ºä¸€ä¸ªtagåœ¨å½“å‰commit $ git tag [tag] ï¼ƒæ–°å»ºä¸€ä¸ªtagåœ¨æŒ‡å®šcommit $ git tag [tag] [commit] # åˆ é™¤æœ¬åœ°tag $ git tag -d [tag] # åˆ é™¤è¿œç¨‹tag $ git push origin :refs/tags/[tagName] # æŸ¥çœ‹tagä¿¡æ¯ $ git show [tag] ï¼ƒæäº¤æŒ‡å®štag $ git push [remote] [tag] # æäº¤æ‰€æœ‰tag $ git push [remote] --tags # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶æŒ‡å‘æŸä¸ªtag $ git checkout -b [branch] [tag] ","date":"2020-02-17","objectID":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/:6:0","tags":["gitä½¿ç”¨æ€»ç»“"],"title":"gitä½¿ç”¨æ€»ç»“","uri":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["Git"],"content":"æŸ¥çœ‹ä¿¡æ¯ # æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶ $ git status # æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„å†å²ç‰ˆæœ¬ $ git log # æ˜¾ç¤ºcommitå†å²ï¼Œä»¥åŠæ¯æ¬¡commitå‘ç”Ÿå˜æ›´çš„æ–‡ä»¶ $ git log --stat # æœç´¢æäº¤å†å²ï¼Œæ ¹æ®å…³é”®è¯ $ git log -S [keyword] # æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œæ¯ä¸ªcommitå æ®ä¸€è¡Œ $ git log [tag] HEAD --pretty=format:%s # æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œå…¶â€æäº¤è¯´æ˜â€œå¿…é¡»ç¬¦åˆæœç´¢æ¡ä»¶ $ git log [tag] HEAD --grep feature # æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„ç‰ˆæœ¬å†å²ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ”¹å $ git log --follow [file] $ git whatchanged [file] # æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ç›¸å…³çš„æ¯ä¸€æ¬¡diff $ git log -p [file] # æ˜¾ç¤ºè¿‡å»çš„5æ¬¡æäº¤ $ git log -5 --pretty --oneline # æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç”¨æˆ·ï¼ŒæŒ‰æäº¤æ¬¡æ•°æ’åº $ git shortlog -sn # æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æ˜¯ä»€ä¹ˆäººåœ¨ä»€ä¹ˆæ—¶é—´ä¿®æ”¹è¿‡ $ git blame [file] # æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚ $ git diff # æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€ä¸ªcommitçš„å·®å¼‚ $ git diff --cached [file] # æ˜¾ç¤ºå·¥ä½œåŒºä¸å½“å‰åˆ†æ”¯æœ€æ–°commitä¹‹é—´çš„å·®å¼‚ $ git diff HEAD # æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚ $ git diff [first-branch]...[second-branch] # æ˜¾ç¤ºä»Šå¤©ä½ å†™äº†å¤šå°‘è¡Œä»£ç  $ git diff --short --shortstat \"@{0 day ago}\" # æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å…ƒæ•°æ®å’Œå†…å®¹å˜åŒ– $ git show [commit] # æ˜¾ç¤ºæŸæ¬¡æäº¤å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶ $ git show --name-only [commit] # æ˜¾ç¤ºæŸæ¬¡æäº¤æ—¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„å†…å®¹ $ git show [commit]:[filename] # æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘å‡ æ¬¡æäº¤ $ git reflog ","date":"2020-02-17","objectID":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/:7:0","tags":["gitä½¿ç”¨æ€»ç»“"],"title":"gitä½¿ç”¨æ€»ç»“","uri":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["Git"],"content":"è¿œç¨‹åŒæ­¥ # ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰å˜åŠ¨ $ git fetch [remote] # æ˜¾ç¤ºæ‰€æœ‰è¿œç¨‹ä»“åº“ $ git remote -v # æ˜¾ç¤ºæŸä¸ªè¿œç¨‹ä»“åº“çš„ä¿¡æ¯ $ git remote show [remote] # å¢åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“ï¼Œå¹¶å‘½å $ git remote add [shortname] [url] # å–å›è¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸æœ¬åœ°åˆ†æ”¯åˆå¹¶ $ git pull [remote] [branch] # ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ $ git push [remote] [branch] # å¼ºè¡Œæ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ï¼Œå³ä½¿æœ‰å†²çª $ git push [remote] --force # æ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ $ git push [remote] --all ","date":"2020-02-17","objectID":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/:8:0","tags":["gitä½¿ç”¨æ€»ç»“"],"title":"gitä½¿ç”¨æ€»ç»“","uri":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["Git"],"content":"æ’¤é”€ # æ¢å¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°å·¥ä½œåŒº $ git checkout [file] # æ¢å¤æŸä¸ªcommitçš„æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºå’Œå·¥ä½œåŒº $ git checkout [commit] [file] # æ¢å¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œåŒº $ git checkout . # é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´,ä½†å·¥ä½œåŒºä¸å˜ $ git reset [file] # é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´ $ git reset --hard # é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆæœªæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜ $ git reset [commit] # é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸æŒ‡å®šcommitä¸€è‡´ $ git reset --hard [commit] # é‡ç½®å½“å‰HEADä¸ºæŒ‡å®šcommitï¼Œä½†ä¿æŒæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å˜ $ git reset --keep [commit] # æ–°å»ºä¸€ä¸ªcommitï¼Œç”¨æ¥æ’¤é”€æŒ‡å®šcommit # åè€…çš„æ‰€æœ‰å˜åŒ–éƒ½å°†è¢«å‰è€…æŠµæ¶ˆï¼Œå¹¶ä¸”åº”ç”¨åˆ°å½“å‰åˆ†æ”¯ $ git revert [commit] # æš‚æ—¶å°†æœªæäº¤çš„å˜åŒ–ç§»é™¤ï¼Œç¨åå†ç§»å…¥ $ git stash $ git stash pop ","date":"2020-02-17","objectID":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/:9:0","tags":["gitä½¿ç”¨æ€»ç»“"],"title":"gitä½¿ç”¨æ€»ç»“","uri":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["Git"],"content":"å…¶ä»– # ç”Ÿæˆä¸€ä¸ªå¯ä¾›å‘å¸ƒçš„å‹ç¼©åŒ… $ git archive ","date":"2020-02-17","objectID":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/:10:0","tags":["gitä½¿ç”¨æ€»ç»“"],"title":"gitä½¿ç”¨æ€»ç»“","uri":"/git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"ReplicaSet ","date":"2020-02-12","objectID":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/:0:0","tags":["èµ„æºæ§åˆ¶å™¨(RS,deployment)"],"title":"k8sèµ„æºæ§åˆ¶å™¨","uri":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"ä»€ä¹ˆæ˜¯ ReplicaSetï¼Ÿ ReplicaSet æ˜¯ä¸‹ä¸€ä»£å¤æœ¬æ§åˆ¶å™¨ã€‚ReplicaSet å’Œ Replication Controller ä¹‹é—´çš„å”¯ä¸€åŒºåˆ«æ˜¯ç°åœ¨çš„é€‰æ‹©å™¨æ”¯æŒã€‚Replication Controller åªæ”¯æŒåŸºäºç­‰å¼çš„ selectorï¼ˆenv=dev æˆ– environment!=qaï¼‰ï¼Œä½† ReplicaSet è¿˜æ”¯æŒæ–°çš„ï¼ŒåŸºäºé›†åˆçš„ selectorï¼ˆversion in (v1.0, v2.0)æˆ– env notin (dev, qa)ï¼‰ã€‚åœ¨è¯•ç”¨æ—¶å®˜æ–¹æ¨è ReplicaSetã€‚ å¤§å¤šæ•° kubectl æ”¯æŒ Replication Controller çš„å‘½ä»¤ä¹Ÿæ”¯æŒ ReplicaSetsã€‚rolling-update å‘½ä»¤æœ‰ä¸€ä¸ªä¾‹å¤– ã€‚å¦‚æœæ‚¨æƒ³è¦æ»šåŠ¨æ›´æ–°åŠŸèƒ½ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ Deploymentsã€‚æ­¤å¤–ï¼Œ rolling-update å‘½ä»¤æ˜¯å¿…é¡»çš„ï¼Œè€Œ Deployments æ˜¯å£°æ˜å¼çš„ï¼Œå› æ­¤æˆ‘ä»¬å»ºè®®é€šè¿‡ rollout å‘½ä»¤ä½¿ç”¨ Deploymentsã€‚ è™½ç„¶ ReplicaSets å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼Œä½†æ˜¯ä»Šå¤©å®ƒä¸»è¦è¢« Deployments ä½œä¸ºåè°ƒ pod åˆ›å»ºï¼Œåˆ é™¤å’Œæ›´æ–°çš„æœºåˆ¶ã€‚å½“æ‚¨ä½¿ç”¨ Deployments æ—¶ï¼Œæ‚¨ä¸å¿…æ‹…å¿ƒç®¡ç†ä»–ä»¬åˆ›å»ºçš„ ReplicaSetsã€‚Deployments æ‹¥æœ‰å¹¶ç®¡ç†å…¶ ReplicaSetsã€‚ ","date":"2020-02-12","objectID":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/:1:0","tags":["èµ„æºæ§åˆ¶å™¨(RS,deployment)"],"title":"k8sèµ„æºæ§åˆ¶å™¨","uri":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"ä½•æ—¶ä½¿ç”¨ ReplicaSetï¼Ÿ ReplicaSet å¯ç¡®ä¿æŒ‡å®šæ•°é‡çš„ podâ€œreplicasâ€åœ¨ä»»ä½•è®¾å®šçš„æ—¶é—´è¿è¡Œã€‚ç„¶è€Œï¼ŒDeployments æ˜¯ä¸€ä¸ªæ›´é«˜å±‚æ¬¡çš„æ¦‚å¿µï¼Œå®ƒç®¡ç† ReplicaSetsï¼Œå¹¶æä¾›å¯¹ pod çš„å£°æ˜æ€§æ›´æ–°ä»¥åŠè®¸å¤šå…¶ä»–çš„åŠŸèƒ½ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨ä½¿ç”¨ Deployments è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ ReplicaSetsï¼Œé™¤éæ‚¨éœ€è¦è‡ªå®šä¹‰æ›´æ–°ç¼–æ’æˆ–æ ¹æœ¬ä¸éœ€è¦æ›´æ–°ã€‚ è¿™å®é™…ä¸Šæ„å‘³ç€æ‚¨å¯èƒ½æ°¸è¿œä¸éœ€è¦æ“ä½œ ReplicaSet å¯¹è±¡ï¼šç›´æ¥ä½¿ç”¨ Deployments å¹¶åœ¨è§„èŒƒéƒ¨åˆ†å®šä¹‰åº”ç”¨ç¨‹åºã€‚ ","date":"2020-02-12","objectID":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/:2:0","tags":["èµ„æºæ§åˆ¶å™¨(RS,deployment)"],"title":"k8sèµ„æºæ§åˆ¶å™¨","uri":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"æ¼”ç¤º å»ºç«‹ rs.yml æ–‡æ¡£ apiVersion:apps/v1kind:ReplicaSetmetadata:name:frontendspec:replicas:3#æœ‰ä¸‰ä¸ªæ¨¡æ¿selector:#æ ‡ç­¾é€‰æ‹©å™¨matchLabels:tier:frontendtemplate:#æ¨¡æ¿metadata:labels:tier:frontendspec:containers:- name:myappimage:nginxenv:- name:GET_HOSTS_FROMvalue:dnsports:- containerPort:80 åˆ›å»º pod kubectl create -f rs.yml æŸ¥çœ‹ rs [root@apiserver ~]# kubectl get rs NAME DESIRED CURRENT READY AGE frontend 3 3 3 21s æŸ¥çœ‹ pod [root@apiserver ~]# kubectl get pod NAME READY STATUS RESTARTS AGE frontend-87wtq 1/1 Running 0 23s frontend-r8kjt 1/1 Running 0 23s frontend-w7n98 1/1 Running 0 23s æŸ¥çœ‹ rs æ ‡ç­¾ [root@apiserver ~]# kubectl get pod --show-labels NAME READY STATUS RESTARTS AGE LABELS frontend-87wtq 1/1 Running 0 2m39s tier=frontend frontend-r8kjt 1/1 Running 0 2m39s tier=frontend frontend-w7n98 1/1 Running 0 2m39s tier=frontend è¿™æ—¶æˆ‘ä»¬å°è¯•ä¿®æ”¹æ ‡ç­¾ï¼šå°† tier æ”¹ä¸º frontend1 [root@apiserver ~]# kubectl label pod frontend-87wtq tier=frontend1 error: 'tier' already has a value (frontend), and --overwrite is false [root@apiserver ~]# kubectl label pod frontend-87wtq tier=frontend1 --overwrite=true pod/frontend-87wtq labeled [root@apiserver ~]# kubectl get pod --show-labels NAME READY STATUS RESTARTS AGE LABELS frontend-87wtq 1/1 Running 0 5m49s tier=frontend1 frontend-r8kjt 1/1 Running 0 5m49s tier=frontend frontend-w7n98 1/1 Running 0 5m49s tier=frontend frontend-wh4xx 1/1 Running 0 2s tier=frontend [root@apiserver ~]# kubectl get rs NAME DESIRED CURRENT READY AGE frontend 3 3 3 24m è¿™æ—¶æˆ‘ä»¬ä¼šå‘ç° rs çš„æ•°é‡æ²¡æœ‰å˜ï¼Œpod çš„æ•°é‡å¤šäº†ä¸€ä¸ªï¼ŒåŸå› æ˜¯ rs replicas: 3 æ˜¯ä»¥æ ‡ç­¾ tier=frontend ä¸ºå‡†ï¼Œå½“æ ‡ç­¾ä¿®æ”¹åï¼Œä»–ä¼šè‡ªåŠ¨æ–°å»ºä¸€ä¸ªå’ŒåŸæ¥æ ‡ç­¾ä¸€æ ·çš„ podï¼Œå½“æˆ‘ä»¬åˆ æ‰ rs ä¹‹åï¼Œè¿˜ä¼šå­˜ç•™ tier=frontend1 çš„ pod deployment Deployment ä¸º Pod å’Œ Replica Setï¼ˆä¸‹ä¸€ä»£ Replication Controllerï¼‰æä¾›å£°æ˜å¼æ›´æ–°ã€‚ ä½ åªéœ€è¦åœ¨ Deployment ä¸­æè¿°ä½ æƒ³è¦çš„ç›®æ ‡çŠ¶æ€æ˜¯ä»€ä¹ˆï¼ŒDeployment controller å°±ä¼šå¸®ä½ å°† Pod å’Œ Replica Set çš„å®é™…çŠ¶æ€æ”¹å˜åˆ°ä½ çš„ç›®æ ‡çŠ¶æ€ã€‚ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªå…¨æ–°çš„ Deploymentï¼Œä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„æ›¿æ¢æ—§çš„ Deploymentã€‚ ä¸€ä¸ªå…¸å‹çš„ç”¨ä¾‹å¦‚ä¸‹ï¼š ä½¿ç”¨ Deployment æ¥åˆ›å»º ReplicaSetã€‚ReplicaSet åœ¨åå°åˆ›å»º podã€‚æ£€æŸ¥å¯åŠ¨çŠ¶æ€ï¼Œçœ‹å®ƒæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚ ç„¶åï¼Œé€šè¿‡æ›´æ–° Deployment çš„ PodTemplateSpec å­—æ®µæ¥å£°æ˜ Pod çš„æ–°çŠ¶æ€ã€‚è¿™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ ReplicaSetï¼ŒDeployment ä¼šæŒ‰ç…§æ§åˆ¶çš„é€Ÿç‡å°† pod ä»æ—§çš„ ReplicaSet ç§»åŠ¨åˆ°æ–°çš„ ReplicaSet ä¸­ã€‚ å¦‚æœå½“å‰çŠ¶æ€ä¸ç¨³å®šï¼Œå›æ»šåˆ°ä¹‹å‰çš„ Deployment revisionã€‚æ¯æ¬¡å›æ»šéƒ½ä¼šæ›´æ–° Deployment çš„ revisionã€‚ æ‰©å®¹ Deployment ä»¥æ»¡è¶³æ›´é«˜çš„è´Ÿè½½ã€‚ æš‚åœ Deployment æ¥åº”ç”¨ PodTemplateSpec çš„å¤šä¸ªä¿®å¤ï¼Œç„¶åæ¢å¤ä¸Šçº¿ã€‚ æ ¹æ® Deployment çš„çŠ¶æ€åˆ¤æ–­ä¸Šçº¿æ˜¯å¦ hang ä½äº†ã€‚ æ¸…é™¤æ—§çš„ä¸å¿…è¦çš„ ReplicaSetã€‚ ","date":"2020-02-12","objectID":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/:3:0","tags":["èµ„æºæ§åˆ¶å™¨(RS,deployment)"],"title":"k8sèµ„æºæ§åˆ¶å™¨","uri":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"æ¼”ç¤º åˆ›å»º deployment.yml æ–‡æ¡£ apiVersion:apps/v1kind:Deploymentmetadata:name:nginx-deploymentspec:selector:matchLabels:app:nginxreplicas:2template:metadata:labels:app:nginxspec:containers:- name:nginximage:nginxports:- containerPort:80 åˆ›å»º deployment [root@apiserver ~]# kubectl apply -f deployment.yaml --record #record ç‰ˆæœ¬è®°å½• deployment.extensions/nginx-deployment created æŸ¥çœ‹ deplyment [root@apiserver ~]# kubectl get deployments. NAME READY UP-TO-DATE AVAILABLE AGE nginx-deployment 3/3 3 3 12s æŸ¥çœ‹ rs [root@apiserver ~]# kubectl get rs NAME DESIRED CURRENT READY AGE nginx-deployment-86bddccdd7 3 3 3 96s æŸ¥çœ‹ pod [root@apiserver ~]# kubectl get pod NAME READY STATUS RESTARTS AGE nginx-deployment-86bddccdd7-5s8ls 1/1 Running 0 19s nginx-deployment-86bddccdd7-9frh8 1/1 Running 0 19s nginx-deployment-86bddccdd7-wvcdx 1/1 Running 0 19s [root@apiserver ~]# kubectl get pod -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES nginx-deployment-86bddccdd7-5s8ls 1/1 Running 0 3m2s 192.168.102.179 localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-86bddccdd7-9frh8 1/1 Running 0 3m2s 192.168.102.178 localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-86bddccdd7-wvcdx 1/1 Running 0 3m2s 192.168.102.177 localhost.localdomain \u003cnone\u003e \u003cnone\u003e æŸ¥çœ‹ç¨‹åºæ˜¯å¦æ­£å¸¸è¿è¡Œ(èƒ½è®¿é—®é¡µé¢å³ä¸ºæ­£å¸¸) [root@apiserver ~]# curl 192.168.102.179 \u003c!DOCTYPE html\u003e \u003chtml\u003e \u003chead\u003e \u003ctitle\u003eWelcome to nginx!\u003c/title\u003e \u003cstyle\u003e body { width: 35em; margin: 0 auto; font-family: Tahoma, Verdana, Arial, sans-serif; } \u003c/style\u003e \u003c/head\u003e \u003cbody\u003e \u003ch1\u003eWelcome to nginx!\u003c/h1\u003e \u003cp\u003e If you see this page, the nginx web server is successfully installed and working. Further configuration is required. \u003c/p\u003e \u003cp\u003e For online documentation and support please refer to \u003ca href=\"http://nginx.org/\"\u003enginx.org\u003c/a\u003e.\u003cbr /\u003e Commercial support is available at \u003ca href=\"http://nginx.com/\"\u003enginx.com\u003c/a\u003e. \u003c/p\u003e \u003cp\u003e\u003cem\u003eThank you for using nginx.\u003c/em\u003e\u003c/p\u003e \u003c/body\u003e \u003c/html\u003e æ‰©å®¹ï¼šæ‰©å®¹åˆ°åŸæ¥çš„ 10 å€ [root@apiserver ~]# kubectl scale deployment nginx-deployment --replicas=10 deployment.extensions/nginx-deployment scaled æŸ¥çœ‹ pod [root@apiserver ~]# kubectl get pod -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES nginx-deployment-86bddccdd7-5s8ls 1/1 Running 0 135m 192.168.102.179 localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-86bddccdd7-9frh8 1/1 Running 0 135m 192.168.102.178 localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-86bddccdd7-db44r 0/1 ContainerCreating 0 3s \u003cnone\u003e localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-86bddccdd7-gh2s4 0/1 ContainerCreating 0 3s \u003cnone\u003e localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-86bddccdd7-mmvc8 0/1 ContainerCreating 0 3s \u003cnone\u003e localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-86bddccdd7-sqzn7 0/1 ContainerCreating 0 3s \u003cnone\u003e localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-86bddccdd7-tb7k5 1/1 Running 0 3s 192.168.102.180 localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-86bddccdd7-vtk8g 0/1 ContainerCreating 0 3s \u003cnone\u003e localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-86bddccdd7-wvcdx 1/1 Running 0 135m 192.168.102.177 localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-86bddccdd7-z62js 0/1 ContainerCreating 0 3s \u003cnone\u003e localhost.localdomain \u003cnone\u003e \u003cnone\u003e å¯¹é•œåƒè¿›è¡Œä¿®æ”¹æ›´æ–° [root@apiserver ~]# kubectl set image deployment/nginx-deployment nginx=linuxserver/nginx deployment.extensions/nginx-deployment image updated æŸ¥çœ‹ pod [root@apiserver ~]# kubectl get pod -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES nginx-deployment-d46468c78-6855p 1/1 Running 0 32s 192.168.102.135 localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-d46468c78-lmnw7 1/1 Running 0 24s 192.168.102.138 localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-d46468c78-lxhvq 1/1 Running 0 34s 192.168.102.132 localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-d46468c78-mg7j7 1/1 Running 0 31s 192.168.102.136 localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-deployment-d46468c78-mwcdt 1/1 Running 0 23s 192.168.102.143 localhost.localdomain \u003cnone\u003e \u003cnone\u003e nginx-d","date":"2020-02-12","objectID":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/:4:0","tags":["èµ„æºæ§åˆ¶å™¨(RS,deployment)"],"title":"k8sèµ„æºæ§åˆ¶å™¨","uri":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å›æ»šçš„å…¶å®ƒå‘½ä»¤ æŸ¥çœ‹å›æ»šçŠ¶æ€ [root@apiserver ~]# kubectl rollout status deployment nginx-deployment deployment \"nginx-deployment\" successfully rolled out æŸ¥çœ‹å›æ»šå†å² [root@apiserver ~]# kubectl rollout history deployment nginx-deployment deployment.extensions/nginx-deployment REVISION CHANGE-CAUSE 2 kubectl apply --filename=deployment.yaml --record=true 4 kubectl apply --filename=deployment.yaml --record=true 6 kubectl apply --filename=deployment.yaml --record=true 7 kubectl apply --filename=deployment.yaml --record=true å›æ»šåˆ°æŸä¸€ç¡®å®šçš„å†å²ç‰ˆæœ¬ [root@apiserver ~]# kubectl rollout undo deployment nginx-deployment --to-revision=2 deployment.extensions/nginx-deployment rolled back ","date":"2020-02-12","objectID":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/:5:0","tags":["èµ„æºæ§åˆ¶å™¨(RS,deployment)"],"title":"k8sèµ„æºæ§åˆ¶å™¨","uri":"/k8s%E8%B5%84%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å®‰è£…å‰å‡†å¤‡ ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:0:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"kvm å‡†å¤‡ 3 å°è™šæ‹Ÿæœº kube-master kube-node1 kube-node2 ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:1:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å…³é—­é˜²ç«å¢™ sudo ufw disable ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:2:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å…³é—­ swap ä¸´æ—¶å…³é—­ sudo swapoff -a æ°¸ä¹…å…³é—­ /etc/fstab æ³¨é‡Šswapè¡Œ å®‰è£… docker ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:3:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å¸è½½æ—§ docker sudo apt-get remove docker docker-engine docker.io å½»åº•åˆ é™¤ docker-ce å’Œ docker-cli sudo apt-get autoremove docker-ce ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:4:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å®‰è£…ä¾èµ– sudo apt-get install \\ apt-transport-https \\ ca-certificates \\ curl \\ software-properties-common ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:5:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"æ·»åŠ  docker çš„ gpg key ä¸ºäº†ä½¿ç”¨ https è®¿é—®ï¼Œä½¿ç”¨é˜¿é‡Œäº‘åŠ é€Ÿ curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add - ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:6:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"è®¾ç½® docker é•œåƒæº sudo add-apt-repository \\ \"deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu \\ $(lsb_release -cs)\\ stable\" æ›´æ–°æº sudo apt update \u0026\u0026 sudo apt-get update ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:7:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å®‰è£… docker 18.06 æŸ¥çœ‹ docker-ce ç‰ˆæœ¬ apt-cache madison docker-ce å®‰è£…æŒ‡å®šç‰ˆæœ¬ sudo apt-get install -y docker-ce=18.06.3~ce~3-0~ubuntu ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:8:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"é»˜è®¤å¯åŠ¨ sudo systemctl enable docker \u0026\u0026 sudo systemctl start docker ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:9:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"ä¿®æ”¹ docker å¯åŠ¨å‚æ•°ï¼Œè¿›è¡ŒåŠ é€Ÿ sudo tee /etc/docker/daemon.json \u003c\u003c-'EOF' { \"registry-mirrors\": [ \"https://1nj0zren.mirror.aliyuncs.com\", \"https://docker.mirrors.ustc.edu.cn\", \"http://f1361db2.m.daocloud.io\", \"https://registry.docker-cn.com\" ] } EOF sudo systemctl daemon-reload sudo systemctl restart docker å®‰è£… kubernets ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:10:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"æ›´æ–° apt æº sudo apt-get update \u0026\u0026 sudo apt-get install -y apt-transport-https curl sudo curl -s https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | sudo apt-key add - sudo tee /etc/apt/sources.list.d/kubernetes.list \u003c\u003c-'EOF' deb https://mirrors.aliyun.com/kubernetes/apt kubernetes-xenial main EOF sudo apt-get update ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:11:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å®‰è£… kubectl kubeadm kubelet åœ¨ master å’Œ node ä¸Šéƒ½å®‰è£… sudo apt-get install -y kubelet=1.17.3-00 kubeadm=1.17.3-00 kubectl=1.17.3-00 sudo apt-mark hold kubelet=1.17.3-00 kubeadm=1.17.3-00 kubectl=1.17.3-00 ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:12:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å¯åŠ¨ kubelet sudo systemctl enable kubelet \u0026\u0026 sudo systemctl start kubelet ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:13:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"åˆå§‹åŒ–é›†ç¾¤(master) åœ¨å›½å†…æœ‰äº›ä¼—æ‰€å‘¨çŸ¥çš„åŸå› æˆ‘ä»¬æ— æ³• kubeadm åˆå§‹åŒ–æ˜¯æ— æ³•è¿æ¥åˆ°è°·æ­Œä»“åº“çš„ åœ¨ master ä¸Šæ‰§è¡Œä¸‹é¢è„šæœ¬åå†åˆå§‹åŒ– root@kube-master:~# cat k8s.sh docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.17.3 docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.17.3 docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.17.3 docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.17.3 docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.1 docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.4.3-0 docker pull coredns/coredns:1.6.5 docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.17.3 k8s.gcr.io/kube-apiserver:v1.17.3 docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.17.3 k8s.gcr.io/kube-controller-manager:v1.17.3 docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.17.3 k8s.gcr.io/kube-scheduler:v1.17.3 docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.17.3 k8s.gcr.io/kube-proxy:v1.17.3 docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.1 k8s.gcr.io/pause:3.1 docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.4.3-0 k8s.gcr.io/etcd:3.4.3-0 docker tag coredns/coredns:1.6.5 k8s.gcr.io/coredns:1.6.5 docker rmi registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.17.3 docker rmi registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.17.3 docker rmi registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.17.3 docker rmi registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.17.3 docker rmi registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.1 docker rmi registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.4.3-0 docker rmi coredns/coredns:1.6.5 å¼€å§‹åˆå§‹åŒ– root@kube-master:~# kubeadm init --kubernetes-version v1.17.3 --service-cidr=10.96.0.0/12 --pod-network-cidr=10.244.0.0/16 ä¿ç•™åˆå§‹åŒ–æœ€åçš„ token(åœ¨æ·»åŠ  node æ—¶ä½¿ç”¨) kubeadm join 192.168.1.6.554:6443 --token ekw68p.rzmiyxxviu1pqu80 --discovery-token-ca-cert-hash sha256:45234a6478890244c7ddedb49b88c4aac5a745c277c7221efbcf7d622788f798 ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:14:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å®‰è£…ç½‘ç»œæ’ä»¶(flannel) ä¸‹è½½é…ç½®æ–‡ä»¶ wget https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml æ›´æ”¹é…ç½®æ–‡ä»¶ root@kube-master:/var/tmp/0206# diff -u kube-flannel.yml ~/kube-flannel.yml --- kube-flannel.yml 2020-02-06 14:05:30.240084193 +0000 +++ /root/kube-flannel.yml 2020-02-06 08:05:43.654959409 +0000 @@ -169,7 +169,7 @@ serviceAccountName: flannel initContainers: - name: install-cni - image: quay.io/coreos/flannel:v0.11.0-amd64 + image: lizhenliang/flannel:v0.11.0-amd64 command: - cp args: @@ -183,7 +183,7 @@ mountPath: /etc/kube-flannel/ containers: - name: kube-flannel - image: quay.io/coreos/flannel:v0.11.0-amd64 + image: lizhenliang/flannel:v0.11.0-amd64 command: - /opt/bin/flanneld args: å®‰è£…ç½‘ç»œæ’ä»¶ kubectl apply -f kube-flannel.yml æ£€æŸ¥ master çŠ¶æ€(ready ä¸ºæˆåŠŸ) root@kube-master:~# kubectl get nodes NAME STATUS ROLES AGE VERSION kube-master Ready master 6h12m v1.17.3 ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:15:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"åŠ å…¥ node node æ‰§è¡Œä¸‹é¢è„šæœ¬ root@kube-node-1:~# cat k8s-node.sh docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.17.3 docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.1 docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.17.3 k8s.gcr.io/kube-proxy:v1.17.3 docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.1 k8s.gcr.io/pause:3.1 docker rmi registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.17.3 docker rmi registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.1 ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:16:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"node åŠ å…¥é›†ç¾¤ kubeadm join 192.168.1.6.554:6443 --token ekw68p.rzmiyxxviu1pqu80 --discovery-token-ca-cert-hash sha256:45234a6478890244c7ddedb49b88c4aac5a745c277c7221efbcf7d622788f798 ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:17:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"master ä¸Šæ£€æŸ¥é›†ç¾¤çŠ¶æ€ root@kube-master:~# kubectl get nodes NAME STATUS ROLES AGE VERSION kube-master Ready master 6h12m v1.17.3 kube-node-1 Ready \u003cnone\u003e 5h48m v1.17.3 kube-node-2 Ready \u003cnone\u003e 5h44m v1.17.3 root@kube-master:~# kubectl get pods -n kube-system NAME READY STATUS RESTARTS AGE coredns-576cbf47c7-2qq7p 1/1 Running 1 6h18m coredns-576cbf47c7-7xl9z 1/1 Running 1 6h18m etcd-kube-master 1/1 Running 1 6h9m kube-apiserver-kube-master 1/1 Running 1 6h9m kube-controller-manager-kube-master 1/1 Running 1 6h9m kube-flannel-ds-amd64-fzhft 1/1 Running 0 5h55m kube-flannel-ds-amd64-p8cpp 1/1 Running 1 6h10m kube-flannel-ds-amd64-v4688 1/1 Running 1 5h51m kube-proxy-5dnzv 1/1 Running 1 6h18m kube-proxy-hzksv 1/1 Running 1 5h51m kube-proxy-rtwtc 1/1 Running 0 5h55m kube-scheduler-kube-master 1/1 Running 1 6h9m ","date":"2020-02-06","objectID":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/:18:0","tags":["k8sæ­å»º"],"title":"ubuntu1804å›½å†…ä½¿ç”¨kubeadméƒ¨ç½²k8s","uri":"/ubuntu1804%E5%9B%BD%E5%86%85%E4%BD%BF%E7%94%A8kubeadm%E9%83%A8%E7%BD%B2k8s/"},{"categories":["NetBackup"],"content":"NetBackup æµ‹è¯• ","date":"2020-01-02","objectID":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/:0:0","tags":["nbuå¤‡ä»½"],"title":"linux-nbuæµ‹è¯•æŠ¥å‘Š","uri":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/"},{"categories":["NetBackup"],"content":"å®¢æˆ·ç«¯å®‰è£…(ä¾›åº”å•†æš‚æ—¶æä¾›çš„æ–¹æ³•) ä¾›åº”å•†æä¾›å®‰è£…åŒ…(NetBackup_8.2_CLIENTS_debian.tar.gz) Linux ä¸‹éœ€è¦æ‰‹åŠ¨é…ç½® hosts æ–‡ä»¶ client ç«¯æŒ‡å®š master ç«¯ ip 10.1.1.75 C01R7NBU01 master ç«¯æŒ‡å®š client ç«¯ ip 10.1.7.71 nj-zabbix-2-te åœ¨ client ç«¯è§£å‹å‹ç¼©åŒ…å¼€å§‹å®‰è£…(æ¯”è¾ƒç¹ç) ","date":"2020-01-02","objectID":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/:1:0","tags":["nbuå¤‡ä»½"],"title":"linux-nbuæµ‹è¯•æŠ¥å‘Š","uri":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/"},{"categories":["NetBackup"],"content":"å¤‡ä»½ ","date":"2020-01-02","objectID":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/:2:0","tags":["nbuå¤‡ä»½"],"title":"linux-nbuæµ‹è¯•æŠ¥å‘Š","uri":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/"},{"categories":["NetBackup"],"content":"linux æ–‡ä»¶å¤‡ä»½ å°†åˆšè‡ªåŠ¨å‘ç°çš„å®¢æˆ·ç«¯åŠ åˆ°å¯¹åº”çš„ç­–ç•¥ç»„ é…ç½®å¤‡ä»½ç­–ç•¥ç±»å‹(attributes) é…ç½®è‡ªåŠ¨å¤‡ä»½ç­–ç•¥ é…ç½®æ–‡ä»¶å¤‡ä»½è·¯å¾„ ","date":"2020-01-02","objectID":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/:2:1","tags":["nbuå¤‡ä»½"],"title":"linux-nbuæµ‹è¯•æŠ¥å‘Š","uri":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/"},{"categories":["NetBackup"],"content":"mysql å¤‡ä»½(æ— æ³•è¿›è¡Œä¾èµ–è„šæœ¬) master å¦‚ä½•è°ƒç”¨è„šæœ¬ å…¨å¤‡ä»½ å¢é‡å¤‡ä»½ ","date":"2020-01-02","objectID":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/:2:2","tags":["nbuå¤‡ä»½"],"title":"linux-nbuæµ‹è¯•æŠ¥å‘Š","uri":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/"},{"categories":["NetBackup"],"content":"postgresql å¤‡ä»½(æ— æ³•è¿›è¡Œä¾èµ–è„šæœ¬) master å¦‚ä½•è°ƒç”¨è„šæœ¬ å…¨å¤‡ä»½ å¢é‡å¤‡ä»½ ","date":"2020-01-02","objectID":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/:2:3","tags":["nbuå¤‡ä»½"],"title":"linux-nbuæµ‹è¯•æŠ¥å‘Š","uri":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/"},{"categories":["NetBackup"],"content":"redis æ–‡ä»¶å¤‡ä»½(å®˜ç½‘ä¸ºæä¾›å¯ä½¿ç”¨æ–‡ä»¶å¤‡ä»½æ¥å¤‡ä»½) ä½¿ç”¨ linux æ–‡ä»¶å¤‡ä»½ ","date":"2020-01-02","objectID":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/:2:4","tags":["nbuå¤‡ä»½"],"title":"linux-nbuæµ‹è¯•æŠ¥å‘Š","uri":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/"},{"categories":["NetBackup"],"content":"api åŸºç¡€æµ‹è¯• ","date":"2020-01-02","objectID":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/:3:0","tags":["nbuå¤‡ä»½"],"title":"linux-nbuæµ‹è¯•æŠ¥å‘Š","uri":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/"},{"categories":["NetBackup"],"content":"è·å–è®¤è¯ token url=\"https://c01r7nbu01.genscript.com:1556/netbackup/login\" tokenget(){ curl -k -X POST -H 'Content-type: application/vnd.netbackup+json;version=1.0' -d ' { \"userName\":\"root\", \"password\":\"*********\" }' $url } tokenget ","date":"2020-01-02","objectID":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/:3:1","tags":["nbuå¤‡ä»½"],"title":"linux-nbuæµ‹è¯•æŠ¥å‘Š","uri":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/"},{"categories":["NetBackup"],"content":"æ–°å¢å¤‡ä»½æœåŠ¡å™¨ url=\"https://c01r7nbu01.genscript.com:1556/netbackup/config/hosts\" token=\"*************\" curl -k -X POST $url \\ -H 'Content-type: application/vnd.netbackup+json;version=3.0' \\ -H 'Authorization: '$token'' \\ -d '{\"hostName\": \"nj-lab-1-it\"}' ","date":"2020-01-02","objectID":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/:3:2","tags":["nbuå¤‡ä»½"],"title":"linux-nbuæµ‹è¯•æŠ¥å‘Š","uri":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/"},{"categories":["NetBackup"],"content":"æ–°å¢å¤‡ä»½ä»»åŠ¡ url=\"https://c01r7nbu01.genscript.com:1556/netbackup/config/policies/Linux_Bakcup/clients/nj-zabbix-1-te\" token=\"*************\" curl -k -X PUT \\ -H 'Content-type: application/vnd.netbackup+json;version=3.0' \\ -H 'authorization: '$token'' -d ' { \"data\": { \"type\": \"client\", \"id\": \"nj-zabbix-1-te\", \"attributes\": { \"OS\": \"Debian2.6.32\", \"hardware\": \"Linux\" } } }' $url ","date":"2020-01-02","objectID":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/:3:3","tags":["nbuå¤‡ä»½"],"title":"linux-nbuæµ‹è¯•æŠ¥å‘Š","uri":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/"},{"categories":["NetBackup"],"content":"æœªå®Œå¾…ç»­(api è¶³å¤Ÿä¸°å¯Œ)ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ ","date":"2020-01-02","objectID":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/:3:4","tags":["nbuå¤‡ä»½"],"title":"linux-nbuæµ‹è¯•æŠ¥å‘Š","uri":"/linux-nbu%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/"},{"categories":["linux(ğŸ§)"],"content":"èƒŒæ™¯ 40GB(sys)256GB*(data)ï¼Œåˆå¹¶æˆä¸ºä¸€ä¸ª lvm é€»è¾‘åˆ†åŒº ubuntu-root ç›®æ ‡ æœ€å°ä»£ä»·å®ç° lvm æ‰©å®¹ 64GB æ–¹æ³• æ–°å»ºä¸€å— 64GB è™šæ‹Ÿç¡¬ç›˜ï¼Œåˆå¹¶åˆ° ubuntu-root é€»è¾‘åˆ†åŒº ä¼˜ç‚¹ï¼šé£é™©æœ€å° ç¼ºç‚¹ï¼šå¤šä¸€å— 64GB è™šæ‹Ÿç£ç›˜ æ–°å»ºä¸€å— 320GB è™šæ‹Ÿç£ç›˜ï¼Œè½¬ç§»åŸ 256GB æ•°æ®åï¼Œåˆ é™¤ 256GB è™šæ‹Ÿç£ç›˜ ä¼˜ç‚¹ï¼šåªä¿ç•™ä¸€å— 320GB è™šæ‹Ÿç£ç›˜ ç¼ºç‚¹ï¼šä»£ä»·é«˜ å¢åŠ  256GB è™šæ‹Ÿç£ç›˜å®¹é‡ï¼Œç›´æ¥åŠ¨æ€æ‰©å®¹åˆ° 320GB ä¼˜ç‚¹ï¼šæŠ€èƒ½ GET ç¼ºç‚¹ï¼šæœªçŸ¥é£é™©é«˜ æ“ä½œ åœ¨ vClient ä¿®æ”¹è™šæ‹Ÿç£ç›˜ï¼ˆå‡å®šæœª sdbï¼‰çš„å®¹é‡ï¼Œä» 256GB è°ƒæ•´åˆ° 320GB é‡å¯æœåŠ¡å™¨ï¼ˆä¸å»ºè®®ï¼‰ã€æˆ–å¼ºåˆ¶é‡æ–°æ‰«æç£ç›˜ï¼ˆå…·ä½“é‚£ä¸ªå®é™…æœ‰æ•ˆæš‚ä¸æ¸…æ¥šï¼‰ echo 1 \u003e /sys/class/scsi_disk/2:0:0:0/device/rescan echo â€˜- - -â€™ \u003e /sys/class/scsi_host/host2/scan echo 1 \u003e /sys/block/sdb/device/rescan (ç¡®è®¤æœ‰æ•ˆ) partprobe -s åˆ†ä¸¤ç§æƒ…å†µï¼ŒAï¼‰sdb æœªåˆ†åŒºã€ç›´æ¥æ•´ç›˜åŠ å…¥ lvm çš„æƒ…å†µ ç¡®è®¤ sdb ç£ç›˜å®¹é‡å·²å¢åŠ  (fdisk) æ‰§è¡Œ pvresize /dev/sdb å¯¹ LVM çš„ç‰©ç†åˆ†åŒºæ‰©å®¹ å¯¹ LVM çš„é€»è¾‘åˆ†åŒºæ‰©å®¹(ç•¥) ç¬¬äºŒç§æƒ…å†µï¼ŒBï¼‰sdb å·²åˆ†åŒºã€æŸä¸ªï¼ˆäº›ï¼‰åˆ†åŒºåŠ å…¥ lvm çš„æƒ…å†µï¼ˆå‡å¦‚ sdb5ï¼‰ ç¡®è®¤ sdb ç£ç›˜å®¹é‡å·²å¢åŠ  (fdisk) é€šè¿‡ parted /dev/sdb å¯¹ sdb5 åˆ†åŒºæ‰©å®¹ (æ³¨æ„ï¼Œå¦‚æœåˆ†åŒºæ˜¯åœ¨æ‰©å±•åˆ†åŒºä¸­ï¼Œéœ€è¦å…ˆæŠŠæ‰©å±•åˆ†åŒºæ‰©å®¹) root@nj-otter-en-qa:/opt/logstash# parted /dev/sda GNU Parted 2.3 Using /dev/sda Welcome to GNU Parted! Type help'' to view a list of commands. parted)( p Model: VMware Virtual disk (scsi) Disk /dev/sda: 68.7GB Sector size (logical/physical): 512B/512B Partition Table: msdos Number Start End Size Type File system Flags 1 1049kB 256MB 255MB primary ext2 boot 2 257MB 42.9GB 42.7GB extended 5 257MB 42.9GB 42.7GB logical lvm (parted) resizepart 2 End? [68.0GB]? 68.7GB (parted) p Model: VMware Virtual disk (scsi) Disk /dev/sda: 68.7GB Sector size (logical/physical): 512B/512B Partition Table: msdos Number Start End Size Type File system Flags 1 1049kB 256MB 255MB primary ext2 boot 2 257MB 68.7GB 68.4GB extended 5 257MB 42.9GB 42.7GB logical lvm (parted) resizepart 5 End? [42.9GB]? 68.7GB Error: Error informing the kernel about modifications to partition /dev/sda5 -- Invalid argument. This means Linux won't know about any changes you made to /dev/sda5 until you reboot -- so you shouldn't mount it or use it in any way before rebooting. Ignore/Cancel? cancel Error: Partition(s) 5 on /dev/sda have been written, but we have been unable to inform the kernel of the change, probably because it/they are in use. As a result, the old partition(s) will remain in use. You should reboot now before making further changes. Ignore/Cancel? Cancel (parted) p Model: VMware Virtual disk (scsi) Disk /dev/sda: 68.7GB Sector size (logical/physical): 512B/512B Partition Table: msdos Number Start End Size Type File system Flags 1 1049kB 256MB 255MB primary ext2 boot 2 257MB 68.7GB 68.4GB extended 5 257MB 68.7GB 68.4GB logical lvm æ‰§è¡Œ pvresize /dev/sdb5 å¯¹ LVM çš„ç‰©ç†åˆ†åŒºæ‰©å®¹ å¯¹ LVM çš„é€»è¾‘åˆ†åŒºæ‰©å®¹(ç•¥) ","date":"2019-11-06","objectID":"/vmware-linux%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/:0:0","tags":["lvm"],"title":"Vmware-linuxè™šæ‹Ÿæœºçš„ç£ç›˜æ‰©å®¹","uri":"/vmware-linux%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/"},{"categories":["é”®ç›˜(âŒ¨)"],"content":"åœºæ™¯ è€æ˜¯å¿ƒæ°´ä¼˜è”è¶…å¼ºçš„ç»­èˆªï¼Œå¯»æ€æ•´ä¸€ä¸ªä¼˜è”ä¸»æ§çš„é”®ç›˜ï¼Œç°æ˜¯é¢ä¸Šæœ‰ k230ã€k270ã€k375s ä¸»æ§ï¼Œ åœ¨è¿™é‡Œæˆ‘é€‰æ‹©äº† k230 ä¸»æ§ï¼Œæ¯•ç«Ÿæˆ‘å¯¹è“ç‰™æ²¡æœ‰éœ€æ±‚ï¼Œåœ¨è¿™é‡Œå°±ä¸æ¼”ç¤ºå¦‚ä½•ç»„è£…ä¸€æŠŠä¼˜è”æœºæ¢°é”® é”®ç›˜äº†ï¼Œæ¼”ç¤ºä¸‹ Linux ä¸‹å¦‚ä½•å¯¹ u2u åˆ·å›ºä»¶ï¼Œæ¯•ç«Ÿä¼˜è”çš„ fn é”®å¾ˆå¼±é¸¡ã€‚ u2u ä»‹ç» u2u æ˜¯githubä¸Šçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ˜¯å¯¹æ™®é€šé”®ç›˜é”®ä½æ›´æ”¹ï¼Œå®ç°å¤šå±‚å’Œå®ã€‚ u2u å¦‚ä½•åˆ·å›ºä»¶ åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä»¥ä¸‹ 2 ä¸ªç½‘ç«™kle å’Œtkg kle æ˜¯ç”¨æ¥ç”Ÿæˆé”®ç›˜é…åˆ—ï¼Œtkg ä½¿ç”¨æ¥æ—¶ç”Ÿæˆå›ºä»¶å’Œåˆ·å†™å›ºä»¶çš„ï¼Œå°†ä½ çš„é”®ç›˜é…åˆ—åœ¨ kle ä¸Šç”»å¥½ï¼Œè¯´ä¸‹å„ä¸ªå±‚çš„ä½œç”¨ï¼ŒåŸå§‹å±‚å¿…é¡»å’Œä½ çš„ä¼˜è”é”®ç›˜é”®ä½ä¸€è‡´(æˆ‘æ”¹çš„ 84 é”®ç›˜æ‰€ä»¥é…åˆ—å°±æ˜¯ç½‘ç«™ä¸Šçš„å‡¯é…· 84 æ”¹çš„)ï¼Œç¬¬ 0 å±‚æ˜¯ä½ æ¥ä¸Šç”µè„‘æ—¶æ˜¾ç¤ºçš„é‚£ä¸€å±‚ï¼Œç¬¬ 1 å±‚æ˜¯ä½ å®šä¹‰çš„ fn1 çš„ç¬¬ä¸€å±‚ï¼Œç¬¬ 2 å±‚ä¾æ¬¡ç±»æ¨ã€‚ ","date":"2019-09-27","objectID":"/%E4%BC%98%E8%81%94k230%E4%BD%BF%E7%94%A8usb2usb/:0:0","tags":["Unifying"],"title":"ä¼˜è”k230ä½¿ç”¨usb2usb","uri":"/%E4%BC%98%E8%81%94k230%E4%BD%BF%E7%94%A8usb2usb/"},{"categories":["é”®ç›˜(âŒ¨)"],"content":"ä½¿ç”¨ kle ä¿®æ”¹é…åˆ— ä¼˜è” 84 åŸå§‹å±‚ k230 ä¼˜è” 84 ç¬¬ 0 å±‚ k2300 ä¼˜è” 84 ç¬¬ 1 å±‚ k2301 ","date":"2019-09-27","objectID":"/%E4%BC%98%E8%81%94k230%E4%BD%BF%E7%94%A8usb2usb/:1:0","tags":["Unifying"],"title":"ä¼˜è”k230ä½¿ç”¨usb2usb","uri":"/%E4%BC%98%E8%81%94k230%E4%BD%BF%E7%94%A8usb2usb/"},{"categories":["é”®ç›˜(âŒ¨)"],"content":"ä½¿ç”¨ tkg åˆ·å›ºä»¶ å°†åŸå§‹å±‚å¡«å…¥è®¾å®šä¸­ å°†ç¬¬ 0 å±‚å’Œç¬¬ä¸€å±‚å¡«å…¥å±‚ä¸­ fn è®¾å®š ä¼˜è” 84 çš„åŸå§‹ fn é”®æ˜¯å¤šåª’ä½“æŒ‰é”®ï¼Œåœ¨è¿™é‡Œæˆ‘è®¾ç½® fn0 ç»™åŸ fn å¹¶ä¸åšä»»ä½•æ“ä½œï¼Œè®¾ç½® space é”®ä¸º fn1 é”®å¹¶ä¿ç•™ç©ºæ ¼é”®åŠŸèƒ½ã€‚ chrome å®‰è£… TKG Chrome App æ’ä»¶ å¬è¯´ windows ä¸‹è¦å®‰å…¨é©±åŠ¨ï¼Ÿï¼Ÿï¼Ÿï¼Ÿlinux ä¸å­˜åœ¨çš„(æœ‰ avr ç¼–ç¨‹ç¯å¢ƒå°±è¡Œ) æŒ‰ä¸‹åˆ·æœºé”®å°±å¼€å§‹çƒ§å†™å§ï¼ å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ avrdude åˆ· ","date":"2019-09-27","objectID":"/%E4%BC%98%E8%81%94k230%E4%BD%BF%E7%94%A8usb2usb/:2:0","tags":["Unifying"],"title":"ä¼˜è”k230ä½¿ç”¨usb2usb","uri":"/%E4%BC%98%E8%81%94k230%E4%BD%BF%E7%94%A8usb2usb/"},{"categories":["GO"],"content":"å‰è¨€ é—²ç€æ²¡äº‹ï¼Œçœ‹ python ä¸çˆ½ï¼Œå†³å®šé‡æ„ mutt-lday.py å®ç° viper è¯»å–é…ç½®æ–‡ä»¶ ldap è§£æé…ç½®æ–‡ä»¶ ","date":"2019-09-10","objectID":"/ldap%E6%90%9C%E7%B4%A2/:0:0","tags":["neomutt"],"title":"ldapæœç´¢","uri":"/ldap%E6%90%9C%E7%B4%A2/"},{"categories":["GO"],"content":"ä»£ç å®ç° // Package main provides ... package main import ( \"fmt\" \"os\" log \"github.com/sirupsen/logrus\" \"github.com/spf13/viper\" \"gopkg.in/ldap.v2\" ) type connection struct { Server string `json:\"server\"` Port int `json:\"port\"` Basedn string `json:\"basedn\"` } type auth struct { User string `json:\"user\"` Password string `json:\"password\"` } type result struct { OptionalColumn string `json:\"optionalcolumn\"` } type searchConfig struct { Connection connection `json:\"connection\"` Auth auth `json:\"auth\"` Result result `json:\"result\"` } type searchResult struct { Mail string Name string } var matchAttributes = []string{\"uid\", \"cn\"} var displayAttributes = []string{\"mail\", \"cn\"} func (conf *searchConfig) init() { viper.SetConfigName(\"mutt-ldap\") viper.SetConfigType(\"json\") viper.AddConfigPath(\"./\") viper.AddConfigPath(\"~/.config/\") if err := viper.ReadInConfig(); err != nil { log.Fatalf(\"Error reading config file, %s\", err) } if err := viper.Unmarshal(conf); err != nil { log.Fatalf(\"unable to decode into struct, %v\", err) } log.Tracef(\"searchConfig.connection %v\", conf.Connection) log.Tracef(\"searchConfig.auth %v\", conf.Auth) log.Tracef(\"searchConfig.result %v\", conf.Result) } func searchLdap(conf *searchConfig, term string) ([]searchResult, error) { filter := \"(\u0026(|\" for _, attr := range matchAttributes { filter = fmt.Sprintf(\"%s(%s=*%s*)\", filter, attr, term) } filter = fmt.Sprintf(\"%s)(mail=*))\", filter) conn, err := ldap.Dial(\"tcp\", fmt.Sprintf(\"%s:%d\", conf.Connection.Server, conf.Connection.Port)) if err != nil { log.Fatalf(\"Conn to server fail, %s\", err) } defer conn.Close() if err := conn.Bind(conf.Auth.User, conf.Auth.Password); err != nil { log.Fatalf(\"Bind to server fail, %s\", err) } searchresult := ldap.NewSearchRequest(conf.Connection.Basedn, ldap.ScopeWholeSubtree, ldap.NeverDerefAliases, 0, 0, false, filter, displayAttributes, nil) sr, err := conn.Search(searchresult) if err != nil { log.Fatalf(\"search error, %s\", err) } res := make([]searchResult, len(sr.Entries)) for idx, entry := range sr.Entries { res[idx].Mail = entry.GetAttributeValue(\"mail\") res[idx].Name = entry.GetAttributeValue(\"cn\") } return res, nil } func printResult(ldapRes []searchResult) { for _, entry := range ldapRes { fmt.Printf(\"%s\\t%s\\n\", entry.Mail, entry.Name) } } func main() { if len(os.Args) \u003c 2 { fmt.Println(\"usage:error\") os.Exit(0) } var c searchConfig c.init() ldapRes, err := searchLdap(\u0026c, os.Args[1]) if err != nil { log.Fatal(err) os.Exit(1) } printResult(ldapRes) } ","date":"2019-09-10","objectID":"/ldap%E6%90%9C%E7%B4%A2/:1:0","tags":["neomutt"],"title":"ldapæœç´¢","uri":"/ldap%E6%90%9C%E7%B4%A2/"},{"categories":["GO"],"content":"json æ–‡ä»¶é…ç½® ï¼ ~/go/src/day_test 15:08:27 ï€— ï‘ ï‘ ï‘ cat mutt-ldap.json { \"connection\": { \"server\": \"*********\", \"port\": \"389\", \"basedn\": \"DC=********,DC=com\" }, \"auth\": { \"user\": \"*******\", \"password\": \"*********\" }, \"result\": { \"optionalcolumn\": \"sAMAccountName\" } } ","date":"2019-09-10","objectID":"/ldap%E6%90%9C%E7%B4%A2/:2:0","tags":["neomutt"],"title":"ldapæœç´¢","uri":"/ldap%E6%90%9C%E7%B4%A2/"},{"categories":["linux(ğŸ§)"],"content":"åœºæ™¯ å¼€å‘äººå‘˜ç»™å®šæ•°æ®è·¯å¾„ï¼Œä½¿ç”¨ exel æ˜¾ç¤ºï¼Œå°† exel è½¬åŒ–ä¸º csvã€‚ æ–¹æ³• æ‰¹é‡å¯¼å‡ºè„šæœ¬ #!/bin/bash while read line; do ROOM=$(echo $line | awk -F',' '{print $3\"/\"$1\"/\"$1\"_\"$4}') TARGET=$(echo $line | awk -F',' '{print $9}') LINK_NAME=$(echo $line | awk -F',' '{print $8}') if [[ -e $TARGET ]]; then /bin/mkdir -p \"$ROOM\" /bin/ln -bv -sf \"$TARGET\" \"$ROOM/$LINK_NAME\" fi done \u003c\u003c\u003c \"$(tail -n +2 foo02.csv)\" æ‰¹é‡æ‰“åŒ… ls -1 | xargs -I{} zip -r \"{}.zip\" {} find 2016/ -name \"*.zip\" -exec mv {} /var/tmp/0415/gsk/2016/ \\; ","date":"2019-08-27","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%B9%E9%87%8F%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE/:0:0","tags":["å¯¼å‡ºæ•°æ®"],"title":"è®°ä¸€æ¬¡æ‰¹é‡å¯¼å‡ºæ•°æ®","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%B9%E9%87%8F%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE/"},{"categories":["GO"],"content":"åˆ‡ç‰‡ ","date":"2019-08-20","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/:0:0","tags":["åˆ‡ç‰‡"],"title":"ä»é›¶å¼€å§‹å­¦Golang-åˆ‡ç‰‡","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/"},{"categories":["GO"],"content":"åˆ‡ç‰‡çš„å®šä¹‰ åˆ‡ç‰‡çš„å£°æ˜ var name []T name:å˜é‡å T:å˜é‡ç±»å‹ ","date":"2019-08-20","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/:1:0","tags":["åˆ‡ç‰‡"],"title":"ä»é›¶å¼€å§‹å­¦Golang-åˆ‡ç‰‡","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/"},{"categories":["GO"],"content":"åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡ åˆ‡ç‰‡æ‹¥æœ‰è‡ªå·±çš„é•¿åº¦å’Œå®¹é‡ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®çš„ len()å‡½æ•°æ±‚é•¿åº¦ï¼Œä½¿ç”¨å†…ç½®çš„ cap()å‡½æ•°æ±‚åˆ‡ç‰‡çš„å®¹é‡ã€‚ ","date":"2019-08-20","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/:2:0","tags":["åˆ‡ç‰‡"],"title":"ä»é›¶å¼€å§‹å­¦Golang-åˆ‡ç‰‡","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/"},{"categories":["GO"],"content":"åŸºäºæ•°ç»„å®šä¹‰åˆ‡ç‰‡ ç”±äºåˆ‡ç‰‡çš„åº•å±‚å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºæ•°ç»„å®šä¹‰åˆ‡ç‰‡ã€‚ func main() { //åŸºäºæ•°ç»„å®šä¹‰åˆ‡ç‰‡ a := [5]int{55,56,57,58,59} b := a[1:4] fmt.Println(b) fmt.Println(\"type of b:%T\\n\",b) } /* c := a[1:] [56,57,58,59] d := a[:4] [55,56,57] e := a[:] [å…¨éƒ½è¦] */ ","date":"2019-08-20","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/:3:0","tags":["åˆ‡ç‰‡"],"title":"ä»é›¶å¼€å§‹å­¦Golang-åˆ‡ç‰‡","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/"},{"categories":["GO"],"content":"åˆ‡ç‰‡å†åˆ‡ç‰‡ func main() { //åˆ‡ç‰‡å†åˆ‡ç‰‡ a := [...]string{\"åŒ—äº¬\", \"ä¸Šæµ·\", \"å¹¿å·\", \"æ·±åœ³\", \"æˆéƒ½\", \"é‡åº†\"} fmt.Printf(\"a:%v type:%T len:%d cap:%d\\n\", a, a, len(a), cap(a)) b := a[1:3] fmt.Printf(\"b:%v type:%T len:%d cap:%d\\n\", b, b, len(b), cap(b)) c := b[1:5] fmt.Printf(\"c:%v type:%T len:%d cap:%d\\n\", c, c, len(c), cap(c)) } ","date":"2019-08-20","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/:4:0","tags":["åˆ‡ç‰‡"],"title":"ä»é›¶å¼€å§‹å­¦Golang-åˆ‡ç‰‡","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/"},{"categories":["GO"],"content":"ä½¿ç”¨make()å‡½æ•°æ„é€ åˆ‡ç‰‡ è¯­æ³•ï¼š make([]T,size,cap) T:åˆ‡ç‰‡çš„å…ƒç´ ç±»å‹ size:åˆ‡ç‰‡é•¿åº¦ï¼ˆå…ƒç´ æ•°é‡ï¼‰ cap:åˆ‡ç‰‡çš„å®¹é‡ ","date":"2019-08-20","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/:5:0","tags":["åˆ‡ç‰‡"],"title":"ä»é›¶å¼€å§‹å­¦Golang-åˆ‡ç‰‡","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/"},{"categories":["GO"],"content":"åˆ‡ç‰‡çš„æœ¬è´¨ åˆ‡ç‰‡çš„æœ¬è´¨å°±æ˜¯å¯¹åº•å±‚æ•°ç»„çš„å°è£…ï¼Œå®ƒåŒ…å«äº†ä¸‰ä¸ªä¿¡æ¯ï¼šåº•å±‚æ•°ç»„çš„æŒ‡é’ˆã€åˆ‡ç‰‡çš„é•¿åº¦ï¼ˆlenï¼‰å’Œåˆ‡ç‰‡çš„å®¹é‡ï¼ˆcapï¼‰ã€‚ ","date":"2019-08-20","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/:6:0","tags":["åˆ‡ç‰‡"],"title":"ä»é›¶å¼€å§‹å­¦Golang-åˆ‡ç‰‡","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/"},{"categories":["GO"],"content":"ä½¿ç”¨ append() å‘åˆ‡ç‰‡å†…æ·»åŠ å…ƒç´  func main() { //append()æ·»åŠ å…ƒç´ å’Œåˆ‡ç‰‡æ‰©å®¹ var numSlice []int for i := 0; i \u003c 10; i++ { numSlice = append(numSlice, i) fmt.Printf(\"%v len:%d cap:%d ptr:%p\\n\", numSlice, len(numSlice), cap(numSlice), numSlice) } } ","date":"2019-08-20","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/:7:0","tags":["åˆ‡ç‰‡"],"title":"ä»é›¶å¼€å§‹å­¦Golang-åˆ‡ç‰‡","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/"},{"categories":["GO"],"content":"åˆ‡ç‰‡çš„èµ‹å€¼å’Œæ‹·è´ åˆ‡ç‰‡çš„èµ‹å€¼å®é™…éƒ½æ˜¯æŒ‡å‘äº†åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œä¿®æ”¹ä¸€ä¸ªåˆ‡ç‰‡çš„å€¼å¦ä¸€ä¸ªä¹Ÿä¼šè·Ÿç€æ›´æ”¹ã€‚ åˆ‡ç‰‡çš„æ‹·è´ä½¿ç”¨copy()å‡½æ•° è¯­æ³•ï¼š copy(destSlice, srcSlice []T) srcSlice: æ•°æ®æ¥æºåˆ‡ç‰‡ destSlice: ç›®æ ‡åˆ‡ç‰‡ ","date":"2019-08-20","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/:8:0","tags":["åˆ‡ç‰‡"],"title":"ä»é›¶å¼€å§‹å­¦Golang-åˆ‡ç‰‡","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/"},{"categories":["GO"],"content":"åˆ‡ç‰‡çš„éå† ä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä½¿ç”¨for rangeéå† func main() { s := []int{1, 3, 5} for i := 0; i \u003c len(s); i++ { fmt.Println(i, s[i]) } for index, value := range s { fmt.Println(index, value) } } æ³¨æ„ åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ‡ç‰‡èµ‹å€¼å®é™…éƒ½æ˜¯æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ ","date":"2019-08-20","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/:9:0","tags":["åˆ‡ç‰‡"],"title":"ä»é›¶å¼€å§‹å­¦Golang-åˆ‡ç‰‡","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%88%87%E7%89%87/"},{"categories":["dotfileé…ç½®"],"content":"åœºæ™¯ vim ç”¨ä¹…äº†æ€»æƒ³ç”¨ vim æ¥ç¼–è¾‘é‚®ä»¶ï¼Œå¯æ˜¯å…¬å¸çš„é‚®ç®±æ˜¯ exchange å¾ˆå¤´ç–¼ï¼Œå¥½åœ¨æœ€åæ‰¾åˆ°äº† davmail è¿™ä¹ˆä¸ªç©æ„ã€‚ davmail é…ç½®é‚®ä»¶äº¤æ¢ ","date":"2019-08-19","objectID":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/:0:0","tags":["é‚®ä»¶å®¢æˆ·ç«¯"],"title":"neomutt+procmail+fetchmail+msmtpé…ç½®exchangeé‚®ç®±","uri":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/"},{"categories":["dotfileé…ç½®"],"content":"ä¸‹è½½ ä¸ªäººä¸å¤ªå–œæ¬¢å›¾å½¢ç•Œé¢ï¼Œæ‰€ä»¥ç›´æ¥ç”¨ davmail server ç‰ˆ ä¸‹è½½åœ°å€ å¦‚æœä¸èƒ½ä¸‹è½½è¯·è‡ªè¡Œçˆ¬å¢™ ","date":"2019-08-19","objectID":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/:1:0","tags":["é‚®ä»¶å®¢æˆ·ç«¯"],"title":"neomutt+procmail+fetchmail+msmtpé…ç½®exchangeé‚®ç®±","uri":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/"},{"categories":["dotfileé…ç½®"],"content":"é…ç½® /etc/davmail.properties # DavMail settings, see http://davmail.sourceforge.net/ for documentation ############################################################# # Basic settings # Server or workstation mode davmail.server=true # connection mode auto, EWS or WebDav davmail.enableEws=true # base Exchange OWA or EWS url davmail.url=https://******å…¬å¸é‚®ä»¶æœåŠ¡å™¨åœ°å€******/EWS/Exchange.asmx # Listener ports davmail.caldavPort=1080 davmail.imapPort=1143 davmail.ldapPort=1389 davmail.popPort=1110 davmail.smtpPort=1025 ############################################################# # Network settings # Network proxy settings davmail.enableProxy=false davmail.useSystemProxies=false davmail.proxyHost= davmail.proxyPort= davmail.proxyUser= davmail.proxyPassword= # proxy exclude list davmail.noProxyFor= # allow remote connection to DavMail davmail.allowRemote=false # bind server sockets to a specific address davmail.bindAddress= # client connections SO timeout in seconds davmail.clientSoTimeout= # DavMail listeners SSL configuration davmail.ssl.keystoreType= davmail.ssl.keystoreFile= davmail.ssl.keystorePass= davmail.ssl.keyPass= # Accept specified certificate even if invalid according to trust store davmail.server.certificate.hash= # disable SSL for specified listeners davmail.ssl.nosecurecaldav=false davmail.ssl.nosecureimap=false davmail.ssl.nosecureldap=false davmail.ssl.nosecurepop=false davmail.ssl.nosecuresmtp=false # disable update check davmail.disableUpdateCheck=false # Send keepalive character during large folder and messages download davmail.enableKeepAlive=false # Message count limit on folder retrieval davmail.folderSizeLimit=0 # Default windows domain for NTLM and basic authentication davmail.defaultDomain= ############################################################# # Caldav settings # override default alarm sound davmail.caldavAlarmSound= # retrieve calendar events not older than 90 days davmail.caldavPastDelay=90 # WebDav only: force event update to trigger ActiveSync clients update davmail.forceActiveSyncUpdate=false ############################################################# # IMAP settings # Delete messages immediately on IMAP STORE \\Deleted flag davmail.imapAutoExpunge=true # Enable IDLE support, set polling delay in minutes davmail.imapIdleDelay= # Always reply to IMAP RFC822.SIZE requests with Exchange approximate message size for performance reasons davmail.imapAlwaysApproxMsgSize= ############################################################# # POP settings # Delete messages on server after 30 days davmail.keepDelay=30 # Delete messages in server sent folder after 90 days davmail.sentKeepDelay=90 # Mark retrieved messages read on server davmail.popMarkReadOnRetr=false ############################################################# # SMTP settings # let Exchange save a copy of sent messages in Sent folder davmail.smtpSaveInSent=true ############################################################# # Loggings settings # log file path, leave empty for default path davmail.logFilePath=/var/log/davmail.log # maximum log file size, use Log4J syntax, set to 0 to use an external rotation mechanism, e.g. logrotate davmail.logFileSize=1MB # log levels log4j.logger.davmail=WARN log4j.logger.httpclient.wire=WARN log4j.logger.org.apache.commons.httpclient=WARN log4j.rootLogger=WARN ############################################################# # Workstation only settings # smartcard access settings davmail.ssl.pkcs11Config= davmail.ssl.pkcs11Library= # SSL settings for mutual authentication davmail.ssl.clientKeystoreType= davmail.ssl.clientKeystoreFile= davmail.ssl.clientKeystorePass= # disable all balloon notifications davmail.disableGuiNotifications=false # disable startup balloon notifications davmail.showStartupBanner=true # enable transparent client Kerberos authentication davmail.enableKerberos=false ä½¿ç”¨ supervisor å°† davmail å®ˆæŠ¤èµ·æ¥(ä½¿ç”¨ aptã€yumã€pacman ç›´æ¥å®‰è£…) ç¼–è¾‘/etc/supervisor.d/davmail.ini [program:DavMail] command=/opt/davmail/davmail.sh /","date":"2019-08-19","objectID":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/:2:0","tags":["é‚®ä»¶å®¢æˆ·ç«¯"],"title":"neomutt+procmail+fetchmail+msmtpé…ç½®exchangeé‚®ç®±","uri":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/"},{"categories":["dotfileé…ç½®"],"content":"å®‰è£… ä¸åœ¨èµ˜è¿°ï¼ˆaptã€yumã€pacmanï¼‰ç›´æ¥å®‰è£… ","date":"2019-08-19","objectID":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/:3:0","tags":["é‚®ä»¶å®¢æˆ·ç«¯"],"title":"neomutt+procmail+fetchmail+msmtpé…ç½®exchangeé‚®ç®±","uri":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/"},{"categories":["dotfileé…ç½®"],"content":"é…ç½® ~/.fetchmailrc ï¼ˆæ²¡æœ‰å°±è‡ªå·±åˆ›å»ºä¸€ä¸ªï¼‰ defaults mda \"/usr/bin/procmail -d %T\" set idfile /home/luwenzheng/Maildir/.fetchids\"\" set no bouncemail set postmaster \"luwenzheng\" poll 127.0.0.1 with protocol imap port 1143 uidl username \"luwenzheng@genscript.com\" there with password \"********\" is 'luwenzheng' here options keep promail è¿‡æ»¤é‚®ä»¶ ","date":"2019-08-19","objectID":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/:4:0","tags":["é‚®ä»¶å®¢æˆ·ç«¯"],"title":"neomutt+procmail+fetchmail+msmtpé…ç½®exchangeé‚®ç®±","uri":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/"},{"categories":["dotfileé…ç½®"],"content":"å®‰è£… ä¸åœ¨èµ˜è¿°ï¼ˆaptã€yumã€pacmanï¼‰ç›´æ¥å®‰è£… ","date":"2019-08-19","objectID":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/:5:0","tags":["é‚®ä»¶å®¢æˆ·ç«¯"],"title":"neomutt+procmail+fetchmail+msmtpé…ç½®exchangeé‚®ç®±","uri":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/"},{"categories":["dotfileé…ç½®"],"content":"é…ç½® ~/.procmailrc (æ²¡æœ‰å°±è‡ªå·±åˆ›å»ºä¸€ä¸ª) MAILDIR=/home/luwenzheng/Maildir #é‚®ä»¶å­˜å‚¨åœ°å€ DEFAULT=$MAILDIR/inbox #é»˜è®¤ï¼šæ”¶ä»¶ç®± VERBOSE=off LOGFILE=/var/log/Mail/procmail.log # æŸä¸ªåƒåœ¾é‚®ä»¶è§„åˆ™ :0 * ^From: webmaster@st\\.zju\\.edu\\.cn /dev/null #åƒåœ¾æ–‡ä»¶çš„å­˜å‚¨ä½ç½® # å…¶å®ƒæ‰€æœ‰éƒ½å­˜åˆ°æ”¶ä»¶ç®±ä¸­ :0: inbox/ procmail ä¸­çš„è·¯å¾„éœ€è¦è‡ªå·±åˆ›å»º æ¥ä¸‹æ¥ä½ å°±å¯ä»¥ä½¿ç”¨ fetchmail -a æ”¶å–å…¨éƒ¨é‚®ä»¶äº† mstmp å‘é€é‚®ä»¶ ","date":"2019-08-19","objectID":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/:6:0","tags":["é‚®ä»¶å®¢æˆ·ç«¯"],"title":"neomutt+procmail+fetchmail+msmtpé…ç½®exchangeé‚®ç®±","uri":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/"},{"categories":["dotfileé…ç½®"],"content":"å®‰è£… ä¸åœ¨èµ˜è¿°ï¼ˆaptã€yumã€pacmanï¼‰ç›´æ¥å®‰è£… ","date":"2019-08-19","objectID":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/:7:0","tags":["é‚®ä»¶å®¢æˆ·ç«¯"],"title":"neomutt+procmail+fetchmail+msmtpé…ç½®exchangeé‚®ç®±","uri":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/"},{"categories":["dotfileé…ç½®"],"content":"é…ç½® ~/.mstmprc ï¼ˆæ²¡æœ‰å°±è‡ªå·±åˆ›å»ºä¸€ä¸ªï¼‰ defaults logfile /home/luwenzheng/Maildir/msmtp.log account genscript host 127.0.0.1 from luwenzheng@genscript.com user luwenzheng password ******** port 1025 auth plain account default:genscript neomutt ï¼ˆé‚®ä»¶å®¢æˆ·ç«¯ï¼‰ ","date":"2019-08-19","objectID":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/:8:0","tags":["é‚®ä»¶å®¢æˆ·ç«¯"],"title":"neomutt+procmail+fetchmail+msmtpé…ç½®exchangeé‚®ç®±","uri":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/"},{"categories":["dotfileé…ç½®"],"content":"å®‰è£… ä¸åœ¨èµ˜è¿°ï¼ˆaptã€yumã€pacmanï¼‰ç›´æ¥å®‰è£… ","date":"2019-08-19","objectID":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/:9:0","tags":["é‚®ä»¶å®¢æˆ·ç«¯"],"title":"neomutt+procmail+fetchmail+msmtpé…ç½®exchangeé‚®ç®±","uri":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/"},{"categories":["dotfileé…ç½®"],"content":"é…ç½® ~/.config/neomutt è·¯å¾„ä¸‹æœ‰å¤§é‡é…ç½®æ–‡ä»¶ï¼Œå„ç±»ä¸ªæ€§è¯å®šåˆ¶è¯¦ç»†é…ç½®è¯·æŸ¥çœ‹æˆ‘çš„ dotfile ","date":"2019-08-19","objectID":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/:10:0","tags":["é‚®ä»¶å®¢æˆ·ç«¯"],"title":"neomutt+procmail+fetchmail+msmtpé…ç½®exchangeé‚®ç®±","uri":"/neomutt-procmail-fetchmail-msmtp%E9%85%8D%E7%BD%AEexchange%E9%82%AE%E7%AE%B1/"},{"categories":["linux(ğŸ§)"],"content":"åœºæ™¯ æ¯ä¸ªæœˆå†…æ ¸éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œå¯¼è‡´/boot æ»¡éœ€è¦æ‰‹åŠ¨æ¸…ç†ï¼Œäºæ˜¯å¿ä¸äº†ç¦ç”¨å†…æ ¸æ›´æ–° æ–¹æ³• ä¿®æ”¹/etc/apt/apt.conf.d/50unattended-upgrades root@nj-app-bfin-edoc-qa:/etc/apt/apt.conf.d# diff -u /var/tmp/0701/50unattended-upgrades 50unattended-upgrades --- /var/tmp/0701/50unattended-upgrades 2017-07-16 21:31:51.358164036 +0800 +++ 50unattended-upgrades 2019-07-01 10:25:09.830049417 +0800 @@ -14,6 +14,7 @@ // List of packages to not update (regexp are supported) Unattended-Upgrade::Package-Blacklist { + \"linux-.*?-generic\"; // \"vim\"; // \"libc6\"; // \"libc6-dev\"; ","date":"2019-08-19","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1ubuntu%E7%A6%81%E7%94%A8%E5%86%85%E6%A0%B8%E6%9B%B4%E6%96%B0/:0:0","tags":["ç¦ç”¨å†…æ ¸æ›´æ–°"],"title":"è®°ä¸€æ¬¡ubuntuç¦ç”¨å†…æ ¸æ›´æ–°","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1ubuntu%E7%A6%81%E7%94%A8%E5%86%85%E6%A0%B8%E6%9B%B4%E6%96%B0/"},{"categories":["GO"],"content":"åŸºæœ¬æ•°æ®ç±»å‹ ","date":"2019-08-19","objectID":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:0:0","tags":["GolangåŸºæœ¬æ•°æ®ç±»å‹"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹","uri":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["GO"],"content":"æ•´å‹ ç±»å‹ æè¿° uint8 æ— ç¬¦å· 8 ä½æ•´å‹(0 åˆ° 255) uint16 æ— ç¬¦å· 16 ä½æ•´å‹(0 åˆ° 255) uint32 æ— ç¬¦å· 32 ä½æ•´å‹(0 åˆ° 255) uint64 æ— ç¬¦å· 64 ä½æ•´å‹(0 åˆ° 255) int8 æœ‰ç¬¦å· 8 ä½æ•´å‹(-128 åˆ° 127) int16 æœ‰ç¬¦å· 16 ä½æ•´å‹(-128 åˆ° 127) int32 æœ‰ç¬¦å· 32 ä½æ•´å‹(-128 åˆ° 127) int64 æœ‰ç¬¦å· 32 ä½æ•´å‹(-128 åˆ° 127) ","date":"2019-08-19","objectID":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:1:0","tags":["GolangåŸºæœ¬æ•°æ®ç±»å‹"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹","uri":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["GO"],"content":"ç‰¹æ®Šæ•´å‹ ç±»å‹ æè¿° uint 32 ä½æ“ä½œç³»ç»Ÿä¸Šå°±æ˜¯ uint32ï¼Œ64 ä½æ“ä½œç³»ç»Ÿå°±æ˜¯ uint64 int 32 ä½æ“ä½œç³»ç»Ÿä¸Šå°±æ˜¯ int32ï¼Œ64 ä½æ“ä½œç³»ç»Ÿå°±æ˜¯ int64 uintptr æ— ç¬¦å·æ•´å‹ï¼Œç”¨äºå­˜æ”¾ä¸€ä¸ªæŒ‡é’ˆ ","date":"2019-08-19","objectID":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:2:0","tags":["GolangåŸºæœ¬æ•°æ®ç±»å‹"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹","uri":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["GO"],"content":"æµ®ç‚¹å‹ ç±»å‹ æè¿° float32 æœ€å¤§èŒƒå›´çº¦ä¸º 3.4e38ï¼Œå¯ä»¥ä½¿ç”¨å¸¸é‡å®šä¹‰ float64 æœ€å¤§èŒƒå›´çº¦ä¸º 1.8e308ï¼Œå¯ä»¥ä½¿ç”¨å¸¸é‡å®šä¹‰ ","date":"2019-08-19","objectID":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:3:0","tags":["GolangåŸºæœ¬æ•°æ®ç±»å‹"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹","uri":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["GO"],"content":"å¸ƒå°”ç±»å‹ ç±»å‹ æè¿° true çœŸ false å‡ ","date":"2019-08-19","objectID":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:4:0","tags":["GolangåŸºæœ¬æ•°æ®ç±»å‹"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹","uri":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["GO"],"content":"å­—ç¬¦ä¸²è½¬ä¹‰å­—ç¬¦ è½¬ä¹‰ç¬¦ å«ä¹‰ \\r å›è½¦ç¬¦ï¼ˆè¿”å›è¡Œé¦–ï¼‰ \\n æ¢è¡Œç¬¦ï¼ˆç›´æ¥è·³åˆ°ä¸‹ä¸€è¡Œçš„åŒåˆ—ä½ç½®ï¼‰ \\t åˆ¶è¡¨ç¬¦ ' å•å¼•å· \" åŒå¼•å· \\ åæ–œæ  ","date":"2019-08-19","objectID":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:5:0","tags":["GolangåŸºæœ¬æ•°æ®ç±»å‹"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹","uri":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["GO"],"content":"å¤šè¡Œå­—ç¬¦ä¸² Go è¯­è¨€ä¸­è¦å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²æ—¶ï¼Œå¿…é¡»ä½¿ç”¨`` sl :=`ç¬¬ä¸€è¡Œ ç¬¬äºŒè¡Œ ç¬¬ä¸‰è¡Œ ` ","date":"2019-08-19","objectID":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:6:0","tags":["GolangåŸºæœ¬æ•°æ®ç±»å‹"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹","uri":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["GO"],"content":"å­—ç¬¦ä¸²çš„å¸¸ç”¨æ“ä½œ æ–¹æ³• ä»‹ç» len(str) æ±‚é•¿åº¦ + æ‹¼æ¥å­—ç¬¦ä¸² strings.Split åˆ†å‰² strings.contains åˆ¤æ–­æ˜¯å¦åŒ…å« strings.HasPrefix,strings.HasSuffix å‰åç¼€åˆ¤æ–­ strings.Index(),strings.LastIndex() å­—ç¬¦ä¸²å‡ºç°çš„ä½ç½® strings.Join(a[]string,sep string) join æ“ä½œ ","date":"2019-08-19","objectID":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:7:0","tags":["GolangåŸºæœ¬æ•°æ®ç±»å‹"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹","uri":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["GO"],"content":"byte å’Œ rune ç±»å‹ Go è¯­è¨€çš„å­—ç¬¦æœ‰ä»¥ä¸‹ä¿©ç§: uint8 ç±»å‹ï¼Œæˆ–è€…å« byteç±»å‹ï¼Œä»£è¡¨äº† ASCII ç çš„ä¸€ä¸ªå­—ç¬¦ã€‚ runeç±»å‹ï¼Œä»£è¡¨ä¸€ä¸ª UTF-8 å­—ç¬¦ã€‚ å½“éœ€è¦å¤„ç†ä¸­æ–‡ã€æ—¥æ–‡æˆ–è€…å…¶ä»–å¤åˆå­—ç¬¦æ—¶ï¼Œåˆ™éœ€è¦ç”¨åˆ°runeç±»å‹ç±»å‹å®é™…æ˜¯ä¸€ä¸ª int32ã€‚ ","date":"2019-08-19","objectID":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:8:0","tags":["GolangåŸºæœ¬æ•°æ®ç±»å‹"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹","uri":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["GO"],"content":"ä¿®æ”¹å­—ç¬¦ä¸² è¦ä¿®æ”¹å­—ç¬¦ä¸²ï¼Œéœ€è¦å…ˆå°†å…¶è½¬æ¢æˆ[]runeæˆ– byte[]ï¼Œå®Œæˆåå†è½¬åŒ–æˆstringã€‚æ— è®ºé‚£ç§è½¬æ¢ï¼Œéƒ½ä¼šé‡æ–°åˆ†é…å†…å­˜ï¼Œå¹¶å¤åˆ¶å­—èŠ‚æ•°ç»„ã€‚ func changeString() { s1 := \"big\" //å¼ºåˆ¶ç±»å‹è½¬æ¢ byteS1 := []byte(s1) byteS1[0] = 'p' fmt.Println(string(byteS1)) s2 := \"ç™½èåœ\" //å¼ºåˆ¶ç±»å‹è½¬æ¢ runeS2 := []rune(s2) runeS2[0] = \"èƒ¡\" fmt.Println(string(runeS2)) } ","date":"2019-08-19","objectID":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:9:0","tags":["GolangåŸºæœ¬æ•°æ®ç±»å‹"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹","uri":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["GO"],"content":"ç±»å‹è½¬æ¢ Go è¯­è¨€åªæœ‰å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæ²¡æœ‰éšå¼ç±»å‹è½¬æ¢ã€‚ï¼ˆè¯¥è¯­æ³•åªèƒ½åœ¨ä¸¤ä¸ªç±»å‹ä¹‹é—´æ”¯æŒç›¸äº’è½¬æ¢çš„æ—¶å€™ä½¿ç”¨ï¼‰ï¼Œè¯­æ³•å¦‚ä¸‹ T(è¡¨è¾¾å¼) å…¶ä¸­ï¼ŒT è¡¨ç¤ºè¦è½¬æ¢çš„ç±»å‹ã€‚è¡¨è¾¾å¼åŒ…æ‹¬å˜é‡ã€å‡½æ•°è¿”å›å€¼ç­‰ã€‚ func sqrtDemo() { a,b := 3,4 var c int c = int(math.Sqrt(float64(a*a + b*b))) fmt.Println(c) } ","date":"2019-08-19","objectID":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:10:0","tags":["GolangåŸºæœ¬æ•°æ®ç±»å‹"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹","uri":"/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["GO"],"content":"å‰è¨€ ä¸çŸ¥é“ä»ä»€ä¹ˆæ—¶å€™å¼€å§‹å†³å®šè¦æ·±å…¥å­¦ä¹ ä¸€é—¨å¼€å‘è¯­è¨€äº†ï¼Œä» 17 å¹´å¼€å§‹å·¥ä½œçš„æ—¶å€™æ¼«æ— ç›®çš„çš„å­¦ä¹  python åˆ°ç°åœ¨ï¼Œpython å¹³æ—¶ä¹Ÿä¼šå†™ä½†æ˜¯å¤§æ¦‚è¿˜åœç•™åœ¨æŠ„ä»£ç çš„é˜¶æ®µå§ï¼18 å¹´ 9 æœˆå…¥èŒäº†æ–°å…¬å¸ï¼Œå—å°ä¼™ä¼´å½±å“å¯¹ Golang å¼€å§‹æ„Ÿå…´è¶£äº†ï¼Œä» 6 æœˆåˆ°ç°åœ¨é™†é™†ç»­ç»­å­¦ä¹ æ€»æ˜¯æ²¡æœ‰å¤´ç»ªï¼Œå¯èƒ½æ—¶é—´å¤ªè¿‡é—²æ•£ï¼Œæ¯æ¬¡å­¦ä¹ ä¸€æ¬¡å¤§æ¦‚è¦è¿‡å¾ˆä¹…å¾ˆä¹…æ‰ä¼šç»§ç»­å­¦ä¹ ï¼ŒçŸ¥è¯†ç‚¹å¿˜äº†ï¼Œç°åœ¨ä»å¤´å¼€å§‹å§ï¼éƒ½è®°å½•åœ¨åšå®¢ä¸Šã€‚ å˜é‡ ","date":"2019-08-18","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/:0:0","tags":["Golang(å˜é‡)"],"title":"ä»é›¶å¼€å§‹å­¦ä¹ Golang(å˜é‡)","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/"},{"categories":["GO"],"content":"å˜é‡å£°æ˜ Go è¯­è¨€ä¸­çš„å˜é‡å¿…å£°æ˜åæ‰èƒ½ä½¿ç”¨ï¼ŒåŒä¸€ä½œç”¨åŸŸå†…ä¸æ”¯æŒé‡å¤å£°æ˜ã€‚ ","date":"2019-08-18","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/:1:0","tags":["Golang(å˜é‡)"],"title":"ä»é›¶å¼€å§‹å­¦ä¹ Golang(å˜é‡)","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/"},{"categories":["GO"],"content":"æ ‡å‡†å£°æ˜ Go è¯­è¨€åˆ°å˜é‡å£°æ˜æ ¼å¼ä¸ºï¼š var å˜é‡å å˜é‡ç±»å‹ å˜é‡å£°æ˜ä»¥å…³é”®å­—varå¼€å¤´ï¼Œå˜é‡ç±»å‹æ”¾åœ¨å˜é‡åé¢ï¼Œè¡Œå°¾ä¸éœ€è¦åˆ†å·(è¿™ä¸€ç‚¹å C ä¸åŒ) var name string var age int var ok bool ","date":"2019-08-18","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/:2:0","tags":["Golang(å˜é‡)"],"title":"ä»é›¶å¼€å§‹å­¦ä¹ Golang(å˜é‡)","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/"},{"categories":["GO"],"content":"æ‰¹é‡å£°æ˜ Go è¯­è¨€æ˜¯æ”¯æŒæ‰¹é‡å£°æ˜çš„ã€‚ var { a string b int c bool d float64 } ","date":"2019-08-18","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/:3:0","tags":["Golang(å˜é‡)"],"title":"ä»é›¶å¼€å§‹å­¦ä¹ Golang(å˜é‡)","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/"},{"categories":["GO"],"content":"å˜é‡çš„åˆå§‹åŒ– Go è¯­è¨€åœ¨å£°æ˜å˜é‡åˆ°æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å¯¹å˜é‡å¯¹åº”åˆ°å†…å­˜åŒºåŸŸè¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œæ¯ä¸ªå˜é‡éƒ½ä¼šè¢«åˆå§‹åŒ–ä¸ºå…¶ç±»å‹çš„é»˜è®¤å€¼ï¼Œä¾‹å¦‚ï¼šæ•´å‹å’Œæµ®ç‚¹å‹çš„é»˜è®¤å€¼ä¸º0ã€‚ å­—ç¬¦ä¸²å˜é‡çš„é»˜è®¤å€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚å¸ƒå°”å‹å˜é‡çš„é»˜è®¤å€¼ä¸ºfalseã€‚åˆ‡ç‰‡ã€å‡½æ•°ã€æŒ‡é’ˆå˜é‡åˆ°é»˜è®¤å€¼ä¸ºnilã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å£°æ˜å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ã€‚ var å˜é‡å ç±»å‹=è¡¨è¾¾å¼ var name string=\"gaojila\" var age int=25 æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸€æ¬¡æ€§åˆå§‹åŒ–å¤šä¸ªå˜é‡ã€‚ var name,age=\"gaojila\",25 ","date":"2019-08-18","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/:4:0","tags":["Golang(å˜é‡)"],"title":"ä»é›¶å¼€å§‹å­¦ä¹ Golang(å˜é‡)","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/"},{"categories":["GO"],"content":"ç±»å‹æ¨å€’ æœ‰æ—¶å€™æˆ‘ä»¬ä¼šå°†å˜é‡çš„ç±»å‹çœç•¥ï¼Œè¿™ä¸ªæ—¶å€™ç¼–è¯‘å™¨ä¼šæ ¹æ®ç­‰å·å³è¾¹çš„å€¼æ¥æ¨å¯¼å˜é‡çš„ç±»å‹å®Œæˆåˆå§‹åŒ–ã€‚ var name=\"gaojila\" var age=25 ","date":"2019-08-18","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/:5:0","tags":["Golang(å˜é‡)"],"title":"ä»é›¶å¼€å§‹å­¦ä¹ Golang(å˜é‡)","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/"},{"categories":["GO"],"content":"çŸ­å˜é‡å£°æ˜ åœ¨å‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥ä½¿ç”¨æ›´ç®€ç•¥çš„:= æ–¹å¼å£°æ˜å¹¶åˆå§‹åŒ–å˜é‡ã€‚(åªèƒ½åœ¨å‡½æ•°ä½“å†…) package main import { \"fmt\" } var name = \"miaomiao\" func main() { age := 25 name := \"gaojila\"//å±€éƒ¨å˜é‡name fmt.Println(name,age) } ","date":"2019-08-18","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/:6:0","tags":["Golang(å˜é‡)"],"title":"ä»é›¶å¼€å§‹å­¦ä¹ Golang(å˜é‡)","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/"},{"categories":["GO"],"content":"åŒ¿åå˜é‡ åœ¨ä½¿ç”¨å¤šé‡èµ‹å€¼æ—¶ï¼Œå¦‚æœæƒ³è¦å¿½ç•¥æŸä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨åŒ¿åå˜é‡ï¼ˆanonymous variableï¼‰ã€‚ åŒ¿åå˜é‡ç”¨ä¸€ä¸ªä¸‹åˆ’çº¿_è¡¨ç¤ºã€‚ x,_ := 1 _,y := 2 å¸¸é‡ ç›¸å¯¹äºå˜é‡ï¼Œå¸¸é‡æ˜¯æ’å®šä¸å˜åˆ°å€¼ï¼Œå¤šç”¨äºç¨‹åºè¿è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜çš„é‚£äº›å€¼ã€‚å¸¸é‡çš„å£°æ˜å’Œå˜é‡çš„å£°æ˜éå¸¸çš„ç±»ä¼¼ï¼Œåªæ˜¯æŠŠvaræ¢æˆäº†const,å¸¸é‡åœ¨å®šä¹‰çš„æ—¶å€™å¿…é¡»èµ‹å€¼ã€‚ const pi = 3.14159 const e = 2.71 å¤šä¸ªå¸¸é‡ä¹Ÿå¯ä»¥ä¸€èµ·å£°æ˜ const { pi = 3.14159 e =2.71 } const åŒæ—¶å£°æ˜å¤šä¸ªå¸¸é‡æ—¶ï¼Œå¦‚æœçœç•¥äº†å€¼åˆ™è¡¨ç¤ºå’Œä¸Šé¢ä¸€è¡Œçš„å€¼ç›¸åŒã€‚ const { a = 1 b c d } ","date":"2019-08-18","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/:7:0","tags":["Golang(å˜é‡)"],"title":"ä»é›¶å¼€å§‹å­¦ä¹ Golang(å˜é‡)","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/"},{"categories":["GO"],"content":"iota iotaæ˜¯ go è¯­è¨€ä¸­çš„å¸¸é‡è®¡æ•°å™¨ï¼Œåªèƒ½åœ¨å¸¸é‡è¡¨è¾¾å¼ä¸­ä½¿ç”¨ã€‚ iotaåœ¨ const å…³é”®å­—å‡ºç°çš„æ—¶å€™å°†è¢«é‡ç½®ä¸º 0ã€‚const æ¯æ–°å¢ä¸€è¡Œå¸¸é‡å£°æ˜å°†ä½¿iotaè®¡æ•°ä¸€æ¬¡ã€‚ const { a = iota //0 b //1 c //2 d //3 } ","date":"2019-08-18","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/:8:0","tags":["Golang(å˜é‡)"],"title":"ä»é›¶å¼€å§‹å­¦ä¹ Golang(å˜é‡)","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/"},{"categories":["GO"],"content":"å¸¸è§ iota ç¤ºä¾‹ï¼š ä½¿ç”¨_è·³è¿‡æŸäº›å€¼ const { a = iota //0 b //1 _ d //3 } å£°æ˜ä¸­é—´æ’é˜Ÿ const { a = iota //0 b = 100 c = iota //2 d //3 } å®šä¹‰æ•°é‡çº§ const { _ = iota KB = 1 \u003c\u003c (10 * iota) . . . . PB = 1 \u003c\u003c (10 * iota) } å¤šä¸ªiota\u003eå®šä¹‰åœ¨ä¸€è¡Œ const { a,b = iota+1,iota+2 //1,2 c,d //2,3 e,f //3,4 } ","date":"2019-08-18","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/:9:0","tags":["Golang(å˜é‡)"],"title":"ä»é›¶å¼€å§‹å­¦ä¹ Golang(å˜é‡)","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6golang-%E5%8F%98%E9%87%8F/"},{"categories":["linux(ğŸ§)"],"content":"åœºæ™¯ ä¸ªä¸šåŠ¡ç³»ç»Ÿæ— æ³•ç”Ÿæˆè®¢å•,è®¢å•æŠ¥é”™å’Œ gearman çš„ worker æœ‰å…³ï¼Œä½¿ç”¨ curl è°ƒç”¨æ¥å£å‘ç°æŠ¥ 500 é”™è¯¯ã€‚ è¿‡ç¨‹ curl è°ƒç”¨æ¥å£ä¸é€š ç™»å½• gearman æœåŠ¡å™¨è°ƒç”¨æ¥å£ä¸é€š é‡å¯ gearman worker è°ƒç”¨ä¸é€š æŸ¥çœ‹æ¥å£æœåŠ¡æ˜¯ç”± lighttp æä¾› ç›´æ¥è°ƒç”¨ 80 ç«¯å£ä¸é€š é‡å¯ lighttp è°ƒç”¨æˆåŠŸ åŸå›  ç”Ÿç‰©ä¿¡æ¯å‡çº§äº† python ","date":"2019-08-17","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1gearman%E6%95%85%E9%9A%9C%E8%B0%83%E6%9F%A5/:0:0","tags":["è®°ä¸€æ¬¡gearmanæ•…éšœè°ƒæŸ¥"],"title":"è®°ä¸€æ¬¡gearmanæ•…éšœè°ƒæŸ¥","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1gearman%E6%95%85%E9%9A%9C%E8%B0%83%E6%9F%A5/"},{"categories":["linux(ğŸ§)"],"content":"å‰è¨€ éƒ½æ˜¯åˆ«äººçš„é“¾æ¥æœ‰æ—¶é—´å†è‡ªå·±æ•´ç† é“¾æ¥ top ä»‹ç» tar å‘½ä»¤ linux ä¸‹å‹ç¼©å‘½ä»¤å¤§å…¨ linux å¸¸ç”¨å‘½ä»¤ç®€å•ä»‹ç»(netstat,awk,top,tail,head,less,more,cat,nl) linux ä¸‹æŸ¥çœ‹æ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¤§å° linux å¸¸ç”¨å‘½ä»¤(æ›¿æ¢) å®‰è£…åŠåº”ç”¨ç®¡ç†ç¨‹åº linux ç³»ç»Ÿæ•…éšœæ’æŸ¥å’Œä¿®å¤æŠ€å·§ mount å‘½ä»¤è¯¦è§£ linux å¸¸ç”¨å‘½ä»¤æ€»ç»“(ä¸€) linux å¸¸ç”¨å‘½ä»¤æ€»ç»“(äºŒ) linux å¸¸ç”¨å‘½ä»¤æ€»ç»“(ä¸‰) linux å¼‚å¸¸ è¯¦ç»†è§£æ linux /etc/passwd æ–‡ä»¶ ç†è§£ linux ç³»ç»Ÿä¸­çš„ load average(å›¾æ–‡ç‰ˆ) linux æ³¨é”€å…¶ä»–ç”¨æˆ· linux è‡ªå¯åŠ¨æ–¹æ³• Linux ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶ ifcfg-eth0 è§£æ linux åŸºç¡€çŸ¥è¯†æ€»ç»“ linux åŸºç¡€çŸ¥è¯†æ€»ç»“ 2 linux æ‰¹é‡ kill è¿›ç¨‹ ","date":"2019-08-17","objectID":"/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/:0:0","tags":["linuxå¸¸ç”¨å‘½ä»¤è¯¦è§£"],"title":"linuxå¸¸ç”¨å‘½ä»¤è¯¦è§£","uri":"/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/"},{"categories":["Git"],"content":"åœºæ™¯ æœ‰æ—¶å€™å·²ç»æäº¤åˆ°è¿œç¨‹ä»“åº“çš„ä»£ç å¸Œæœ›å›æ»šè¯¥æ€ä¹ˆåšï¼Ÿ æœ‰æ—¶å€™æœ‰å¤šä¸ª commit è¯¥å¦‚ä½•åˆå¹¶æˆä¸€ä¸ªæäº¤ï¼Ÿ æ–¹æ³• ä½¿ç”¨ git rebase åˆå¹¶å¤šä¸ª commit git rebase -l \u003cç‰ˆæœ¬å·\u003e ä½¿ç”¨ git rebase å›æ»šå·²ç»æäº¤ git reset --soft \u003cç‰ˆæœ¬å·\u003e git push origin master --force æ³¨æ„ éœ€è¦åœ¨ web ç«¯å…³é—­åˆ†æ”¯ä¿æŠ¤ï¼Œç„¶åé‡æ–° git add ","date":"2019-08-16","objectID":"/gitrest%E4%B8%8Egitrebase/:0:0","tags":["gitrestä¸gitrebase"],"title":"gitrestä¸gitrebase","uri":"/gitrest%E4%B8%8Egitrebase/"},{"categories":["Git"],"content":"åœºæ™¯ github ä¸Š fork åŸé¡¹ç›®ï¼Œå¦‚ä½•å°†æœ¬ä»“åº“æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Ÿ æ–¹æ³• é…ç½®å½“å‰ fork ä»“åº“çš„åŸåœ°å€ git remote add upstream \u003cåŸä»“åº“githubåœ°å€\u003e æŸ¥çœ‹å½“å‰ä»“åº“çš„è¿œç¨‹ä»“åº“åœ°å€å’ŒåŸä»“åº“åœ°å€ git remote -v è·å–åŸä»“åº“çš„æ›´æ–°ã€‚ä½¿ç”¨ fetch æ›´æ–°ï¼Œfetch åä¼šè¢«å­˜å‚¨åœ¨ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯ upstream/master ä¸Š git fetch upstream åˆå¹¶åˆ°æœ¬åœ°åˆ†æ”¯ã€‚åˆ‡æ¢åˆ° master åˆ†æ”¯ï¼Œåˆå¹¶ upstream/master åˆ†æ”¯ã€‚ git merge upstream/master è¿™ä¸ªæ—¶å€™ä½¿ç”¨ git log å°±ç”¨çœ‹åˆ°åŸä»“åº“çš„æ›´æ–°äº†ã€‚ git log å¦‚æœéœ€è¦è‡ªå·±çš„ github ä¸Šçš„ fork çš„ä»“åº“ä¿æŒåŒæ­¥æ›´æ–°ï¼Œæ‰§è¡Œ git push è¿›è¡Œæ¨é€ã€‚ git push origin master å¦‚æœå‡ºç°æ— æ³•æäº¤æ—¶ï¼Œå¼ºåˆ¶è¦†ç›–ã€‚ git fetch origin git reset --hard origin/master ","date":"2019-08-16","objectID":"/git%E8%8E%B7%E5%8F%96%E4%B8%8E%E5%8E%9F%E4%BB%93%E5%BA%93%E5%90%8C%E6%AD%A5%E6%9B%B4%E6%96%B0/:0:0","tags":["gitè·å–ä¸åŸä»“åº“åŒæ­¥æ›´æ–°"],"title":"gitè·å–ä¸åŸä»“åº“åŒæ­¥æ›´æ–°","uri":"/git%E8%8E%B7%E5%8F%96%E4%B8%8E%E5%8E%9F%E4%BB%93%E5%BA%93%E5%90%8C%E6%AD%A5%E6%9B%B4%E6%96%B0/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"å‰è¨€ ä½¿ç”¨æ–°å·¥å…· podman æ­å»º docker ç§æœ‰ä»“åº“ä¸‹é¢ç®€è¿° podman çš„ä¼˜ç‚¹ podman æ— å®ˆæŠ¤è¿›ç¨‹ æ¯ä¸€ä¸ªå®¹å™¨å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ é root ç”¨æˆ·ä¹Ÿå¯æ‰§è¡Œ podman å‘½ä»¤å’Œ docker å‘½ä»¤å¤§ä½“ä¸€è‡´ æ–¹æ³• ","date":"2019-08-09","objectID":"/podman%E6%90%AD%E5%BB%BAnexus3%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/:0:0","tags":["æ­å»ºdockerç§æœ‰ä»“åº“"],"title":"podmanæ­å»ºnexus3ç§æœ‰ä»“åº“","uri":"/podman%E6%90%AD%E5%BB%BAnexus3%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"ubuntu å®‰è£… podman sudo apt update sudo apt -y install software-properties-common sudo add-apt-repository -y ppa:projectatomic/ppa sudo apt install podman -y ","date":"2019-08-09","objectID":"/podman%E6%90%AD%E5%BB%BAnexus3%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/:1:0","tags":["æ­å»ºdockerç§æœ‰ä»“åº“"],"title":"podmanæ­å»ºnexus3ç§æœ‰ä»“åº“","uri":"/podman%E6%90%AD%E5%BB%BAnexus3%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"podman å¯åŠ¨ nexus å®¹å™¨ podman run -d -p 8081:8081 -p 8082:8082 -p 8083:8083 -v /data/nexus3_podman:/nexus-data --name nexus3 docker.io/sonatype/nexus3 ","date":"2019-08-09","objectID":"/podman%E6%90%AD%E5%BB%BAnexus3%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/:2:0","tags":["æ­å»ºdockerç§æœ‰ä»“åº“"],"title":"podmanæ­å»ºnexus3ç§æœ‰ä»“åº“","uri":"/podman%E6%90%AD%E5%BB%BAnexus3%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"podman æŸ¥çœ‹å®¹å™¨å¯åŠ¨æ—¥å¿— podman logs -f nexus3 ","date":"2019-08-09","objectID":"/podman%E6%90%AD%E5%BB%BAnexus3%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/:3:0","tags":["æ­å»ºdockerç§æœ‰ä»“åº“"],"title":"podmanæ­å»ºnexus3ç§æœ‰ä»“åº“","uri":"/podman%E6%90%AD%E5%BB%BAnexus3%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"æ·»åŠ ä»“åº“(hosted,proxy,group) æ ·åˆ— é…ç½® ","date":"2019-08-09","objectID":"/podman%E6%90%AD%E5%BB%BAnexus3%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/:4:0","tags":["æ­å»ºdockerç§æœ‰ä»“åº“"],"title":"podmanæ­å»ºnexus3ç§æœ‰ä»“åº“","uri":"/podman%E6%90%AD%E5%BB%BAnexus3%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"ä½¿ç”¨ nginx ä»£ç†æ–¹å¼å°† pull å’Œ push åˆå¹¶æˆä¸€ä¸ªç«¯å£ upstream nexus_docker_get { server 192.168.157.110:8082; } upstream nexus_docker_put { server 192.168.157.110:8083; } server { listen 80; listen 443 ssl; server_name idocker.io; access_log /var/log/nginx/idocker.io.log; # è¯ä¹¦ ssl_certificate /usr/local/nginx/conf/ssl/out/idocker.io/idocker.io.crt; ssl_certificate_key /usr/local/nginx/conf/ssl/out/cert.key.pem; ssl_protocols TLSv1.1 TLSv1.2; ssl_ciphers '!aNULL:kECDH+AESGCM:ECDH+AESGCM:RSA+AESGCM:kECDH+AES:ECDH+AES:RSA+AES:'; ssl_prefer_server_ciphers on; ssl_session_cache shared:SSL:10m; # disable any limits to avoid HTTP 413 for large image uploads client_max_body_size 0; # required to avoid HTTP 411: see Issue #1486 (https://github.com/docker/docker/issues/1486) chunked_transfer_encoding on; # è®¾ç½®é»˜è®¤ä½¿ç”¨æ¨é€ä»£ç† set $upstream \"nexus_docker_put\"; # å½“è¯·æ±‚æ˜¯GETï¼Œä¹Ÿå°±æ˜¯æ‹‰å–é•œåƒçš„æ—¶å€™ï¼Œè¿™é‡Œæ”¹ä¸ºæ‹‰å–ä»£ç†ï¼Œå¦‚æ­¤ä¾¿è§£å†³äº†æ‹‰å–å’Œæ¨é€çš„ç«¯å£ç»Ÿä¸€ if ( $request_method ~* 'GET') { set $upstream \"nexus_docker_get\"; } index index.html index.htm index.php; location / { proxy_pass http://$upstream; proxy_set_header Host $host; proxy_connect_timeout 3600; proxy_send_timeout 3600; proxy_read_timeout 3600; proxy_set_header X-Real-IP $remote_addr; proxy_buffering off; proxy_request_buffering off; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto http; } } å‘ åœ¨æ˜ å°„å¤–éƒ¨è·¯å¾„æ—¶éœ€è¦å°†æ˜ å°„ç›®å½•çš„ owner æ”¹ä¸º 200(nexus çš„ uid å’Œ gid) ","date":"2019-08-09","objectID":"/podman%E6%90%AD%E5%BB%BAnexus3%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/:5:0","tags":["æ­å»ºdockerç§æœ‰ä»“åº“"],"title":"podmanæ­å»ºnexus3ç§æœ‰ä»“åº“","uri":"/podman%E6%90%AD%E5%BB%BAnexus3%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/"},{"categories":["å®¹å™¨(ğŸš¢)"],"content":"login docker login \u003chost\u003e pull docker pull \u003chost\u003e/\u003cporject\u003e/\u003crepo\u003e:\u003ctag\u003e push é‡æ–°æ‰“ tag docker tag \u003cimg_name\u003e:\u003ctage\u003e \u003chost\u003e/\u003cproject\u003e/\u003crepo\u003e:\u003ctag\u003e push docker push \u003chost\u003e/\u003cporject\u003e/\u003crepo\u003e:\u003ctag\u003e ","date":"2019-08-09","objectID":"/docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93pull%E5%92%8Cpush/:0:0","tags":["nexus3 docker pull or push"],"title":"dockerç§æœ‰ä»“åº“pullå’Œpush","uri":"/docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93pull%E5%92%8Cpush/"},{"categories":["Prometheus"],"content":"å‰è¨€ zabbix å¯¹äºè¿ç»´äººå‘˜æ¥è¯´æ— æ³•å®Œå…¨åšåˆ°è‡ªåŠ¨åŒ–,å†…éƒ¨ä¸šåŠ¡å³å°† docker åŒ–,æ•…æœ‰å°† zabbix æ›¿æ¢ä¸º prometheus çš„æƒ³æ³• è¿™ç¯‡æ–‡æ¡£å°†ä¼šæ›´æ–°å¾ˆä¹… å‚ç…§æ­¤æ–‡æ¡£æœªå®Œ å‚è€ƒæ­¤æ–‡æ¡£ Prometheus æ­å»º ","date":"2019-08-03","objectID":"/prometheus%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA/:0:0","tags":["Prometheus + Grafana"],"title":"Prometheus ç›‘æ§ç³»ç»Ÿæ­å»º","uri":"/prometheus%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA/"},{"categories":["Prometheus"],"content":"supervisor å®ˆæŠ¤è¿›ç¨‹æ–¹å¼ github ä¸‹è½½æœ€æ–°äºŒè¿›åˆ¶åŒ… # ä½¿ç”¨çš„åŒ…æ—¶githubçš„æœ€æ–°ç¨³å®šç‰ˆåŒ… wget https://github.com/prometheus/prometheus/releases/download/v2.17.1/prometheus-2.17.1.linux-amd64.tar.gz å°†ä¸‹è½½çš„äºŒè¿›åˆ¶åŒ…è§£å‹åˆ°ä½ æƒ³è¦æ”¾åˆ°çš„ç›®å½•ä¸‹ supervisor å®ˆæŠ¤è¿›ç¨‹é…ç½® ","date":"2019-08-03","objectID":"/prometheus%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA/:1:0","tags":["Prometheus + Grafana"],"title":"Prometheus ç›‘æ§ç³»ç»Ÿæ­å»º","uri":"/prometheus%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA/"},{"categories":["Prometheus"],"content":"docker æ–¹å¼ Node_exporter æ­å»º Alertmanage æ­å»º Grafana æ­å»º Prometheus å¸¸ç”¨å†…ç½®å‡½æ•° Prometheus è‡ªå®šä¹‰ç›‘æ§ Alertmanage å‘Šè­¦è·¯ç”± Prometheus å‘Šè­¦è§„åˆ™ Grafana é…ç½®å‘Šè­¦ Grafana ç”»å›¾ ","date":"2019-08-03","objectID":"/prometheus%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA/:2:0","tags":["Prometheus + Grafana"],"title":"Prometheus ç›‘æ§ç³»ç»Ÿæ­å»º","uri":"/prometheus%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA/"},{"categories":["greenplum"],"content":"å¤‡ä»½å·¥å…·é€‰æ‹© ","date":"2019-07-16","objectID":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/:0:0","tags":["greenplumä½¿ç”¨gpbackup"],"title":"greenplumå¹¶è¡Œå¤‡ä»½ä¸æ¢å¤","uri":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"},{"categories":["greenplum"],"content":"gpcrondump ","date":"2019-07-16","objectID":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/:1:0","tags":["greenplumä½¿ç”¨gpbackup"],"title":"greenplumå¹¶è¡Œå¤‡ä»½ä¸æ¢å¤","uri":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"},{"categories":["greenplum"],"content":"è¯´æ˜ gpcrondump å®ç”¨ç¨‹åºå°†æ•°æ®åº“çš„å†…å®¹è½¬å‚¨ä¸º SQL è„šæœ¬æ–‡ä»¶ï¼Œç„¶åå¯ä»¥ä½¿ç”¨å®ƒä»¬åœ¨ä»¥åä½¿ç”¨å®ƒæ¥è¿˜åŸæ•°æ®åº“æ¶æ„å’Œç”¨æˆ·æ•°æ® gpdbrestoreã€‚åœ¨è½¬å‚¨æ“ä½œæœŸé—´ï¼Œç”¨æˆ·ä»å°†å…·æœ‰å¯¹æ•°æ®åº“çš„å®Œå…¨è®¿é—®æƒé™ã€‚ ","date":"2019-07-16","objectID":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/:1:1","tags":["greenplumä½¿ç”¨gpbackup"],"title":"greenplumå¹¶è¡Œå¤‡ä»½ä¸æ¢å¤","uri":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"},{"categories":["greenplum"],"content":"ç¼ºç‚¹ Backing up a database with gpcrondump while simultaneously running ALTER TABLE might cause gpcrondump to fail. Backing up a database with gpcrondump while simultaneouslyrunning DDL commands might cause issues with locks. You might see either the DDL command or gpcrondump waiting to acquire locks. å¤§æ¦‚å°±æ˜¯è¿è¡Œçš„æ—¶å€™æ›´æ”¹è¡¨ä¼šå¤‡ä»½å¤±è´¥,è¿è¡Œ DDL ä¼šäº§ç”Ÿé”è¡¨é—®é¢˜ ","date":"2019-07-16","objectID":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/:1:2","tags":["greenplumä½¿ç”¨gpbackup"],"title":"greenplumå¹¶è¡Œå¤‡ä»½ä¸æ¢å¤","uri":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"},{"categories":["greenplum"],"content":"gpbackup ","date":"2019-07-16","objectID":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/:2:0","tags":["greenplumä½¿ç”¨gpbackup"],"title":"greenplumå¹¶è¡Œå¤‡ä»½ä¸æ¢å¤","uri":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"},{"categories":["greenplum"],"content":"è¯´æ˜ å°†æ•°æ®åº“çš„å†…å®¹å¤‡ä»½åˆ°å…ƒæ•°æ®æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶çš„é›†åˆä¸­ï¼Œè¿™äº›æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶å¯ç”¨äºä»¥åä½¿ç”¨å®ƒæ¥è¿˜åŸæ•°æ®åº“ gprestoreã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œ gpbackup å¤‡ä»½æŒ‡å®šæ•°æ®åº“ä¸­çš„å¯¹è±¡ä»¥åŠå…¨å±€ Greenplum æ•°æ®åº“ç³»ç»Ÿå¯¹è±¡ã€‚æ‚¨å¯ä»¥é€‰æ‹©æä¾›-globals é€‰é¡¹ gprestore æ¢å¤å…¨å±€å¯¹è±¡. gpbackup é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†å¯¹è±¡å…ƒæ•°æ®æ–‡ä»¶å’Œ DDL æ–‡ä»¶å­˜å‚¨åœ¨ Greenplum æ•°æ®åº“ä¸»æ•°æ®ç›®å½•ä¸­ã€‚Greenplum æ•°æ®åº“ç»†åˆ†ä½¿ç”¨å¤åˆ¶..å…³äºéƒ¨åˆ†å‘½ä»¤å°†å¤‡ä»½è¡¨çš„æ•°æ®å­˜å‚¨åœ¨ä½äºæ¯ä¸ªæ®µçš„æ•°æ®ç›®å½•ä¸­çš„å‹ç¼© CSV æ•°æ®æ–‡ä»¶ä¸­ã€‚ ","date":"2019-07-16","objectID":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/:2:1","tags":["greenplumä½¿ç”¨gpbackup"],"title":"greenplumå¹¶è¡Œå¤‡ä»½ä¸æ¢å¤","uri":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"},{"categories":["greenplum"],"content":"å®‰è£… gpbackup ç”± go ç¼–å†™ï¼Œå¯ä¸€æ¬¡ç¼–è¯‘åˆ°å¤„æ‰§è¡Œã€‚ æºç ç¼–è¯‘å®‰è£… ","date":"2019-07-16","objectID":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/:2:2","tags":["greenplumä½¿ç”¨gpbackup"],"title":"greenplumå¹¶è¡Œå¤‡ä»½ä¸æ¢å¤","uri":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"},{"categories":["greenplum"],"content":"å‚æ•° -dbname database_name éœ€è¦ã€‚æŒ‡å®šè¦å¤‡ä»½çš„æ•°æ®åº“ã€‚ -backupdir ç›®å½• å¯é€‰çš„ã€‚å°†æ‰€æœ‰å¿…éœ€çš„å¤‡ä»½æ–‡ä»¶ï¼ˆå…ƒæ•°æ®æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶ï¼‰å¤åˆ¶åˆ°æŒ‡å®šçš„ç›®å½•ã€‚æ‚¨å¿…é¡»å°†ç›®å½•æŒ‡å®šä¸ºç»å¯¹è·¯å¾„ï¼ˆä¸æ˜¯ç›¸å¯¹è·¯å¾„ï¼‰ã€‚å¦‚æœæ‚¨ä¸æä¾›æ­¤é€‰é¡¹ï¼Œåˆ™ä¼šåœ¨$ MASTER_DATA_DIRECTORY / backups / YYYYMMDD / YYYYMMDDhhmmss / ç›®å½•ä¸­çš„Greenplum Databaseä¸»æœºä¸Šåˆ›å»ºå…ƒæ•°æ®æ–‡ä»¶ ã€‚æ®µä¸»æœºåœ¨\u003cseg_dir\u003e / backups / YYYYMMDD / YYYYMMDDhhmmss /ç›®å½•ä¸­åˆ›å»ºCSVæ•°æ®æ–‡ä»¶ ã€‚æŒ‡å®šè‡ªå®šä¹‰å¤‡ä»½ç›®å½•æ—¶ï¼Œä¼šå°†æ–‡ä»¶å¤åˆ¶åˆ°å¤‡ä»½ç›®å½•çš„å­ç›®å½•ä¸­çš„è¿™äº›è·¯å¾„ã€‚ -data-only å¯é€‰çš„ã€‚ä»…å°†è¡¨æ•°æ®å¤‡ä»½åˆ°CSVæ–‡ä»¶ä¸­ï¼Œä½†ä¸å¤‡ä»½é‡æ–°åˆ›å»ºè¡¨å’Œå…¶ä»–æ•°æ®åº“å¯¹è±¡æ‰€éœ€çš„å…ƒæ•°æ®æ–‡ä»¶ã€‚ -debug å¯é€‰çš„ã€‚åœ¨æ“ä½œæœŸé—´æ˜¾ç¤ºè¯¦ç»†çš„è°ƒè¯•æ¶ˆæ¯ã€‚ -exclude-schema schema_name å¯é€‰çš„ã€‚æŒ‡å®šè¦ä»å¤‡ä»½ä¸­æ’é™¤çš„æ•°æ®åº“æ¨¡å¼ã€‚æ‚¨å¯ä»¥å¤šæ¬¡æŒ‡å®šæ­¤é€‰é¡¹ä»¥æ’é™¤å¤šä¸ªæ¨¡å¼ã€‚æ‚¨æ— æ³•å°†æ­¤é€‰é¡¹ä¸-include-æ¨¡å¼é€‰é¡¹ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ç­›é€‰å¤‡ä»½çš„å†…å®¹ã€‚ -exclude-table-file file_name å¯é€‰çš„ã€‚æŒ‡å®šåŒ…å«è¦ä»å¤‡ä»½ä¸­æ’é™¤çš„è¡¨åˆ—è¡¨çš„æ–‡æœ¬æ–‡ä»¶ã€‚æ–‡æœ¬æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œéƒ½å¿…é¡»ä½¿ç”¨è¯¥æ ¼å¼å®šä¹‰ä¸€ä¸ªè¡¨ \u003cæ¨¡å¼åç§°\u003e \u003cè¡¨å\u003eã€‚è¯¥æ–‡ä»¶ä¸å¾—åŒ…å«å°¾éšè¡Œã€‚å¦‚æœè¡¨æˆ–æ¨¡å¼åç§°ä½¿ç”¨å°å†™å­—æ¯ï¼Œæ•°å­—æˆ–ä¸‹åˆ’çº¿å­—ç¬¦ä»¥å¤–çš„ä»»ä½•å­—ç¬¦ï¼Œåˆ™å¿…é¡»åœ¨åŒå¼•å·ä¸­åŒ…å«è¯¥åç§°ã€‚ æ‚¨ä¸èƒ½ç»“åˆä½¿ç”¨æ­¤é€‰é¡¹ -leafåˆ†åŒºæ•°æ®ã€‚è™½ç„¶æ‚¨å¯ä»¥åœ¨æŒ‡å®šçš„æ–‡ä»¶ä¸­æŒ‡å®šå¶å­åˆ†åŒºåç§° -excludeè¡¨æ–‡ä»¶ï¼Œ gpbackup å¿½ç•¥åˆ†åŒºåç§°ã€‚ æœ‰å…³ è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ç­›é€‰å¤‡ä»½çš„å†…å®¹ã€‚ -include-schema schema_name å¯é€‰çš„ã€‚æŒ‡å®šè¦åŒ…æ‹¬åœ¨å¤‡ä»½ä¸­çš„æ•°æ®åº“æ¨¡å¼ã€‚æ‚¨å¯ä»¥å¤šæ¬¡æŒ‡å®šæ­¤é€‰é¡¹ä»¥åŒ…å«å¤šä¸ªæ¨¡å¼ã€‚å¦‚æœæŒ‡å®šæ­¤é€‰é¡¹ï¼Œåˆ™åç»­æœªåŒ…å«çš„ä»»ä½•æ¨¡å¼-include-æ¨¡å¼å¤‡ä»½é›†ä¸­çœç•¥äº†é€‰é¡¹ã€‚æ‚¨æ— æ³•å°†æ­¤é€‰é¡¹ä¸ -exclude-æ¨¡å¼é€‰é¡¹ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ç­›é€‰å¤‡ä»½çš„å†…å®¹ã€‚ -include-table-file file_name å¯é€‰çš„ã€‚æŒ‡å®šåŒ…å«è¦åŒ…æ‹¬åœ¨å¤‡ä»½ä¸­çš„è¡¨åˆ—è¡¨çš„æ–‡æœ¬æ–‡ä»¶ã€‚æ–‡æœ¬æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œéƒ½å¿…é¡»ä½¿ç”¨è¯¥æ ¼å¼å®šä¹‰ä¸€ä¸ªè¡¨ \u003cæ¨¡å¼åç§°\u003e \u003cè¡¨å\u003eã€‚è¯¥æ–‡ä»¶ä¸å¾—åŒ…å«å°¾éšè¡Œã€‚å¦‚æœè¡¨æˆ–æ¨¡å¼åç§°ä½¿ç”¨å°å†™å­—æ¯ï¼Œæ•°å­—æˆ–ä¸‹åˆ’çº¿å­—ç¬¦ä»¥å¤–çš„ä»»ä½•å­—ç¬¦ï¼Œåˆ™å¿…é¡»åœ¨åŒå¼•å·ä¸­åŒ…å«è¯¥åç§°ã€‚å¤‡ä»½é›†ä¸­å°†çœç•¥æ­¤æ–‡ä»¶ä¸­æœªåˆ—å‡ºçš„ä»»ä½•è¡¨ã€‚ æ‚¨å¯ä»¥é€‰æ‹©æŒ‡å®šè¡¨å¶å­åˆ†åŒºåç§°æ¥ä»£æ›¿è¡¨åç§°ï¼Œä»¥ä¾¿åœ¨å¤‡ä»½ä¸­ä»…åŒ…å«ç‰¹å®šå¶å­åˆ†åŒº -leafåˆ†åŒºæ•°æ® é€‰é¡¹ã€‚ æœ‰å…³ è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ç­›é€‰å¤‡ä»½çš„å†…å®¹ã€‚ --leaf-partition-data å¯é€‰çš„ã€‚å¯¹äºåˆ†åŒºè¡¨ï¼Œä¸ºæ¯ä¸ªå¶å­åˆ†åŒºåˆ›å»ºä¸€ä¸ªæ•°æ®æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¸ºæ•´ä¸ªè¡¨åˆ›å»ºä¸€ä¸ªæ•°æ®æ–‡ä»¶ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚ä½¿ç”¨æ­¤é€‰é¡¹è¿˜å¯ä»¥æŒ‡å®šè¦åŒ…å«åœ¨å¤‡ä»½ä¸­çš„å•ä¸ªå¶å­åˆ†åŒº -includeè¡¨æ–‡ä»¶é€‰é¡¹ã€‚æ‚¨ä¸èƒ½ç»“åˆä½¿ç”¨æ­¤é€‰é¡¹-excludeè¡¨æ–‡ä»¶ã€‚ --metadata-only å¯é€‰çš„ã€‚ä»…åˆ›å»ºé‡æ–°åˆ›å»ºæ•°æ®åº“å¯¹è±¡æ‰€éœ€çš„å…ƒæ•°æ®æ–‡ä»¶ï¼ˆDDLï¼‰ï¼Œä½†ä¸å¤‡ä»½å®é™…çš„è¡¨æ•°æ®ã€‚ --no-compression å¯é€‰çš„ã€‚ä¸è¦å‹ç¼©è¡¨æ•°æ®CSVæ–‡ä»¶ã€‚ --quiet å¯é€‰çš„ã€‚ç¦æ­¢æ‰€æœ‰éè­¦å‘Šï¼Œéé”™è¯¯æ—¥å¿—æ¶ˆæ¯ã€‚ -verbose å¯é€‰çš„ã€‚æ‰“å°è¯¦ç»†æ—¥å¿—æ¶ˆæ¯ã€‚ --version å¯é€‰çš„ã€‚æ‰“å°ç‰ˆæœ¬å·å¹¶é€€å‡ºã€‚ --with-stats å¯é€‰çš„ã€‚åœ¨å¤‡ä»½é›†ä¸­åŒ…å«æŸ¥è¯¢è®¡åˆ’ç»Ÿè®¡ä¿¡æ¯ã€‚ gpbackup å¤‡ä»½å®ä¾‹è¯´æ˜ ","date":"2019-07-16","objectID":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/:2:3","tags":["greenplumä½¿ç”¨gpbackup"],"title":"greenplumå¹¶è¡Œå¤‡ä»½ä¸æ¢å¤","uri":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"},{"categories":["greenplum"],"content":"å®Œå…¨å¤‡ä»½ gpadmin@gpmaster:~$ gpbackup --dbname test --backup-dir /var/tmp/0715 --leaf-partition-data 20190716:10:25:59 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Starting backup of database test 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Backup Timestamp = 20190716102559 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Backup Database = test 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Gathering table state information 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Acquiring ACCESS SHARE locks on tables Locks acquired: 1 / 1 [============================================================] 100.00% 0s 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Gathering additional table metadata 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Metadata will be written to /var/tmp/0715/gpseg-1/backups/20190716/20190716102559/gpbackup_20190716102559_metadata.sql 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Writing global database metadata 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Metadata will be written to /var/tmp/0715/gpseg-1/backups/20190716/20190716102559/gpbackup_20190716102559_metadata.sql 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Writing global database metadata 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Global database metadata backup complete 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Writing pre-data metadata 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Pre-data metadata backup complete 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Writing post-data metadata 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Post-data metadata backup complete 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Writing data to file Tables backed up: 1 / 1 [==========================================================] 100.00% 0s 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Data backup complete 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Writing data to file Tables backed up: 1 / 1 [==========================================================] 100.00% 0s 20190716:10:26:00 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Data backup complete 20190716:10:26:01 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Found neither /opt/gpdb/bin/gp_email_contacts.yaml nor /home/gpadmin/gp_email_contacts.yaml 20190716:10:26:01 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Email containing gpbackup report /var/tmp/0715/gpseg-1/backups/20190716/20190716102559/gpbackup_20190716102559_report will not be sent 20190716:10:26:01 gpbackup:gpadmin:gpmaster:003082-[INFO]:-Backup completed successfully ","date":"2019-07-16","objectID":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/:3:0","tags":["greenplumä½¿ç”¨gpbackup"],"title":"greenplumå¹¶è¡Œå¤‡ä»½ä¸æ¢å¤","uri":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"},{"categories":["greenplum"],"content":"å¢é‡å¤‡ä»½ gpadmin@gpmaster:~$ gpbackup --dbname test --backup-dir /var/tmp/0715 --leaf-partition-data --incremental 20190716:10:27:08 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Starting backup of database test 20190716:10:27:08 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Backup Timestamp = 20190716102708 20190716:10:27:08 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Backup Database = test 20190716:10:27:08 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Gathering table state information 20190716:10:27:08 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Acquiring ACCESS SHARE locks on tables Locks acquired: 2 / 2 [============================================================] 100.00% 0s 20190716:10:27:08 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Gathering additional table metadata 20190716:10:27:08 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Metadata will be written to /var/tmp/0715/gpseg-1/backups/20190716/20190716102708/gpbackup_20190716102708_metadata.sql 20190716:10:27:08 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Writing global database metadata 20190716:10:27:08 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Global database metadata backup complete 20190716:10:27:08 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Writing pre-data metadata 20190716:10:27:09 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Pre-data metadata backup complete 20190716:10:27:09 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Writing post-data metadata 20190716:10:27:09 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Post-data metadata backup complete 20190716:10:27:09 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Basing incremental backup off of backup with timestamp = 20190716102559 20190716:10:27:09 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Writing data to file Tables backed up: 2 / 2 [==========================================================] 100.00% 0s 20190716:10:27:09 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Data backup complete 20190716:10:27:10 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Found neither /opt/gpdb/bin/gp_email_contacts.yaml nor /home/gpadmin/gp_email_contacts.yaml 20190716:10:27:10 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Email containing gpbackup report /var/tmp/0715/gpseg-1/backups/20190716/20190716102708/gpbackup_20190716102708_report will not be sent 20190716:10:27:10 gpbackup:gpadmin:gpmaster:003120-[INFO]:-Backup completed successfully ","date":"2019-07-16","objectID":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/:4:0","tags":["greenplumä½¿ç”¨gpbackup"],"title":"greenplumå¹¶è¡Œå¤‡ä»½ä¸æ¢å¤","uri":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"},{"categories":["greenplum"],"content":"è¡¨çº§åˆ«å¤‡ä»½ gpadmin@gsdw_dev-master:~$ gpbackup --dbname gsdw --backup-dir /data/gpbackup --include-table dw_agg.agg_cus_fct_category_for_mkt 20190801:14:51:46 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Starting backup of database gsdw 20190801:14:51:46 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Backup Timestamp = 20190801145145 20190801:14:51:46 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Backup Database = gsdw 20190801:14:51:46 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Gathering table state information 20190801:14:51:46 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Acquiring ACCESS SHARE locks on tables Locks acquired: 1 / 1 [==================================================] 100.00% 0s 20190801:14:51:46 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Gathering additional table metadata 20190801:14:51:46 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Metadata will be written to /data/gpbackup/gpseg-1/backups/20190801/20190801145145/gpbackup_20190801145145_metadata.sql 20190801:14:51:46 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Writing pre-data metadata 20190801:14:51:46 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Pre-data metadata backup complete 20190801:14:51:46 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Writing post-data metadata 20190801:14:51:47 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Post-data metadata backup complete 20190801:14:51:47 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Writing data to file Tables backed up: 1 / 1 [================================================] 100.00% 0s 20190801:14:51:47 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Data backup complete 20190801:14:51:48 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Found neither /opt/gpdb/bin/gp_email_contacts.yaml nor /home/gpadmin/gp_email_contacts.yaml 20190801:14:51:48 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Email containing gpbackup report /data/gpbackup/gpseg-1/backups/20190801/20190801145145/gpbackup_20190801145145_report will not be sent 20190801:14:51:48 gpbackup:gpadmin:gsdw_dev-master:016502-[INFO]:-Backup completed successfully ","date":"2019-07-16","objectID":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/:5:0","tags":["greenplumä½¿ç”¨gpbackup"],"title":"greenplumå¹¶è¡Œå¤‡ä»½ä¸æ¢å¤","uri":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"},{"categories":["greenplum"],"content":"å¤‡ä»½æ¢å¤ gpadmin@gpmaster:~$ gprestore -backup-dir /var/tmp/0715 -timestamp 20190715101501 --create-db 20190715:10:16:17 gprestore:gpadmin:gpmaster:002765-[INFO]:-Restore Key = 20190715101501 20190715:10:16:17 gprestore:gpadmin:gpmaster:002765-[INFO]:-Restoring pre-data metadata Pre-data objects restored: 8 / 8 [=================================================] 100.00% 0s 20190715:10:16:18 gprestore:gpadmin:gpmaster:002765-[INFO]:-Pre-data metadata restore complete Tables restored: 2 / 2 [===========================================================] 100.00% 0s 20190715:10:16:18 gprestore:gpadmin:gpmaster:002765-[INFO]:-Data restore complete 20190715:10:16:18 gprestore:gpadmin:gpmaster:002765-[INFO]:-Restoring post-data metadata Post-data objects restored: 2 / 2 [================================================] 100.00% 0s 20190715:10:16:18 gprestore:gpadmin:gpmaster:002765-[INFO]:-Post-data metadata restore complete 20190715:10:16:18 gprestore:gpadmin:gpmaster:002765-[INFO]:-Found neither /opt/gpdb/bin/gp_email_contacts.yaml nor /home/gpadmin/gp_email_contacts.yaml 20190715:10:16:18 gprestore:gpadmin:gpmaster:002765-[INFO]:-Email containing gprestore report /var/tmp/0715/gpseg-1/backups/20190715/20190715101501/gprestore_20190715101501_20190715101617_report will not be sent 20190715:10:16:18 gprestore:gpadmin:gpmaster:002765-[INFO]:-Restore completed successfully ","date":"2019-07-16","objectID":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/:6:0","tags":["greenplumä½¿ç”¨gpbackup"],"title":"greenplumå¹¶è¡Œå¤‡ä»½ä¸æ¢å¤","uri":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"},{"categories":["greenplum"],"content":"è¡¨çº§åˆ«æ¢å¤ gpadmin@gsdw_dev-master:~$ gprestore --backup-dir /var/tmp/0724 --timestamp 20190724132252 --include-table test.test_user_tb 20190724:14:32:03 gprestore:gpadmin:gsdw_dev-master:001423-[INFO]:-Restore Key = 20190724132252 20190724:14:32:04 gprestore:gpadmin:gsdw_dev-master:001423-[INFO]:-Restoring pre-data metadata Pre-data objects restored: 0 / 11 [-------------------------------------------------------] 0.00%20190724:14:32:05 gprestore:gpadmin:gsdw_dev-master:001423-[WARNING]:-Schema meta_data already exists 20190724:14:32:05 gprestore:gpadmin:gsdw_dev-master:001423-[WARNING]:-Schema test already exists Pre-data objects restored: 11 / 11 [===================================================] 100.00% 1s 20190724:14:32:07 gprestore:gpadmin:gsdw_dev-master:001423-[INFO]:-Pre-data metadata restore complete Tables restored: 1 / 1 [===============================================================] 100.00% 0s 20190724:14:32:09 gprestore:gpadmin:gsdw_dev-master:001423-[INFO]:-Data restore complete 20190724:14:32:09 ","date":"2019-07-16","objectID":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/:7:0","tags":["greenplumä½¿ç”¨gpbackup"],"title":"greenplumå¹¶è¡Œå¤‡ä»½ä¸æ¢å¤","uri":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"},{"categories":["greenplum"],"content":"å¤‡ä»½æ¢å¤å‰åæ¯”è¾ƒ å¤‡ä»½å‰è¡¨ç»“æ„ å¤‡ä»½å‰æ•°æ®é‡ åˆ é™¤ cn_accounting_ar_invoice_lines è¡¨åšæ¢å¤æ¼”ç¤º å¤‡ä»½æ¢å¤åè¡¨ç»“æ„ å¤‡ä»½æ¢å¤åæ•°æ®é‡ æ³¨æ„äº‹é¡¹ï¼ˆå‘ï¼‰ gpbackup éœ€è¦ä¸‹è½½æ”¾åˆ° greenplum çš„ç¯å¢ƒå˜é‡ä¸­å» gprestore æ¢å¤æ•°æ®çš„å‰æ greenplum æœ‰è¿™ä¸ªè¦æ¢å¤çš„æ•°æ®åº“ä¸”æ•°æ®åº“è¦æ˜¯ç©ºçš„â€¦â€¦â€¦. gprestore æ¢å¤è¡¨çš„å‰æ greenplum è¦æ¢å¤çš„è¡¨æ˜¯ç©ºçš„â€¦â€¦â€¦. å¤‡ä»½å’Œå’Œæ¢å¤æœ€å¥½æŒ‡å®šå¤‡ä»½è·¯å¾„,ä¸ç„¶æ¢å¤çš„æ—¶å€™æ‰¾ä¸åˆ°â€¦â€¦â€¦ å¦‚æœè¦ä½¿ç”¨å¢é‡å¤‡ä»½,åœ¨å…¨å¤‡ä»½çš„æ—¶å€™éœ€è¦åŠ ï¼ˆ â€“leaf-partition-data)å‚æ•°â€¦â€¦â€¦â€¦ è¯¦ç»†è¯´æ˜è¯·è§å®˜æ–¹æ–‡æ¡£ ","date":"2019-07-16","objectID":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/:8:0","tags":["greenplumä½¿ç”¨gpbackup"],"title":"greenplumå¹¶è¡Œå¤‡ä»½ä¸æ¢å¤","uri":"/greenplum%E5%B9%B6%E8%A1%8C%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"},{"categories":["greenplum"],"content":"æ‰€æœ‰èŠ‚ç‚¹æ“ä½œ ","date":"2019-07-04","objectID":"/greenplum%E5%AE%89%E8%A3%85/:0:0","tags":["greenplum ubuntu 16.04å®‰è£…"],"title":"greenplumå®‰è£…","uri":"/greenplum%E5%AE%89%E8%A3%85/"},{"categories":["greenplum"],"content":"æ‰€æœ‰èŠ‚ç‚¹å®‰è£… greenplum add-apt-repository ppa:greenplum/db apt-get update apt-get install greenplum-db-oss ","date":"2019-07-04","objectID":"/greenplum%E5%AE%89%E8%A3%85/:1:0","tags":["greenplum ubuntu 16.04å®‰è£…"],"title":"greenplumå®‰è£…","uri":"/greenplum%E5%AE%89%E8%A3%85/"},{"categories":["greenplum"],"content":"å°†æ‰€æœ‰èŠ‚ç‚¹æ·»åŠ åˆ° hosts æ–‡ä»¶ä¸­ 172.16.132.134 gpmaster 172.16.132.136 gpslave 172.16.132.135 gpsegment1 172.16.132.137 gpsegment2 ","date":"2019-07-04","objectID":"/greenplum%E5%AE%89%E8%A3%85/:2:0","tags":["greenplum ubuntu 16.04å®‰è£…"],"title":"greenplumå®‰è£…","uri":"/greenplum%E5%AE%89%E8%A3%85/"},{"categories":["greenplum"],"content":"æ·»åŠ  gpadmin ç”¨æˆ· groupadd gpadmin useradd -m -g gpadmin -s /bin/bash gpadmin ","date":"2019-07-04","objectID":"/greenplum%E5%AE%89%E8%A3%85/:3:0","tags":["greenplum ubuntu 16.04å®‰è£…"],"title":"greenplumå®‰è£…","uri":"/greenplum%E5%AE%89%E8%A3%85/"},{"categories":["greenplum"],"content":"æ›´æ”¹ç³»ç»Ÿå‚æ•° vim /etc/sysctl.conf kernel.shmmax = 500000000 kernel.shmmni = 4096 kernel.shmall = 4000000000 kernel.sem = 250 512000 100 2048 kernel.sysrq = 1 kernel.core_uses_pid = 1 kernel.msgmnb = 65536 kernel.msgmax = 65536 kernel.msgmni = 2048 net.ipv4.tcp_syncookies = 1 net.ipv4.conf.default.accept_source_route = 0 net.ipv4.tcp_tw_recycle = 1 net.ipv4.tcp_max_syn_backlog = 4096 net.ipv4.conf.all.arp_filter = 1 net.ipv4.ip_local_port_range = 1025 65535 net.core.netdev_max_backlog = 10000 net.core.rmem_max = 2097152 net.core.wmem_max = 2097152 vm.overcommit_memory = 2 vm.overcommit_ratio = 95 net.ipv4.ip_forward = 0 vim /etc/security/limits.conf * soft nofile 65536 * hard nofile 65536 * soft nproc 131072 * hard nproc 131072 ","date":"2019-07-04","objectID":"/greenplum%E5%AE%89%E8%A3%85/:4:0","tags":["greenplum ubuntu 16.04å®‰è£…"],"title":"greenplumå®‰è£…","uri":"/greenplum%E5%AE%89%E8%A3%85/"},{"categories":["greenplum"],"content":"è®¾ç½® ntp echo \"server pgmaster\" \u003e\u003e /etc/ntp.conf systemctl restart ntpd ","date":"2019-07-04","objectID":"/greenplum%E5%AE%89%E8%A3%85/:5:0","tags":["greenplum ubuntu 16.04å®‰è£…"],"title":"greenplumå®‰è£…","uri":"/greenplum%E5%AE%89%E8%A3%85/"},{"categories":["greenplum"],"content":"è®¾ç½® segments æ•°æ®ç›®å½•å­˜å‚¨å‚æ•°(ä»…åœ¨ segment æœºå™¨ä¸Šæ‰§è¡Œå³å¯) blockdev --setra 16384 /dev/sda ","date":"2019-07-04","objectID":"/greenplum%E5%AE%89%E8%A3%85/:6:0","tags":["greenplum ubuntu 16.04å®‰è£…"],"title":"greenplumå®‰è£…","uri":"/greenplum%E5%AE%89%E8%A3%85/"},{"categories":["greenplum"],"content":"é‡å¯æœºå™¨ reboot master èŠ‚ç‚¹æ“ä½œ ","date":"2019-07-04","objectID":"/greenplum%E5%AE%89%E8%A3%85/:7:0","tags":["greenplum ubuntu 16.04å®‰è£…"],"title":"greenplumå®‰è£…","uri":"/greenplum%E5%AE%89%E8%A3%85/"},{"categories":["greenplum"],"content":"åˆ›å»º data ç›®å½• mkdir -p /data/master chown -R gpadmin:gpadmin /data ","date":"2019-07-04","objectID":"/greenplum%E5%AE%89%E8%A3%85/:8:0","tags":["greenplum ubuntu 16.04å®‰è£…"],"title":"greenplumå®‰è£…","uri":"/greenplum%E5%AE%89%E8%A3%85/"},{"categories":["greenplum"],"content":"é…ç½®ç¯å¢ƒå˜é‡ echo \"source /opt/gpdb/greenplum_path.sh\" \u003e\u003e /home/gpadmin/.bashrc source .bashrc ","date":"2019-07-04","objectID":"/greenplum%E5%AE%89%E8%A3%85/:9:0","tags":["greenplum ubuntu 16.04å®‰è£…"],"title":"greenplumå®‰è£…","uri":"/greenplum%E5%AE%89%E8%A3%85/"},{"categories":["greenplum"],"content":"åˆå§‹åŒ– greenplum(gpadmin ç”¨æˆ·å®¶ç›®å½•ä¸‹) æ–°å»º allhosts gpmaster gpslave gpsegment1 gpsegment2 æ–°å»º seghosts gpsegment1 gpsegment2 ä¿®æ”¹åˆå§‹åŒ–é…ç½® cp /opt/gpdb/docs/cli_help/gpconfigs/gpinitsystem_config . \u0026\u0026 vim gpinitsystem_config ( declare -a DATA_DIRECTORY=(/data/primary ) MASTER_HOSTNAME=gpmaster MASTER_DIRECTORY=/data/master MIRROR_PORT_BASE=50000 REPLICATION_PORT_BASE=41000 MIRROR_REPLICATION_PORT_BASE=51000 ) é…ç½®å…å¯†é’¥ç™»å½• gpssh-exkeys -f allhosts åœ¨å„èŠ‚ç‚¹æ–°å»ºæ•°æ®ç›®å½• gpssh -h gsdw-standby -e 'mkdir -p /data/master' gpssh -f hostfile_seg -e 'mkdir -p /data/primary' gpssh -f hostfile_seg -e 'mkdir -p /data/mirror' è¡¥å……å‚æ•°è®¾ç½®(root ç”¨æˆ·ä¸‹æ‰§è¡Œ) echo \"RemoveIPC=no\" \u003e\u003e /etc/systemd/logind.conf service systemd-logind restart æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ– gpinitsystem -c gpinitsystem_config -h seghosts gpinitstandby -s gpslave å°†æ•°æ®ç›®å½•åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ echo \"export MASTER_DATA_DIRECTORY=/data/master/gpseg-1/\" \u003e\u003e /home/gpadmin/.bashrc å¤‡æ³¨ pgsql postgres(greenplum æ²¡æœ‰ pgadmin åº“ä¸èƒ½ psql ç›´æ¥è¿›å…¥æ•°æ®åº“) ","date":"2019-07-04","objectID":"/greenplum%E5%AE%89%E8%A3%85/:10:0","tags":["greenplum ubuntu 16.04å®‰è£…"],"title":"greenplumå®‰è£…","uri":"/greenplum%E5%AE%89%E8%A3%85/"},{"categories":["postgresql"],"content":"pg_rman å·¥å…· pg_rman æ˜¯ PostgreSQL çš„å¤‡ä»½ä¸æ¢å¤å·¥å…·ï¼Œæ”¯æŒå…¨é‡ã€å¢é‡ã€å½’æ¡£ä¸‰ç§å¤‡æ–¹å¼ã€‚ pg_rman å®‰è£… pg_rman æ²¡æœ‰ deb åŒ…,éœ€è¦ç¼–è¯‘å®‰è£…ã€‚ ","date":"2019-07-03","objectID":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/:0:0","tags":["pg_rmanå¤‡ä»½"],"title":"pg_rmanå¤‡ä»½postgresql","uri":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/"},{"categories":["postgresql"],"content":"å¼€æºä½¿ç”¨æ–‡æ¡£ http://ossc-db.github.io/pg_rman/index.html ","date":"2019-07-03","objectID":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/:1:0","tags":["pg_rmanå¤‡ä»½"],"title":"pg_rmanå¤‡ä»½postgresql","uri":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/"},{"categories":["postgresql"],"content":"ä¸‹è½½é“¾æ¥ https://github.com/ossc-db/pg_rman/releases ","date":"2019-07-03","objectID":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/:2:0","tags":["pg_rmanå¤‡ä»½"],"title":"pg_rmanå¤‡ä»½postgresql","uri":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/"},{"categories":["postgresql"],"content":"ç¼–è¯‘å®‰è£… è§£å‹å‹ç¼©åŒ…å,åœ¨å®‰è£…ç›®å½•ä¸‹ make \u0026\u0026 make install ","date":"2019-07-03","objectID":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/:3:0","tags":["pg_rmanå¤‡ä»½"],"title":"pg_rmanå¤‡ä»½postgresql","uri":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/"},{"categories":["postgresql"],"content":"å®‰è£…æ³¨æ„äº‹é¡¹ ä¸€å®šè¦ä¸‹è½½å’Œæœ¬æœº pgsql ç‰ˆæœ¬ç›¸åŒçš„å‹ç¼©åŒ…ç¼–è¯‘å®‰è£… ä¾èµ–(libpq-dev\\postgresql-server-dev-all\\libpam0g-dev\\libedit-dev\\libselinux1-dev) pg_rman é»˜è®¤å®‰è£…åœ¨ postgresql çš„ bin ç›®å½•ä¸‹ pg_rman ä½¿ç”¨ ","date":"2019-07-03","objectID":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/:4:0","tags":["pg_rmanå¤‡ä»½"],"title":"pg_rmanå¤‡ä»½postgresql","uri":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/"},{"categories":["postgresql"],"content":"ä½¿ç”¨å‰æ³¨æ„äº‹é¡¹ æ–°å»º BACKUP_PATH\\SRVLOG_PATH\\ARCLOG_PATH(å½’æ¡£æ—¥å¿—ç›®å½•)å¹¶è®¾ç½®ä¸»:ç»„ä¸º postgres pg_rman éœ€è¦åŠ å…¥ç¯å¢ƒå˜é‡ export PGDATA=/var/lib/postgresql/9.5/main export PATH=/usr/lib/postgresql/9.5/bin:$PATH export ARCLOG_PATH=/tmp/postgres/arc_log export SRVLOG_PATH=/tmp/postgres/pg_log export BACKUP_PATH=/tmp/postgres/backup é…ç½® postgresql.conf å¼€å¯æ—¥å¿—å½’æ¡£,é…ç½®å®Œæˆåé‡å¯ postgresql wal_level = archive archive_mode = on archive_command = 'cp %p /tmp/postgres/arc_log/%f' archive_timeout = 60 åˆå§‹åŒ–å¤‡ä»½ç›®å½• pg_rman init -B /tmp/postgres/backup su postgres è¿›å…¥postgresç”¨æˆ·ä¸‹æ‰§è¡Œå¤‡ä»½æ“ä½œï¼Œè‹¥ä½¿ç”¨å…¶ä»–ç”¨æˆ·å¤‡ä»½ä¼šå¯¼è‡´ å¤‡ä»½æ¢å¤åæƒé™ä¸å¯¹æ— æ³•å¯åŠ¨postgresql ä½¿ç”¨ pg_rman å¤‡ä»½ ","date":"2019-07-03","objectID":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/:5:0","tags":["pg_rmanå¤‡ä»½"],"title":"pg_rmanå¤‡ä»½postgresql","uri":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/"},{"categories":["postgresql"],"content":"å…¨é‡å¤‡ä»½ postgres@C01U16BOX02:~$ pg_rman backup -b full INFO: copying database files INFO: copying archived WAL files INFO: backup complete INFO: Please execute 'pg_rman validate' to verify the files are correctly copied. postgres@C01U16BOX02:~$ pg_rman validate INFO: validate: \"2019-07-03 15:52:08\" backup and archive log files by CRC INFO: backup \"2019-07-03 15:52:08\" is valid ","date":"2019-07-03","objectID":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/:6:0","tags":["pg_rmanå¤‡ä»½"],"title":"pg_rmanå¤‡ä»½postgresql","uri":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/"},{"categories":["postgresql"],"content":"å¢é‡å¤‡ä»½ postgres@C01U16BOX02:~$ pg_rman backup -b incremental INFO: copying database files INFO: copying archived WAL files INFO: backup complete INFO: Please execute 'pg_rman validate' to verify the files are correctly copied. ","date":"2019-07-03","objectID":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/:7:0","tags":["pg_rmanå¤‡ä»½"],"title":"pg_rmanå¤‡ä»½postgresql","uri":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/"},{"categories":["postgresql"],"content":"å¤‡ä»½æ ¡éªŒ æ¯æ¬¡å¤‡ä»½ç»“æŸå¿…é¡»åšä¸€æ¬¡æ ¡éªŒï¼Œå¦åˆ™å¤‡ä»½ä¸èƒ½ç”¨æ¥æ¢å¤ï¼Œå¢é‡å¤‡ä»½æ—¶ä¹Ÿä¸ä¼šç”¨å®ƒæ¥åšå¢é‡æ¯”è¾ƒ postgres@C01U16BOX02:~$ pg_rman validate INFO: validate: \"2019-07-03 15:52:08\" backup and archive log files by CRC INFO: backup \"2019-07-03 15:52:08\" is valid ","date":"2019-07-03","objectID":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/:8:0","tags":["pg_rmanå¤‡ä»½"],"title":"pg_rmanå¤‡ä»½postgresql","uri":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/"},{"categories":["postgresql"],"content":"æŸ¥çœ‹å¤‡ä»½ postgres@C01U16BOX02:~$ pg_rman show ===================================================================== StartTime EndTime Mode Size TLI Status ===================================================================== 2019-07-03 15:52:08 2019-07-03 15:52:28 FULL 86MB 1 OK 2019-07-03 15:51:02 2019-07-03 15:51:05 INCR 45MB 1 OK 2019-07-03 15:49:58 2019-07-03 15:50:00 INCR 61MB 1 OK 2019-07-03 15:46:13 2019-07-03 15:46:17 FULL 68MB 1 OK ä½¿ç”¨ pg_rman è¿›è¡Œæ¢å¤ ","date":"2019-07-03","objectID":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/:9:0","tags":["pg_rmanå¤‡ä»½"],"title":"pg_rmanå¤‡ä»½postgresql","uri":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/"},{"categories":["postgresql"],"content":"æ³¨æ„äº‹é¡¹ æ¢å¤æ•°æ®å¿…é¡»å®åœ¨ postgresql åœæ­¢çš„çŠ¶æ€ä¸‹ æ¢å¤å‰è¯·ä½¿ç”¨ pg_rman show æŸ¥çœ‹æ‰€éœ€è¦æ¢å¤çš„æ—¶é—´ç‚¹ ","date":"2019-07-03","objectID":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/:10:0","tags":["pg_rmanå¤‡ä»½"],"title":"pg_rmanå¤‡ä»½postgresql","uri":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/"},{"categories":["postgresql"],"content":"æ¢å¤æ“ä½œ pg_rman restore [options:] #ä¸æŒ‡å®šoptionsåˆ™é»˜è®¤æ¢å¤åˆ°æœ€è¿‘ä¸€æ¬¡å…¨é‡å¤‡ä»½ --recovery-target-time #æŒ‡å®šæ¢å¤æ—¶é—´ç‚¹ postgres@C01U16BOX02:~$ pg_rman restore --recovery-target-time \"2019-07-03 15:51:02\" INFO: the recovery target timeline ID is not given INFO: use timeline ID of current database cluster as recovery target: 1 INFO: calculating timeline branches to be used to recovery target point INFO: searching latest full backup which can be used as restore start point INFO: found the full backup can be used as base in recovery: \"2019-07-03 15:46:13\" INFO: copying online WAL files and server log files INFO: clearing restore destination INFO: validate: \"2019-07-03 15:46:13\" backup and archive log files by SIZE INFO: backup \"2019-07-03 15:46:13\" is valid INFO: restoring database files from the full mode backup \"2019-07-03 15:46:13\" INFO: searching incremental backup to be restored INFO: validate: \"2019-07-03 15:49:58\" backup and archive log files by SIZE INFO: backup \"2019-07-03 15:49:58\" is valid INFO: restoring database files from the incremental mode backup \"2019-07-03 15:49:58\" INFO: searching backup which contained archiv ","date":"2019-07-03","objectID":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/:11:0","tags":["pg_rmanå¤‡ä»½"],"title":"pg_rmanå¤‡ä»½postgresql","uri":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/"},{"categories":["postgresql"],"content":"å¤‡æ³¨ è¯¦ç»†æ–‡æ¡£å¯è§ github ","date":"2019-07-03","objectID":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/:12:0","tags":["pg_rmanå¤‡ä»½"],"title":"pg_rmanå¤‡ä»½postgresql","uri":"/pg-rman%E5%A4%87%E4%BB%BDpostgresql/"},{"categories":["GO"],"content":"os å¸¸ç”¨å¯¼å‡ºå‡½æ•° func Hostname() (name string, err error) // Hostname è¿”å›å†…æ ¸æä¾›çš„ä¸»æœºå func Hostname() (name string, err error) // Hostname è¿”å›å†…æ ¸æä¾›çš„ä¸»æœºå func Environ() []string // Environ è¿”å›è¡¨ç¤ºç¯å¢ƒå˜é‡çš„æ ¼å¼ä¸º\"key=value\"çš„å­—ç¬¦ä¸²çš„åˆ‡ç‰‡æ‹·è´ func Getenv(key string) string // Getenv æ£€ç´¢å¹¶è¿”å›åä¸º key çš„ç¯å¢ƒå˜é‡çš„å€¼ func Getpid() int // Getpid è¿”å›è°ƒç”¨è€…æ‰€åœ¨è¿›ç¨‹çš„è¿›ç¨‹ ID func Exit(code int) // Exit è®©å½“å‰ç¨‹åºä»¥ç»™å‡ºçš„çŠ¶æ€ç  code é€€å‡ºã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒçŠ¶æ€ç  0 è¡¨ç¤ºæˆåŠŸï¼Œé 0 è¡¨ç¤ºå‡ºé”™ã€‚ç¨‹åºä¼šç«‹åˆ»ç»ˆæ­¢ï¼Œdefer çš„å‡½æ•°ä¸ä¼šè¢«æ‰§è¡Œ func Stat(name string) (fi FileInfo, err error) // è·å–æ–‡ä»¶ä¿¡æ¯ func Getwd() (dir string, err error) // Getwd è¿”å›ä¸€ä¸ªå¯¹åº”å½“å‰å·¥ä½œç›®å½•çš„æ ¹è·¯å¾„ func Mkdir(name string, perm FileMode) error // ä½¿ç”¨æŒ‡å®šçš„æƒé™å’Œåç§°åˆ›å»ºä¸€ä¸ªç›®å½• func MkdirAll(path string, perm FileMode) error // ä½¿ç”¨æŒ‡å®šçš„æƒé™å’Œåç§°åˆ›å»ºä¸€ä¸ªç›®å½•ï¼ŒåŒ…æ‹¬ä»»ä½•å¿…è¦çš„ä¸Šçº§ç›®å½•ï¼Œå¹¶è¿”å› nilï¼Œå¦åˆ™è¿”å›é”™è¯¯ func Remove(name string) error // åˆ é™¤ name æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½• func TempDir() string // è¿”å›ä¸€ä¸ªç”¨äºä¿ç®¡ä¸´æ—¶æ–‡ä»¶çš„é»˜è®¤ç›®å½• var Args []string Args ä¿ç®¡äº†å‘½ä»¤è¡Œå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç¨‹åºåã€‚ ","date":"2019-05-05","objectID":"/golang-os%E5%8C%85%E7%94%A8%E6%B3%95/:0:0","tags":["osåŒ…ç”¨æ³•"],"title":"Golang osåŒ…ç”¨æ³•","uri":"/golang-os%E5%8C%85%E7%94%A8%E6%B3%95/"},{"categories":["Mysql"],"content":"IP è§„åˆ’ 10.1.1.22(master) 10.1.1.21(master ca) 10.1.1.20(slave) 172.18.36.75(manager) å®‰è£…å‰å‡†å¤‡å·¥ä½œ ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:0:0","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"master ä¸ slave ä¹‹é—´é…ç½® ssh å…å¯†é’¥ç™»å½• ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:1:0","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"mha ä¾èµ–ä¸ä¸»ä»å¤åˆ¶ï¼Œè¯·æå‰é…ç½®å¥½ä¸»ä»å¤åˆ¶ å®‰è£… mha node ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:2:0","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"å®‰è£… perl ç¯å¢ƒ ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:3:0","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"ä¸‹è½½ cpanm wget http://xrl.us/cpanm --no-check-certificate ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:3:1","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"playbook template æ¨¡æ¿ #!/bin/bash #================================================================ # Copyright (C) 2019 Sangfor Ltd. All rights reserved. # # æ–‡ä»¶åç§°ï¼šinstall.sh # åˆ› å»º è€…ï¼šluwenzheng # é‚® ç®±ï¼šredgaojila@gmail.com # åˆ›å»ºæ—¥æœŸï¼š2019å¹´04æœˆ23æ—¥ # æ è¿°ï¼š # #================================================================ #!/bin/bash mv /var/tmp/{{ lookup('pipe', 'date +%m%d') }}/cpanm /usr/bin chmod 755 /usr/bin/cpanm cat \u003e /root/list \u003c\u003c EOF install DBD::mysql EOF for package in `cat /root/list` do cpanm $package done ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:3:2","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"node å®‰è£… ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:4:0","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"ä¸‹è½½ node deb åŒ… wget https://github.com/yoshinorim/mha4mysql-node/releases/download/v0.58/mha4mysql-node_0.58-0_all.deb ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:4:1","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"playbook å®‰è£… ---- name:å»ºç«‹å¤‡ä»½ç›®å½•file:\u003epath=\"/var/tmp/{{ lookup('pipe', 'date +%m%d') }}\" state=directory- name:copy å®‰è£…åŒ…copy:\u003esrc=/home/luwenzheng/ansible/roles/gens.mysqlmha/files/mha4mysql-node_0.58-0_all.deb dest=/var/tmp/{{ lookup('pipe', 'date +%m%d') }}- name:å®‰è£…nodeèŠ‚ç‚¹shell:dpkg -i /var/tmp/{{ lookup('pipe', 'date +%m%d') }}/mha4mysql-node_0.58-0_all.deb ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:4:2","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"å®‰è£…å®Œæˆåå¯åœ¨/usr/bin ä¸‹æœ‰ä»¥ä¸‹æ–‡ä»¶ root@nj-lab-0-it:~# dpkg -L mha4mysql-node /. /usr /usr/bin /usr/bin/purge_relay_logs /usr/bin/filter_mysqlbinlog /usr/bin/save_binary_logs /usr/bin/apply_diff_relay_logs /usr/share /usr/share/man /usr/share/man/man1 /usr/share/man/man1/save_binary_logs.1p.gz /usr/share/man/man1/filter_mysqlbinlog.1p.gz /usr/share/man/man1/apply_diff_relay_logs.1p.gz /usr/share/man/man1/purge_relay_logs.1p.gz /usr/share/perl5 /usr/share/perl5/MHA /usr/share/perl5/MHA/BinlogPosFinderElp.pm /usr/share/perl5/MHA/BinlogPosFindManager.pm /usr/share/perl5/MHA/BinlogPosFinderXid.pm /usr/share/perl5/MHA/BinlogPosFinder.pm /usr/share/perl5/MHA/BinlogHeaderParser.pm /usr/share/perl5/MHA/NodeConst.pm /usr/share/perl5/MHA/NodeUtil.pm /usr/share/perl5/MHA/SlaveUtil.pm /usr/share/perl5/MHA/BinlogManager.pm /usr/share/doc /usr/share/doc/mha4mysql-node /usr/share/doc/mha4mysql-node/changelog.Debian.gz /usr/share/doc/mha4mysql-node/AUTHORS /usr/share/doc/mha4mysql-node/README /usr/share/doc/mha4mysql-node/copyright ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:4:3","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"mha manager å®‰è£… ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:5:0","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"ä¸‹è½½ manager deb åŒ… wget https://github.com/yoshinorim/mha4mysql-node/releases/download/v0.58/mha4mysql-manager_0.58-0_all.deb ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:5:1","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"playbook å®‰è£… ---- name:åˆ›å»ºå¤‡ä»½ç›®å½•å’Œé…ç½®æ–‡ä»¶ç›®å½•file:\u003epath={{ item }} state=directorywith_items:- /var/tmp/{{ lookup('pipe', 'date +%m%d') }}- /usr/local/masterha/app1- /etc/masterha- name:åˆ›å»ºé…ç½®æ–‡ä»¶file:\u003epath={{ item }} state=touchwith_items:- /etc/masterha/app1/master_ip_failover- /etc/masterha/app1/master_ip_online_change- /etc/masterha/app1/send_report- /etc/masterha/app1/power_manager- /etc/masterha/app1/app1.conf- name:copy å®‰è£…åŒ…copy:\u003esrc=/home/luwenzheng/ansible/roles/gens.mysqlmha/files/mha4mysql-manager_0.58-0_all.deb dest=/var/tmp/{{ lookup('pipe', 'date +%m%d') }}- name:å®‰è£…mastershell:dpkg -i /var/tmp/{{ lookup('pipe', 'date +%m%d') }}/mha4mysql-manager_0.58-0_all.deb ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:5:2","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"å®‰è£…å®Œæˆåä¼šæœ‰ä»¥ä¸‹æ–‡ä»¶ root@nj-lab-2-it:/var/tmp/0423# dpkg -L mha4mysql-manager /. /usr /usr/bin /usr/bin/masterha_check_status /usr/bin/masterha_check_ssh /usr/bin/masterha_master_monitor /usr/bin/masterha_manager /usr/bin/masterha_master_switch /usr/bin/masterha_stop /usr/bin/masterha_secondary_check /usr/bin/masterha_check_repl /usr/bin/masterha_conf_host /usr/share /usr/share/man /usr/share/man/man1 /usr/share/man/man1/masterha_master_monitor.1p.gz /usr/share/man/man1/masterha_manager.1p.gz /usr/share/man/man1/masterha_secondary_check.1p.gz /usr/share/man/man1/masterha_check_ssh.1p.gz /usr/share/man/man1/masterha_master_switch.1p.gz /usr/share/man/man1/masterha_check_repl.1p.gz /usr/share/man/man1/masterha_stop.1p.gz /usr/share/man/man1/masterha_check_status.1p.gz /usr/share/man/man1/masterha_conf_host.1p.gz /usr/share/perl5 /usr/share/perl5/MHA /usr/share/perl5/MHA/ManagerAdmin.pm /usr/share/perl5/MHA/Server.pm /usr/share/perl5/MHA/MasterRotate.pm /usr/share/perl5/MHA/Config.pm /usr/share/perl5/MHA/ManagerAdminWrapper.pm /usr/share/perl5/MHA/ServerManager.pm /usr/share/perl5/MHA/HealthCheck.pm /usr/share/perl5/MHA/ManagerConst.pm /usr/share/perl5/MHA/DBHelper.pm /usr/share/perl5/MHA/SSHCheck.pm /usr/share/perl5/MHA/FileStatus.pm /usr/share/perl5/MHA/ManagerUtil.pm /usr/share/perl5/MHA/MasterFailover.pm /usr/share/perl5/MHA/MasterMonitor.pm /usr/share/doc /usr/share/doc/mha4mysql-manager /usr/share/doc/mha4mysql-manager/changelog.Debian.gz /usr/share/doc/mha4mysql-manager/AUTHORS /usr/share/doc/mha4mysql-manager/README /usr/share/doc/mha4mysql-manager/copyright ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:5:3","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"æ–‡ä»¶æè¿° masterha_check_repl æ£€æŸ¥MySQLå¤åˆ¶çŠ¶å†µ masterha_check_ssh æ£€æŸ¥MHAçš„SSHé…ç½®çŠ¶å†µ masterha_check_status æ£€æµ‹å½“å‰MHAè¿è¡ŒçŠ¶æ€ masterha_conf_host æ·»åŠ æˆ–åˆ é™¤é…ç½®çš„serverä¿¡æ¯ masterha_manger å¯åŠ¨MHA masterha_master_monitor æ£€æµ‹masteræ˜¯å¦å®•æœº masterha_master_switch æ§åˆ¶æ•…éšœè½¬ç§»ï¼ˆè‡ªåŠ¨æˆ–è€…æ‰‹åŠ¨ï¼‰ ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:5:4","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"mha manager é…ç½® ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:6:0","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"åˆ›å»º mha å·¥ä½œç›®å½• mkdir /etc/masterha ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:6:1","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"app1.cnf é…ç½® [server default] manager_log=/var/log/masterha/app1-manager.log manager_workdir=/etc/masterha/app1 master_binlog_dir=/var/lib/mysql password=******** ping_interval=5 remote_workdir=/tmp repl_password=******** repl_user=root secondary_check_script=/usr/bin/masterha_secondary_check -s 10.1.1.20 -s 10.1.1.21 --user=root --master_host=10.1.1.22 --master_ip=10.1.1.22 --master_port=3306 shutdown_script=\"\" ssh_user=root user=mha_rep [server2] candidate_master=1 check_repl_delay=0 hostname=10.1.1.21 port=3306 [server3] hostname=10.1.1.20 port=3306 ","date":"2019-04-25","objectID":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/:6:2","tags":["Mysqlé«˜å¯ç”¨"],"title":"mysqlé«˜å¯ç”¨æ¶æ„mhaå®‰è£…","uri":"/mysql%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84mha%E5%AE%89%E8%A3%85/"},{"categories":["Mysql"],"content":"ä¸»æœåŠ¡å™¨é…ç½® ä¿®æ”¹ Mysql é…ç½® vi /etc/msyql/mysql.conf.d/msyqld.conf åœ¨[msyqld]ä¸­åŠ  #ä¸»æ•°æ®åº“ç«¯IDå· server_id = 1 #å¼€å¯äºŒè¿›åˆ¶æ—¥å¿— log-bin = mysql-bin #éœ€è¦å¤åˆ¶çš„æ•°æ®åº“åï¼Œå¦‚æœå¤åˆ¶å¤šä¸ªæ•°æ®åº“ï¼Œé‡å¤è®¾ç½®è¿™ä¸ªé€‰é¡¹å³å¯ binlog-do-db = db #å°†ä»æœåŠ¡å™¨ä»ä¸»æœåŠ¡å™¨æ”¶åˆ°çš„æ›´æ–°è®°å…¥åˆ°ä»æœåŠ¡å™¨è‡ªå·±çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ä¸­ log-slave-updates #æ§åˆ¶binlogçš„å†™å…¥é¢‘ç‡ã€‚æ¯æ‰§è¡Œå¤šå°‘æ¬¡äº‹åŠ¡å†™å…¥ä¸€æ¬¡(è¿™ä¸ªå‚æ•°æ€§èƒ½æ¶ˆè€—å¾ˆå¤§ï¼Œä½†å¯å‡å°MySQLå´©æºƒé€ æˆçš„æŸå¤±) sync_binlog = 1 #è¿™ä¸ªå‚æ•°ä¸€èˆ¬ç”¨åœ¨ä¸»ä¸»åŒæ­¥ä¸­ï¼Œç”¨æ¥é”™å¼€è‡ªå¢å€¼, é˜²æ­¢é”®å€¼å†²çª auto_increment_offset = 1 #è¿™ä¸ªå‚æ•°ä¸€èˆ¬ç”¨åœ¨ä¸»ä¸»åŒæ­¥ä¸­ï¼Œç”¨æ¥é”™å¼€è‡ªå¢å€¼, é˜²æ­¢é”®å€¼å†²çª auto_increment_increment = 1 #äºŒè¿›åˆ¶æ—¥å¿—è‡ªåŠ¨åˆ é™¤çš„å¤©æ•°ï¼Œé»˜è®¤å€¼ä¸º0,è¡¨ç¤ºâ€œæ²¡æœ‰è‡ªåŠ¨åˆ é™¤â€ï¼Œå¯åŠ¨æ—¶å’ŒäºŒè¿›åˆ¶æ—¥å¿—å¾ªç¯æ—¶å¯èƒ½åˆ é™¤ expire_logs_days = 7 #å°†å‡½æ•°å¤åˆ¶åˆ°slave log_bin_trust_function_creators = 1 é‡å¯ Mysqlï¼Œåˆ›å»ºå…è®¸ä»æœåŠ¡å™¨åŒæ­¥æ•°æ®çš„è´¦æˆ· #åˆ›å»ºslaveè´¦å·accountï¼Œå¯†ç 123456 mysql\u003egrant replication slave on *.* to 'account'@'10.10.20.116' identified by '123456'; #æ›´æ–°æ•°æ®åº“æƒé™ mysql\u003eflush privileges; æŸ¥çœ‹ä¸»æœåŠ¡å™¨çŠ¶æ€ mysql\u003eshow master status\\G; ***************** 1. row **************** File: mysql-bin.000033 #å½“å‰è®°å½•çš„æ—¥å¿— Position: 337523 #æ—¥å¿—ä¸­è®°å½•çš„ä½ç½® Binlog_Do_DB: Binlog_Ignore_DB: ä»æœåŠ¡å™¨é…ç½® ä¿®æ”¹ mysql é…ç½® vi /etc/msyql/msyql.conf.d/msyqld.conf åœ¨[mysqld]ä¸­æ·»åŠ  server_id = 2 log-bin = mysql-bin log-slave-updates sync_binlog = 0 #log bufferå°†æ¯ç§’ä¸€æ¬¡åœ°å†™å…¥log fileä¸­ï¼Œå¹¶ä¸”log fileçš„flush(åˆ·åˆ°ç£ç›˜)æ“ä½œåŒæ—¶è¿›è¡Œã€‚è¯¥æ¨¡å¼ä¸‹åœ¨äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œä¸ä¼šä¸»åŠ¨è§¦å‘å†™å…¥ç£ç›˜çš„æ“ä½œ innodb_flush_log_at_trx_commit = 0 #æŒ‡å®šslaveè¦å¤åˆ¶å“ªä¸ªåº“ binlog-do-db = db #MySQLä¸»ä»å¤åˆ¶çš„æ—¶å€™ï¼Œå½“Masterå’ŒSlaveä¹‹é—´çš„ç½‘ç»œä¸­æ–­ï¼Œä½†æ˜¯Masterå’ŒSlaveæ— æ³•å¯Ÿè§‰çš„æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚é˜²ç«å¢™æˆ–è€…è·¯ç”±é—®é¢˜ï¼‰ã€‚Slaveä¼šç­‰å¾…slave_net_timeoutè®¾ç½®çš„ç§’æ•°åï¼Œæ‰èƒ½è®¤ä¸ºç½‘ç»œå‡ºç°æ•…éšœï¼Œç„¶åæ‰ä¼šé‡è¿å¹¶ä¸”è¿½èµ¶è¿™æ®µæ—¶é—´ä¸»åº“çš„æ•°æ® slave-net-timeout = 60 log_bin_trust_function_creators = 1 æ‰§è¡ŒåŒæ­¥å‘½ä»¤ #æ‰§è¡ŒåŒæ­¥å‘½ä»¤ï¼Œè®¾ç½®ä¸»æœåŠ¡å™¨ipï¼ŒåŒæ­¥è´¦å·å¯†ç ï¼ŒåŒæ­¥ä½ç½® mysql\u003echange master to master_host='10.10.20.111',master_user='account',master_password='123456',master_log_file='mysql-bin.000033',master_log_pos=337523; #å¼€å¯åŒæ­¥åŠŸèƒ½ mysql\u003estart slave; æŸ¥çœ‹ä»æœåŠ¡å™¨çŠ¶æ€ mysql\u003eshow slave status\\G; Slave_IO_State: Waiting for master to send event Master_Host: 10.10.20.111 Master_User: account Master_Port: 3306 Connect_Retry: 60 Master_Log_File: mysql-bin.000033 Read_Master_Log_Pos: 337523 Relay_Log_File: db2-relay-bin.000002 Relay_Log_Pos: 337686 Relay_Master_Log_File: mysql-bin.000033 Slave_IO_Running: Yes Slave_SQL_Running: Yes Replicate_Do_DB: Replicate_Ignore_DB: ... æŸ¥çœ‹ä¸»æœåŠ¡å™¨ä¸­çš„ slave \u003eshow slave hosts éƒ¨ç½²ä¸­çš„å‘ å› ä¸º 1146 é”™è¯¯å¯¼è‡´æ— æ³•åŒæ­¥ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ (slave_skip_errors=1146) ","date":"2019-04-25","objectID":"/ubuntu%E4%B8%8B%E9%85%8D%E7%BD%AEmysql%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/:0:0","tags":["ä¸»ä»å¤åˆ¶"],"title":"ubuntuä¸‹é…ç½®mysqlä¸»ä»å¤åˆ¶","uri":"/ubuntu%E4%B8%8B%E9%85%8D%E7%BD%AEmysql%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/"},{"categories":["Nginx"],"content":" server { listen 80; server_name **************; auth_basic off; location / { proxy_pass http://************:8081; proxy_set_header Host $host; proxy_redirect off; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_connect_timeout 60; proxy_read_timeout 600; proxy_send_timeout 600; } } ","date":"2019-04-25","objectID":"/nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E9%9A%90%E8%97%8F%E7%AB%AF%E5%8F%A3%E5%8F%B7/:0:0","tags":["åå‘ä»£ç†"],"title":"nginxåå‘ä»£ç†éšè—ç«¯å£å·","uri":"/nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E9%9A%90%E8%97%8F%E7%AB%AF%E5%8F%A3%E5%8F%B7/"}]